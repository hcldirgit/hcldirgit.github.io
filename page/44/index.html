<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>失落的乐章</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="失落的乐章的Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="失落的乐章">
<meta property="og:url" content="https://hcldirgit.github.io/page/44/index.html">
<meta property="og:site_name" content="失落的乐章">
<meta property="og:description" content="失落的乐章的Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="失落的乐章">
<meta name="twitter:description" content="失落的乐章的Blog">
  
    <link rel="alternative" href="/atom.xml" title="失落的乐章" type="application/atom+xml">
  
  
    <link rel="icon" href="https://github.com/hcldirgit/image/blob/master/0.png?raw=true">
  
  <link rel="stylesheet" href="/css/style.css">
  
  
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85415703-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://github.com/hcldirgit/image/blob/master/0.png?raw=true" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">失落的乐章</a></h1>
		</hgroup>

		
		<p class="header-subtitle">技术面前，永远都是学生。</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Ansible/" style="font-size: 10.42px;">Ansible</a> <a href="/tags/Apache/" style="font-size: 18.33px;">Apache</a> <a href="/tags/Cacti/" style="font-size: 11.67px;">Cacti</a> <a href="/tags/DNS/" style="font-size: 13.33px;">DNS</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/FTP/" style="font-size: 11.25px;">FTP</a> <a href="/tags/Git/" style="font-size: 10.83px;">Git</a> <a href="/tags/HA集群/" style="font-size: 11.67px;">HA集群</a> <a href="/tags/Hadoop/" style="font-size: 12.5px;">Hadoop</a> <a href="/tags/Jenkins/" style="font-size: 10.42px;">Jenkins</a> <a href="/tags/LAMP/" style="font-size: 19.58px;">LAMP</a> <a href="/tags/LNMP/" style="font-size: 17.08px;">LNMP</a> <a href="/tags/LVS/" style="font-size: 16.67px;">LVS</a> <a href="/tags/Linux/" style="font-size: 19.17px;">Linux</a> <a href="/tags/Linux命令/" style="font-size: 20px;">Linux命令</a> <a href="/tags/Linux安全/" style="font-size: 14.17px;">Linux安全</a> <a href="/tags/Memcached/" style="font-size: 11.25px;">Memcached</a> <a href="/tags/MongoDB/" style="font-size: 15.42px;">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 17.5px;">MySQL</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/Nagios/" style="font-size: 11.67px;">Nagios</a> <a href="/tags/Nginx/" style="font-size: 17.92px;">Nginx</a> <a href="/tags/OpenStack/" style="font-size: 11.25px;">OpenStack</a> <a href="/tags/Php/" style="font-size: 14.58px;">Php</a> <a href="/tags/Puppet/" style="font-size: 11.25px;">Puppet</a> <a href="/tags/Python/" style="font-size: 14.58px;">Python</a> <a href="/tags/Redis/" style="font-size: 16.25px;">Redis</a> <a href="/tags/Resin/" style="font-size: 10px;">Resin</a> <a href="/tags/Saltstack/" style="font-size: 10px;">Saltstack</a> <a href="/tags/Samba/" style="font-size: 12.08px;">Samba</a> <a href="/tags/Squid/" style="font-size: 14.58px;">Squid</a> <a href="/tags/Tomcat/" style="font-size: 13.75px;">Tomcat</a> <a href="/tags/Zabbix/" style="font-size: 15.83px;">Zabbix</a> <a href="/tags/haproxy/" style="font-size: 12.5px;">haproxy</a> <a href="/tags/keepalived/" style="font-size: 12.92px;">keepalived</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/shell练习/" style="font-size: 18.75px;">shell练习</a> <a href="/tags/正则表达式/" style="font-size: 12.92px;">正则表达式</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">失落的乐章</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://github.com/hcldirgit/image/blob/master/0.png?raw=true" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">失落的乐章</h1>
			</hgroup>
			
			<p class="header-subtitle">技术面前，永远都是学生。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-2. Linux 命令/7. Linux 命令- touch" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/7. Linux 命令- touch/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.286Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/7. Linux 命令- touch/">
        Linux 命令- touch
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;linux的touch命令不常用，一般在使用make的时候可能会用到，用来修改文件时间戳，或者新建一个不存在的文件。</p>
<h2 id="1．命令格式："><a href="#1．命令格式：" class="headerlink" title="1．命令格式："></a>1．命令格式：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">touch [选项] [文件]</div></pre></td></tr></table></figure>
<h2 id="2．命令参数："><a href="#2．命令参数：" class="headerlink" title="2．命令参数："></a>2．命令参数：</h2><ul>
<li>-a 或–time=atime或–time=access或–time=use 　只更改存取时间。</li>
<li>-c 或–no-create 　不建立任何文档。</li>
<li>-d 使用指定的日期时间，而非现在的时间。</li>
<li>-f 此参数将忽略不予处理，仅负责解决BSD版本touch指令的兼容性问题。</li>
<li>-m&amp; 或–time=mtime或–time=modify 　只更改变动时间。</li>
<li>-r 把指定文档或目录的日期时间，统统设成和参考文档或目录的日期时间相同。</li>
<li>-t 使用指定的日期时间，而非现在的时间。    </li>
</ul>
<h2 id="3．命令功能："><a href="#3．命令功能：" class="headerlink" title="3．命令功能："></a>3．命令功能：</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;touch命令参数可更改文档或目录的日期时间，包括存取时间和更改时间。</p>
<h2 id="4．使用范例："><a href="#4．使用范例：" class="headerlink" title="4．使用范例："></a>4．使用范例：</h2><h3 id="实例1：创建不存在的文件"><a href="#实例1：创建不存在的文件" class="headerlink" title="实例1：创建不存在的文件"></a>实例1：创建不存在的文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">touch log2012.log log2013.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># touch log2012.log log2013.log</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root    0 10-28 16:01 log2012.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 16:01 log2013.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果log2014.log不存在，则不创建文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># touch -c log2014.log</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root    0 10-28 16:01 log2012.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 16:01 log2013.log</div></pre></td></tr></table></figure>
<h3 id="实例2：更新log-log的时间和log2012-log时间戳相同"><a href="#实例2：更新log-log的时间和log2012-log时间戳相同" class="headerlink" title="实例2：更新log.log的时间和log2012.log时间戳相同"></a>实例2：更新log.log的时间和log2012.log时间戳相同</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">touch -r log.log log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root    0 10-28 16:01 log2012.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 16:01 log2013.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:48 log.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># touch -r log.log log2012.log </span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:48 log2012.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 16:01 log2013.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:48 log.log</div></pre></td></tr></table></figure>
<h3 id="实例3：设定文件的时间戳"><a href="#实例3：设定文件的时间戳" class="headerlink" title="实例3：设定文件的时间戳"></a>实例3：设定文件的时间戳</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">touch -t 201211142234.50 log.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:48 log2012.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 16:01 log2013.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:48 log.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># touch -t 201211142234.50 log.log</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:48 log2012.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 16:01 log2013.log</div><div class="line">-rw-r--r-- 1 root root    0 2012-11-14 log.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-t  time 使用指定的时间值 time 作为指定文件相应时间戳记的新值．此处的 time规定为如下形式的十进制数:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[CC]YY]MMDDhhmm[.SS]</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这里，CC为年数中的前两位，即”世纪数”；YY为年数的后两位，即某世纪中的年数．如果不给出CC的值，则touch   将把年数CCYY限定在1969–2068之内．MM为月数，DD为天将把年数CCYY限定在1969–2068之内．MM为月数，DD为天数，hh 为小时数(几点)，mm为分钟数，SS为秒数．此处秒的设定范围是0–61，这样可以处理闰秒．这些数字组成的时间是环境变量TZ指定的时区中的一个时 间．由于系统的限制，早于1970年1月1日的时间是错误的。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/3. Linux 命令-mkdir" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/3. Linux 命令-mkdir/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.285Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/3. Linux 命令-mkdir/">
        Linux 命令- mkdir
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;linux mkdir 命令用来创建指定的名称的目录，要求创建目录的用户在当前目录中具有写权限，并且指定的目录名不能是当前目录中已有的目录。      </p>
<h2 id="1．命令格式："><a href="#1．命令格式：" class="headerlink" title="1．命令格式："></a>1．命令格式：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir [选项] [目录]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能："><a href="#2．命令功能：" class="headerlink" title="2．命令功能："></a>2．命令功能：</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;通过 mkdir 命令可以实现在指定位置创建以 DirName(指定的文件名)命名的文件夹或目录。要创建文件夹或目录的用户必须对所创建的文件夹的父文件夹具有写权限。并且，所创建的文件夹(目录)不能与其父目录(即父文件夹)中的文件名重名，即同一个目录下不能有同名的(区分大小写)。 </p>
<h2 id="3．命令参数："><a href="#3．命令参数：" class="headerlink" title="3．命令参数："></a>3．命令参数：</h2><ul>
<li>-m, –mode=模式，设定权限&lt;模式&gt; (类似 chmod)，而不是 rwxrwxrwx 减 umask  </li>
<li>-p, –parents  可以是一个路径名称。此时若路径中的某些目录尚不存在,加上此选项后,系统将自动建立好那些尚不存在的目录,即一次可以建立多个目录;   </li>
<li>-v, –verbose  每次创建新目录都显示信息     <ul>
<li>–help   显示此帮助信息并退出        </li>
<li>–version  输出版本信息并退出    </li>
</ul>
</li>
</ul>
<h2 id="4．命令实例："><a href="#4．命令实例：" class="headerlink" title="4．命令实例："></a>4．命令实例：</h2><h3 id="实例1：创建一个空目录"><a href="#实例1：创建一个空目录" class="headerlink" title="实例1：创建一个空目录"></a>实例1：创建一个空目录</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir test1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost soft]<span class="comment"># cd test</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># mkdir test1</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 4drwxr-xr-x 2 root root 4096 10-25 17:42 test1</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例2：递归创建多个目录"><a href="#实例2：递归创建多个目录" class="headerlink" title="实例2：递归创建多个目录"></a>实例2：递归创建多个目录</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir -p test2/test22</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># mkdir -p test2/test22</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 8drwxr-xr-x 2 root root 4096 10-25 17:42 test1</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:44 test2</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test2/</span></div><div class="line">[root@localhost test2]<span class="comment"># ll</span></div><div class="line">总计 4drwxr-xr-x 2 root root 4096 10-25 17:44 test22</div><div class="line">[root@localhost test2]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例3：创建权限为777的目录"><a href="#实例3：创建权限为777的目录" class="headerlink" title="实例3：创建权限为777的目录"></a>实例3：创建权限为777的目录</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir -m 777 test3</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># mkdir -m 777 test3</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 12drwxr-xr-x 2 root root 4096 10-25 17:42 test1</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:44 test2</div><div class="line">drwxrwxrwx 2 root root 4096 10-25 17:46 test3</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;test3 的权限为rwxrwxrwx</p>
<h3 id="实例4：创建新目录都显示信息"><a href="#实例4：创建新目录都显示信息" class="headerlink" title="实例4：创建新目录都显示信息"></a>实例4：创建新目录都显示信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir -v test4</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># mkdir -v test4</span></div><div class="line">mkdir: 已创建目录 “test4”</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># mkdir -vp test5/test5-1</span></div><div class="line">mkdir: 已创建目录 “test5”</div><div class="line">mkdir: 已创建目录 “test5/test5-1”</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例5：一个命令创建项目的目录结构"><a href="#实例5：一个命令创建项目的目录结构" class="headerlink" title="实例5：一个命令创建项目的目录结构"></a>实例5：一个命令创建项目的目录结构</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;参考：<a href="http://www.ibm.com/developerworks/cn/aix/library/au-badunixhabits.html" target="_blank" rel="external">UNIX 高手的 10 个习惯</a> </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir -vp scf/&#123;lib/,bin/,doc/&#123;info,product&#125;,logs/&#123;info,product&#125;,service/deploy/&#123;info,product&#125;&#125;</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># mkdir -vp scf/&#123;lib/,bin/,doc/&#123;info,product&#125;,logs/&#123;info,product&#125;,service/deploy/&#123;info,product&#125;&#125;</span></div><div class="line">mkdir: 已创建目录 “scf”</div><div class="line">mkdir: 已创建目录 “scf/lib”</div><div class="line">mkdir: 已创建目录 “scf/bin”</div><div class="line">mkdir: 已创建目录 “scf/doc”</div><div class="line">mkdir: 已创建目录 “scf/doc/info”</div><div class="line">mkdir: 已创建目录 “scf/doc/product”</div><div class="line">mkdir: 已创建目录 “scf/logs”</div><div class="line">mkdir: 已创建目录 “scf/logs/info”</div><div class="line">mkdir: 已创建目录 “scf/logs/product”</div><div class="line">mkdir: 已创建目录 “scf/service”</div><div class="line">mkdir: 已创建目录 “scf/service/deploy”</div><div class="line">mkdir: 已创建目录 “scf/service/deploy/info”</div><div class="line">mkdir: 已创建目录 “scf/service/deploy/product”</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tree scf/</span></div><div class="line">scf/</div><div class="line">|-- bin</div><div class="line">|-- doc</div><div class="line">|   |-- info</div><div class="line">|   `-- product</div><div class="line">|-- lib</div><div class="line">|-- logs</div><div class="line">|   |-- info</div><div class="line">|   `-- product</div><div class="line">`-- service</div><div class="line">   	 	`-- deploy</div><div class="line">  	    	|-- info</div><div class="line">        	`-- product</div><div class="line">12 directories, 0 files</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/77. Linux 命令- w" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/77. Linux 命令- w/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.284Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/77. Linux 命令- w/">
        Linux 命令- w
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;w命令用于显示已经登陆系统的用户列表，并显示用户正在执行的指令。执行这个命令可得知目前登入系统的用户有那些人，以及他们正在执行的程序。单独执行w命令会显示所有的用户，您也可指定用户名称，仅显示某位用户的相关信息。</p>
<h2 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">w [参数] [用户名称]</div></pre></td></tr></table></figure>
<h2 id="命令选项"><a href="#命令选项" class="headerlink" title="命令选项"></a>命令选项</h2><ul>
<li>-f 　开启或关闭显示用户从何处登入系统。 </li>
<li>-h 　不显示各栏位的标题信息列。 </li>
<li>-l 　使用详细格式列表，此为预设值。 </li>
<li>-s 　使用简洁格式列表，不显示用户登入时间，终端机阶段作业和程序所耗费的CPU时间。 </li>
<li>-u 　忽略执行程序的名称，以及该程序耗费CPU时间的信息。 </li>
<li>-V 　显示版本信息。 </li>
</ul>
<h2 id="命令功能"><a href="#命令功能" class="headerlink" title="命令功能"></a>命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;显示目前登入系统的用户信息。 </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;执行这项指令可得知目前登入系统的用户有那些人，以及他们正在执行的程序。单独执行w<br>指令会显示所有的用户，您也可指定用户名称，仅显示某位用户的相关信息。 </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;w命令也用于显示登录到系统的用户情况，但是与who不同的是，w命令功能更加强大，它不但可以显示有谁登录到系统，还可以显示出这些用户当前正在进行的工作，感觉比较实用，具体用法如下： </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;w命令的显示项目按以下顺序排列：当前时间，系统启动到现在的时间，登录用户的数目，系统在最 近1秒、5秒和15秒的平均负载。然后是每个用户的各项数据，项目显示顺序如下：登录帐号、终端名称、远 程主机名、登录时间、空闲时间、JCPU、PCPU、当前正在运行进程的命令行。 </p>
<h2 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># w </span></div><div class="line">20:39:37 up 136 days, 3:58, 1 user, load average: 0.00, 0.00, 0.00 </div><div class="line">USER   TTY     FROM             login@   IDLE    JCPU    PCPU   WHAT </div><div class="line">root   pts/0   222.94.97.122   20:39    1.00s   0.00s   0.00s   w</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;linux管理员最常用的命令就是这个 <code>w</code> 了，该命令显示的信息还是蛮丰富的。第一行从左面开始显示的信息依次为：时间，系统运行时间，登录用户数，平均负载。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;第二行开始以及下面所有的行，告诉我们的信息是，当前登录的都有哪些用户，以及他们是从哪里登录的等等。</p>
<ul>
<li>USER：登录用户名</li>
<li>TTY：登录后系统分配的终端号</li>
<li>FROM：远程主机名，即从哪里登录的</li>
<li>LOGIN@：何时登录</li>
<li>IDLE：用户空间时间，这是个计时器，一旦用户执行任何操作，该计时器便会被重置</li>
<li>JCPU：和该终端连接的所有进程占用时间。包括当前正在运行的后台作业占用时间</li>
<li>PCPU：当前进程所占用的时间</li>
<li>WHAT：当前正在运行进程的命令行</li>
</ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在这些信息中，我们最应该关注的应该是第一行中的 ‘load average:’ 后面的三个数值。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;第一个数值表示1分钟内系统的平均负载值；第二个数值表示5分钟内系统的平均负载值；第三个数值表示15分钟系统的平均负载值。这个值的意义是，单位时间段内CPU活动进程数。当然这个值越大就说明服务器压力越大。一般情况下这个值只要不超过服务器的cpu数量就没有关系，如果服务器cpu数量为8，那么这个值若小于8，就说明当前服务器没有压力，否则就要关注一下了。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;怎么查看服务器有几个cpu</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grep -c <span class="string">'processor'</span> /proc/cpuinfo</div></pre></td></tr></table></figure>
<p><img src="https://github.com/hcldirgit/image/blob/master/linux%E5%91%BD%E4%BB%A4-w/01.png?raw=true" alt=""></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;‘/proc/cpuinfo’ 这个文件记录了cpu的详细信息。目前市面上的服务器通常都是2颗4核cpu，在linux看来，它就是8个cpu。查看这个文件时则会显示8段类似的信息，而最后一段信息中processor : 后面跟的是 ‘7’ 所以查看当前系统有几个cpu，我们可以使用这个命令： grep -c ‘processor’ /proc/cpuinfo 而如何看几颗物理cpu呢，需要查看关键字 “physical id”</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;另外，uptime命令同样可以查看系统负载。实际上uptime得出的结果和w的第一行是一致的。</p>
<h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><p>1) 区别于<code>who</code>命令，<code>w</code>命令不仅可以看到登录服务器的用户信息，而且可以看到这些用户做了什么<br>2) <code>who am i</code>命令，显示出自己在系统中的用户名，登录终端，登录时间<br>3) <code>whoami</code>命令，显示自己在系统中的用户名<br>4) <code>logname</code>命令，可以显示自己初次登录到系统中的用户名，主要识别sudo前后情形<br>5) <code>last</code>命令，查看最近1个月用户登录服务器的情况<br>6) <code>tty</code>命令，来查看所连接的设备或终端</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/58. Linux 命令- netstat" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/58. Linux 命令- netstat/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.284Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/58. Linux 命令- netstat/">
        Linux 命令- netstat
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;netstat命令用于显示与IP、TCP、UDP和ICMP协议相关的统计数据，一般用于检验本机各端口的网络连接情况。netstat是在内核中访问网络及相关信息的程序，它能提供TCP连接，TCP和UDP监听，进程内存管理的相关报告。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果你的计算机有时候接收到的数据报导致出错数据或故障，你不必感到奇怪，TCP/IP可以容许这些类型的错误，并能够自动重发数据报。但如果累计的出错情况数目占到所接收的IP数据报相当大的百分比，或者它的数目正迅速增加，那么你就应该使用netstat查一查为什么会出现这些情况了。</p>
<h2 id="1．命令格式"><a href="#1．命令格式" class="headerlink" title="1．命令格式"></a>1．命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat [-acCeFghilMnNoprstuvVwx] [-A&lt;网络类型&gt;] [--ip]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能"><a href="#2．命令功能" class="headerlink" title="2．命令功能"></a>2．命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;netstat用于显示与IP、TCP、UDP和ICMP协议相关的统计数据，一般用于检验本机各端口的网络连接情况。</p>
<h2 id="3．命令参数"><a href="#3．命令参数" class="headerlink" title="3．命令参数"></a>3．命令参数</h2><ul>
<li>-a或–all 显示所有连线中的Socket。</li>
<li>-A&lt;网络类型&gt;或–&lt;网络类型&gt; 列出该网络类型连线中的相关地址。</li>
<li>-c或–continuous 持续列出网络状态。</li>
<li>-C或–cache 显示路由器配置的快取信息。</li>
<li>-e或–extend 显示网络其他相关信息。</li>
<li>-F或–fib 显示FIB。</li>
<li>-g或–groups 显示多重广播功能群组组员名单。</li>
<li>-h或–help 在线帮助。</li>
<li>-i或–interfaces 显示网络界面信息表单。</li>
<li>-l或–listening 显示监控中的服务器的Socket。</li>
<li>-M或–masquerade 显示伪装的网络连线。</li>
<li>-n或–numeric 直接使用IP地址，而不通过域名服务器。</li>
<li>-N或–netlink或–symbolic 显示网络硬件外围设备的符号连接名称。</li>
<li>-o或–timers 显示计时器。</li>
<li>-p或–programs 显示正在使用Socket的程序识别码和程序名称。</li>
<li>-r或–route 显示Routing Table。</li>
<li>-s或–statistice 显示网络工作信息统计表。</li>
<li>-t或–tcp 显示TCP传输协议的连线状况。</li>
<li>-u或–udp 显示UDP传输协议的连线状况。</li>
<li>-v或–verbose 显示指令执行过程。</li>
<li>-V或–version 显示版本信息。</li>
<li>-w或–raw 显示RAW传输协议的连线状况。</li>
<li>-x或–unix 此参数的效果和指定”-A unix”参数相同。</li>
<li>–ip或–inet 此参数的效果和指定”-A inet”参数相同。</li>
</ul>
<h2 id="4．使用实例"><a href="#4．使用实例" class="headerlink" title="4．使用实例"></a>4．使用实例</h2><h3 id="实例1：无参数使用"><a href="#实例1：无参数使用" class="headerlink" title="实例1：无参数使用"></a>实例1：无参数使用</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># netstat</span></div><div class="line">Active Internet connections (w/o servers)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State      </div><div class="line">tcp        0    268 192.168.120.204:ssh         10.2.0.68:62420             ESTABLISHED </div><div class="line">udp        0      0 192.168.120.204:4371        10.58.119.119:domain        ESTABLISHED </div><div class="line">Active UNIX domain sockets (w/o servers)</div><div class="line">Proto RefCnt Flags       Type       State         I-Node Path</div><div class="line">unix  2      [ ]         DGRAM                    1491   @/org/kernel/udev/udevd</div><div class="line">unix  4      [ ]         DGRAM                    7337   /dev/<span class="built_in">log</span></div><div class="line">unix  2      [ ]         DGRAM                    708823 </div><div class="line">unix  2      [ ]         DGRAM                    7539   </div><div class="line">unix  3      [ ]         STREAM     CONNECTED     7287   </div><div class="line">unix  3      [ ]         STREAM     CONNECTED     7286   </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;从整体上看，netstat的输出结果可以分为两个部分：</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;一个是Active Internet connections，称为有源TCP连接，其中”Recv-Q”和”Send-Q”指的是接收队列和发送队列。这些数字一般都应该是0。如果不是则表示软件包正在队列中堆积。这种情况只能在非常少的情况见到。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;另一个是Active UNIX domain sockets，称为有源Unix域套接口(和网络套接字一样，但是只能用于本机通信，性能可以提高一倍)。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Proto显示连接使用的协议,RefCnt表示连接到本套接口上的进程号,Types显示套接口的类型,State显示套接口当前的状态,Path表示连接到套接口的其它进程使用的路径名。</p>
<h4 id="套接口类型："><a href="#套接口类型：" class="headerlink" title="套接口类型："></a>套接口类型：</h4><ul>
<li>-t ：TCP</li>
<li>-u ：UDP</li>
<li>-raw ：RAW类型</li>
<li>–unix ：UNIX域类型</li>
<li>–ax25 ：AX25类型</li>
<li>–ipx ：ipx类型</li>
<li>–netrom ：netrom类型</li>
</ul>
<h4 id="状态说明："><a href="#状态说明：" class="headerlink" title="状态说明："></a>状态说明：</h4><ul>
<li>LISTEN：侦听来自远方的TCP端口的连接请求</li>
<li>SYN-SENT：再发送连接请求后等待匹配的连接请求（如果有大量这样的状态包，检查是否中招了）</li>
<li>SYN-RECEIVED：再收到和发送一个连接请求后等待对方对连接请求的确认（如有大量此状态，估计被flood攻击了）</li>
<li>ESTABLISHED：代表一个打开的连接</li>
<li>FIN-WAIT-1：等待远程TCP连接中断请求，或先前的连接中断请求的确认</li>
<li>FIN-WAIT-2：从远程TCP等待连接中断请求</li>
<li>CLOSE-WAIT：等待从本地用户发来的连接中断请求</li>
<li>CLOSING：等待远程TCP对连接中断的确认</li>
<li>LAST-ACK：等待原来的发向远程TCP的连接中断请求的确认（不是什么好东西，此项出现，检查是否被攻击）</li>
<li>TIME-WAIT：等待足够的时间以确保远程TCP接收到连接中断请求的确认<br>CLOSED：没有任何连接状态</li>
</ul>
<h3 id="实例2：列出所有端口"><a href="#实例2：列出所有端口" class="headerlink" title="实例2：列出所有端口"></a>实例2：列出所有端口</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -a</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># netstat -a</span></div><div class="line">Active Internet connections (servers and established)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State      </div><div class="line">tcp        0      0 localhost:smux              *:*                         LISTEN      </div><div class="line">tcp        0      0 *:svn                       *:*                         LISTEN      </div><div class="line">tcp        0      0 *:ssh                       *:*                         LISTEN      </div><div class="line">tcp        0    284 192.168.120.204:ssh         10.2.0.68:62420             ESTABLISHED </div><div class="line">udp        0      0 localhost:syslog            *:*                                     </div><div class="line">udp        0      0 *:snmp                      *:*                                     </div><div class="line">Active UNIX domain sockets (servers and established)</div><div class="line">Proto RefCnt Flags       Type       State         I-Node Path</div><div class="line">unix  2      [ ACC ]     STREAM     LISTENING     708833 /tmp/ssh-yKnDB15725/agent.15725</div><div class="line">unix  2      [ ACC ]     STREAM     LISTENING     7296   /var/run/audispd_events</div><div class="line">unix  2      [ ]         DGRAM                    1491   @/org/kernel/udev/udevd</div><div class="line">unix  4      [ ]         DGRAM                    7337   /dev/<span class="built_in">log</span></div><div class="line">unix  2      [ ]         DGRAM                    708823 </div><div class="line">unix  2      [ ]         DGRAM                    7539   </div><div class="line">unix  3      [ ]         STREAM     CONNECTED     7287   </div><div class="line">unix  3      [ ]         STREAM     CONNECTED     7286   </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;显示一个所有的有效连接信息列表，包括已建立的连接（ESTABLISHED），也包括监听连接请（LISTENING）的那些连接。</p>
<h3 id="实例3：显示当前UDP连接状况"><a href="#实例3：显示当前UDP连接状况" class="headerlink" title="实例3：显示当前UDP连接状况"></a>实例3：显示当前UDP连接状况</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -nu</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@andy ~]<span class="comment"># netstat -nu</span></div><div class="line">Active Internet connections (w/o servers)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State      </div><div class="line">udp        0      0 ::ffff:192.168.12:53392     ::ffff:192.168.9.120:10000  ESTABLISHED </div><div class="line">udp        0      0 ::ffff:192.168.12:56723     ::ffff:192.168.9.120:10000  ESTABLISHED </div><div class="line">udp        0      0 ::ffff:192.168.12:56480     ::ffff:192.168.9.120:10000  ESTABLISHED </div><div class="line">udp        0      0 ::ffff:192.168.12:58154     ::ffff:192.168.9.120:10000  ESTABLISHED </div><div class="line">udp        0      0 ::ffff:192.168.12:44227     ::ffff:192.168.9.120:10000  ESTABLISHED </div><div class="line">udp        0      0 ::ffff:192.168.12:36954     ::ffff:192.168.9.120:10000  ESTABLISHED </div><div class="line">udp        0      0 ::ffff:192.168.12:53984     ::ffff:192.168.9.120:10000  ESTABLISHED </div><div class="line">udp        0      0 ::ffff:192.168.12:57703     ::ffff:192.168.9.120:10000  ESTABLISHED </div><div class="line">udp        0      0 ::ffff:192.168.12:53613     ::ffff:192.168.9.120:10000  ESTABLISHED </div><div class="line">[root@andy ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例4：显示UDP端口号的使用情况"><a href="#实例4：显示UDP端口号的使用情况" class="headerlink" title="实例4：显示UDP端口号的使用情况"></a>实例4：显示UDP端口号的使用情况</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -apu</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">[root@andy ~]<span class="comment"># netstat -apu</span></div><div class="line">Active Internet connections (servers and established)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name   </div><div class="line">udp        0      0 *:57604                     *:*                                     28094/java          </div><div class="line">udp        0      0 *:40583                     *:*                                     21220/java          </div><div class="line">udp        0      0 *:45451                     *:*                                     14583/java          </div><div class="line">udp        0      0 ::ffff:192.168.12:53392     ::ffff:192.168.9.120:ndmp   ESTABLISHED 19327/java          </div><div class="line">udp        0      0 *:52370                     *:*                                     15841/java          </div><div class="line">udp        0      0 ::ffff:192.168.12:56723     ::ffff:192.168.9.120:ndmp   ESTABLISHED 15841/java          </div><div class="line">udp        0      0 *:44182                     *:*                                     31757/java          </div><div class="line">udp        0      0 *:48155                     *:*                                     5476/java           </div><div class="line">udp        0      0 *:59808                     *:*                                     17333/java          </div><div class="line">udp        0      0 ::ffff:192.168.12:56480     ::ffff:192.168.9.120:ndmp   ESTABLISHED 28094/java          </div><div class="line">udp        0      0 ::ffff:192.168.12:58154     ::ffff:192.168.9.120:ndmp   ESTABLISHED 15429/java          </div><div class="line">udp        0      0 *:36780                     *:*                                     10091/java          </div><div class="line">udp        0      0 *:36795                     *:*                                     24594/java          </div><div class="line">udp        0      0 *:41922                     *:*                                     20506/java          </div><div class="line">udp        0      0 ::ffff:192.168.12:44227     ::ffff:192.168.9.120:ndmp   ESTABLISHED 17333/java          </div><div class="line">udp        0      0 *:34258                     *:*                                     8866/java           </div><div class="line">udp        0      0 *:55508                     *:*                                     11667/java          </div><div class="line">udp        0      0 *:36055                     *:*                                     12425/java          </div><div class="line">udp        0      0 ::ffff:192.168.12:36954     ::ffff:192.168.9.120:ndmp   ESTABLISHED 16532/java          </div><div class="line">udp        0      0 ::ffff:192.168.12:53984     ::ffff:192.168.9.120:ndmp   ESTABLISHED 20506/java          </div><div class="line">udp        0      0 ::ffff:192.168.12:57703     ::ffff:192.168.9.120:ndmp   ESTABLISHED 31757/java          </div><div class="line">udp        0      0 ::ffff:192.168.12:53613     ::ffff:192.168.9.120:ndmp   ESTABLISHED 3199/java           </div><div class="line">udp        0      0 *:56309                     *:*                                     15429/java          </div><div class="line">udp        0      0 *:54007                     *:*                                     16532/java          </div><div class="line">udp        0      0 *:39544                     *:*                                     3199/java           </div><div class="line">udp        0      0 *:43900                     *:*                                     19327/java          </div><div class="line">[root@andy ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例5：显示网卡列表"><a href="#实例5：显示网卡列表" class="headerlink" title="实例5：显示网卡列表"></a>实例5：显示网卡列表</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -i</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@andy ~]<span class="comment"># netstat -i</span></div><div class="line">Kernel Interface table</div><div class="line">Iface       MTU Met    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg</div><div class="line">eth0       1500   0 151818887      0      0      0 198928403      0      0      0 BMRU</div><div class="line">lo        16436   0   107235      0      0      0   107235      0      0      0 LRU</div><div class="line">[root@andy ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例6：显示组播组的关系"><a href="#实例6：显示组播组的关系" class="headerlink" title="实例6：显示组播组的关系"></a>实例6：显示组播组的关系</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -g</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@andy ~]# netstat -g</div><div class="line">IPv6/IPv4 Group Memberships</div><div class="line">Interface       RefCnt Group</div><div class="line">--------------- ------ ---------------------</div><div class="line">lo              1      all-systems.mcast.net</div><div class="line">eth0            1      all-systems.mcast.net</div><div class="line">lo              1      ff02::1</div><div class="line">eth0            1      ff02::1:ffff:9b0c</div><div class="line">eth0            1      ff02::1</div><div class="line">[root@andy ~]#</div></pre></td></tr></table></figure>
<h3 id="实例7：显示网络统计信息"><a href="#实例7：显示网络统计信息" class="headerlink" title="实例7：显示网络统计信息"></a>实例7：显示网络统计信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -s</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># netstat -s</span></div><div class="line">Ip:</div><div class="line">    530999 total packets received</div><div class="line">    0 forwarded</div><div class="line">    0 incoming packets discarded</div><div class="line">    530999 incoming packets delivered</div><div class="line">    8258 requests sent out</div><div class="line">    1 dropped because of missing route</div><div class="line">Icmp:</div><div class="line">    90 ICMP messages received</div><div class="line">    0 input ICMP message failed.</div><div class="line">    ICMP input histogram:</div><div class="line">        destination unreachable: 17</div><div class="line">        <span class="built_in">echo</span> requests: 1</div><div class="line">        <span class="built_in">echo</span> replies: 72</div><div class="line">    106 ICMP messages sent</div><div class="line">    0 ICMP messages failed</div><div class="line">    ICMP output histogram:</div><div class="line">        destination unreachable: 8</div><div class="line">        <span class="built_in">echo</span> request: 97</div><div class="line">        <span class="built_in">echo</span> replies: 1</div><div class="line">IcmpMsg:</div><div class="line">        InType0: 72</div><div class="line">        InType3: 17</div><div class="line">        InType8: 1</div><div class="line">        OutType0: 1</div><div class="line">        OutType3: 8</div><div class="line">        OutType8: 97</div><div class="line">Tcp:</div><div class="line">    8 active connections openings</div><div class="line">    15 passive connection openings</div><div class="line">    8 failed connection attempts</div><div class="line">    3 connection resets received</div><div class="line">    1 connections established</div><div class="line">    3132 segments received</div><div class="line">    2617 segments send out</div><div class="line">    53 segments retransmited</div><div class="line">    0 bad segments received.</div><div class="line">    252 resets sent</div><div class="line">Udp:</div><div class="line">    0 packets received</div><div class="line">    0 packets to unknown port received.</div><div class="line">    0 packet receive errors</div><div class="line">    5482 packets sent</div><div class="line">TcpExt:</div><div class="line">    1 invalid SYN cookies received</div><div class="line">    1 TCP sockets finished time <span class="built_in">wait</span> <span class="keyword">in</span> fast timer</div><div class="line">    57 delayed acks sent</div><div class="line">    Quick ack mode was activated 50 <span class="built_in">times</span></div><div class="line">    60 packets directly queued to recvmsg prequeue.</div><div class="line">    68 packets directly received from backlog</div><div class="line">    4399 packets directly received from prequeue</div><div class="line">    520 packets header predicted</div><div class="line">    51 packets header predicted and directly queued to user</div><div class="line">    1194 acknowledgments not containing data received</div><div class="line">    21 predicted acknowledgments</div><div class="line">    0 TCP data loss events</div><div class="line">    1 timeouts after reno fast retransmit</div><div class="line">    9 retransmits <span class="keyword">in</span> slow start</div><div class="line">    42 other TCP timeouts</div><div class="line">    3 connections aborted due to timeout</div><div class="line">IpExt:</div><div class="line">    InBcastPkts: 527777</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;按照各个协议分别显示其统计数据。如果我们的应用程序（如Web浏览器）运行速度比较慢，或者不能显示Web页之类的数据，那么我们就可以用本选项来查看一下所显示的信息。我们需要仔细查看统计数据的各行，找到出错的关键字，进而确定问题所在。</p>
<h3 id="实例8：显示监听的套接口"><a href="#实例8：显示监听的套接口" class="headerlink" title="实例8：显示监听的套接口"></a>实例8：显示监听的套接口</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -l</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># netstat -l</span></div><div class="line">Active Internet connections (only servers)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State      </div><div class="line">tcp        0      0 localhost:smux              *:*                         LISTEN      </div><div class="line">tcp        0      0 *:svn                       *:*                         LISTEN      </div><div class="line">tcp        0      0 *:ssh                       *:*                         LISTEN      </div><div class="line">udp        0      0 localhost:syslog            *:*                                     </div><div class="line">udp        0      0 *:snmp                      *:*                                     </div><div class="line">Active UNIX domain sockets (only servers)</div><div class="line">Proto RefCnt Flags       Type       State         I-Node Path</div><div class="line">unix  2      [ ACC ]     STREAM     LISTENING     708833 /tmp/ssh-yKnDB15725/agent.15725</div><div class="line">unix  2      [ ACC ]     STREAM     LISTENING     7296   /var/run/audispd_events</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例9：显示所有已建立的有效连接"><a href="#实例9：显示所有已建立的有效连接" class="headerlink" title="实例9：显示所有已建立的有效连接"></a>实例9：显示所有已建立的有效连接</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -n</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># netstat -n</span></div><div class="line">Active Internet connections (w/o servers)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State      </div><div class="line">tcp        0    268 192.168.120.204:22          10.2.0.68:62420             ESTABLISHED </div><div class="line">Active UNIX domain sockets (w/o servers)</div><div class="line">Proto RefCnt Flags       Type       State         I-Node Path</div><div class="line">unix  2      [ ]         DGRAM                    1491   @/org/kernel/udev/udevd</div><div class="line">unix  4      [ ]         DGRAM                    7337   /dev/<span class="built_in">log</span></div><div class="line">unix  2      [ ]         DGRAM                    708823 </div><div class="line">unix  2      [ ]         DGRAM                    7539   </div><div class="line">unix  3      [ ]         STREAM     CONNECTED     7287   </div><div class="line">unix  3      [ ]         STREAM     CONNECTED     7286   </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例10：显示关于以太网的统计数据"><a href="#实例10：显示关于以太网的统计数据" class="headerlink" title="实例10：显示关于以太网的统计数据"></a>实例10：显示关于以太网的统计数据</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -e</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># netstat -e</span></div><div class="line">Active Internet connections (w/o servers)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State       User       Inode     </div><div class="line">tcp        0    248 192.168.120.204:ssh         10.2.0.68:62420             ESTABLISHED root       708795     </div><div class="line">Active UNIX domain sockets (w/o servers)</div><div class="line">Proto RefCnt Flags       Type       State         I-Node Path</div><div class="line">unix  2      [ ]         DGRAM                    1491   @/org/kernel/udev/udevd</div><div class="line">unix  4      [ ]         DGRAM                    7337   /dev/<span class="built_in">log</span></div><div class="line">unix  2      [ ]         DGRAM                    708823 </div><div class="line">unix  2      [ ]         DGRAM                    7539   </div><div class="line">unix  3      [ ]         STREAM     CONNECTED     7287   </div><div class="line">unix  3      [ ]         STREAM     CONNECTED     7286   </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用于显示关于以太网的统计数据。它列出的项目包括传送的数据报的总字节数、错误数、删除数、数据报的数量和广播的数量。这些统计数据既有发送的数据报数量，也有接收的数据报数量。这个选项可以用来统计一些基本的网络流量）</p>
<h3 id="实例11：显示关于路由表的信息"><a href="#实例11：显示关于路由表的信息" class="headerlink" title="实例11：显示关于路由表的信息"></a>实例11：显示关于路由表的信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -r</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># netstat -r</span></div><div class="line">Kernel IP routing table</div><div class="line">Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface</div><div class="line">192.168.120.0   *               255.255.255.0   U         0 0          0 eth0</div><div class="line">192.168.0.0     192.168.120.1   255.255.0.0     UG        0 0          0 eth0</div><div class="line">10.0.0.0        192.168.120.1   255.0.0.0       UG        0 0          0 eth0</div><div class="line">default         192.168.120.240 0.0.0.0         UG        0 0          0 eth0</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例12：列出所有-tcp-端口"><a href="#实例12：列出所有-tcp-端口" class="headerlink" title="实例12：列出所有 tcp 端口"></a>实例12：列出所有 tcp 端口</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -at</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># netstat -at</span></div><div class="line">Active Internet connections (servers and established)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State      </div><div class="line">tcp        0      0 localhost:smux              *:*                         LISTEN      </div><div class="line">tcp        0      0 *:svn                       *:*                         LISTEN      </div><div class="line">tcp        0      0 *:ssh                       *:*                         LISTEN      </div><div class="line">tcp        0    284 192.168.120.204:ssh         10.2.0.68:62420             ESTABLISHED </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例13：统计机器中网络连接各个状态个数"><a href="#实例13：统计机器中网络连接各个状态个数" class="headerlink" title="实例13：统计机器中网络连接各个状态个数"></a>实例13：统计机器中网络连接各个状态个数</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -a | awk <span class="string">'/^tcp/ &#123;++S[$NF]&#125; END &#123;for(a in S) print a, S[a]&#125;'</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># netstat -a | awk '/^tcp/ &#123;++S[$NF]&#125; END &#123;for(a in S) print a, S[a]&#125;'</span></div><div class="line">ESTABLISHED 1</div><div class="line">LISTEN 3</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例14：把状态全都取出来后使用uniq-c统计后再进行排序"><a href="#实例14：把状态全都取出来后使用uniq-c统计后再进行排序" class="headerlink" title="实例14：把状态全都取出来后使用uniq -c统计后再进行排序"></a>实例14：把状态全都取出来后使用uniq -c统计后再进行排序</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -nat |awk <span class="string">'&#123;print $6&#125;'</span>|sort|uniq -c</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[root@andy ~]<span class="comment"># netstat -nat |awk '&#123;print $6&#125;'|sort|uniq -c</span></div><div class="line">     14 CLOSE_WAIT</div><div class="line">      1 established)</div><div class="line">    578 ESTABLISHED</div><div class="line">      1 Foreign</div><div class="line">     43 LISTEN</div><div class="line">      5 TIME_WAIT</div><div class="line">[root@andy ~]<span class="comment"># netstat -nat |awk '&#123;print $6&#125;'|sort|uniq -c|sort -rn</span></div><div class="line">    576 ESTABLISHED</div><div class="line">     43 LISTEN</div><div class="line">     14 CLOSE_WAIT</div><div class="line">      5 TIME_WAIT</div><div class="line">      1 Foreign</div><div class="line">      1 established)</div><div class="line">[root@andy ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例15：查看连接某服务端口最多的的IP地址"><a href="#实例15：查看连接某服务端口最多的的IP地址" class="headerlink" title="实例15：查看连接某服务端口最多的的IP地址"></a>实例15：查看连接某服务端口最多的的IP地址</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -nat | grep <span class="string">"192.168.120.20:16067"</span> |awk <span class="string">'&#123;print $5&#125;'</span>|awk -F: <span class="string">'&#123;print $4&#125;'</span>|sort|uniq -c|sort -nr|head -20</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[root@andy ~]<span class="comment"># netstat -nat | grep "192.168.120.20:16067" |awk '&#123;print $5&#125;'|awk -F: '&#123;print $4&#125;'|sort|uniq -c|sort -nr|head -20</span></div><div class="line">      8 10.2.1.68</div><div class="line">      7 192.168.119.13</div><div class="line">      6 192.168.119.201</div><div class="line">      6 192.168.119.20</div><div class="line">      6 192.168.119.10</div><div class="line">      4 10.2.1.199</div><div class="line">      3 10.2.1.207</div><div class="line">      2 192.168.120.20</div><div class="line">      2 192.168.120.15</div><div class="line">      2 192.168.119.197</div><div class="line">      2 192.168.119.11</div><div class="line">      2 10.2.1.206</div><div class="line">      2 10.2.1.203</div><div class="line">      2 10.2.1.189</div><div class="line">      2 10.2.1.173</div><div class="line">      1 192.168.120.18</div><div class="line">      1 192.168.119.19</div><div class="line">      1 10.2.2.227</div><div class="line">      1 10.2.2.138</div><div class="line">      1 10.2.1.208</div><div class="line">[root@andy ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例16：找出程序运行的端口"><a href="#实例16：找出程序运行的端口" class="headerlink" title="实例16：找出程序运行的端口"></a>实例16：找出程序运行的端口</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -ap | grep ssh</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@andy ~]<span class="comment"># netstat -ap | grep ssh</span></div><div class="line">tcp        0      0 *:ssh                       *:*                         LISTEN      2570/sshd           </div><div class="line">tcp        0      0 ::ffff:192.168.120.206:ssh  ::ffff:10.2.1.205:54508     ESTABLISHED 13883/14            </div><div class="line">tcp        0      0 ::ffff:192.168.120.206:ssh  ::ffff:10.2.0.68:62886      ESTABLISHED 20900/6             </div><div class="line">tcp        0      0 ::ffff:192.168.120.206:ssh  ::ffff:10.2.2.131:52730     ESTABLISHED 20285/sshd: root@no </div><div class="line">unix  2      [ ACC ]     STREAM     LISTENING     194494461 20900/6             /tmp/ssh-cXIJj20900/agent.20900</div><div class="line">unix  3      [ ]         STREAM     CONNECTED     194307443 20285/sshd: root@no </div><div class="line">unix  3      [ ]         STREAM     CONNECTED     194307441 20285/sshd: root@no </div><div class="line">[root@andy ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例17：在-netstat-输出中显示-PID-和进程名称"><a href="#实例17：在-netstat-输出中显示-PID-和进程名称" class="headerlink" title="实例17：在 netstat 输出中显示 PID 和进程名称"></a>实例17：在 netstat 输出中显示 PID 和进程名称</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -pt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># netstat -pt</span></div><div class="line">Active Internet connections (w/o servers)</div><div class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name   </div><div class="line">tcp        0    248 192.168.120.204:ssh         10.2.0.68:62420             ESTABLISHED 15725/0             </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;netstat -p 可以与其它开关一起使用，就可以添加 “PID/进程名称” 到 netstat 输出中，这样 debugging 的时候可以很方便的发现特定端口运行的程序。</p>
<h3 id="实例18：找出运行在指定端口的进程"><a href="#实例18：找出运行在指定端口的进程" class="headerlink" title="实例18：找出运行在指定端口的进程"></a>实例18：找出运行在指定端口的进程</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -anpt | grep <span class="string">':16064'</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[root@andy ~]<span class="comment"># netstat -anpt | grep ':16064'</span></div><div class="line">tcp        0      0 :::16064                    :::*                        LISTEN      24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:192.168.119.201:6462 ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:192.168.119.20:26341 ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:192.168.119.20:32208 ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:192.168.119.20:32207 ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:10.2.1.68:51303      ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:10.2.1.68:51302      ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:10.2.1.68:50020      ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:10.2.1.68:50019      ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:10.2.1.68:56155      ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:10.2.1.68:50681      ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:10.2.1.68:50680      ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:10.2.1.68:52136      ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:10.2.1.68:56989      ESTABLISHED 24594/java          </div><div class="line">tcp        0      0 ::ffff:192.168.120.20:16064 ::ffff:10.2.1.68:56988      ESTABLISHED 24594/java          </div><div class="line">[root@andy ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;运行在端口16064的进程id为24596，再通过ps命令就可以找到具体的应用程序了。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/32. Linux 命令- gzip" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/32. Linux 命令- gzip/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.283Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/32. Linux 命令- gzip/">
        Linux 命令- gzip
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;减少文件大小有两个明显的好处，一是可以减少存储空间，二是通过网络传输文件时，可以减少传输的时间。gzip是在Linux系统中经常使用的一个对文件进行压缩和解压缩的命令，既方便又好用。gzip不仅可以用来压缩大的、较少使用的文件以节省磁盘空间，还可以和tar命令一起构成Linux操作系统中比较流行的压缩文件格式。据统计，gzip命令对文本文件有60%～70%的压缩率。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gzip 不能压缩目录</p>
<h2 id="1-命令格式"><a href="#1-命令格式" class="headerlink" title="1.命令格式"></a>1.命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gzip [参数] [文件]</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2.命令功能"></a>2.命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gzip 是个使用广泛的压缩程序，文件经它压缩后，其名称后面会多出 “.gz” 的扩展名。</p>
<h2 id="3-命令参数"><a href="#3-命令参数" class="headerlink" title="3.命令参数"></a>3.命令参数</h2><ul>
<li>-a或–ascii 　使用ASCII文字模式。</li>
<li>-c或–stdout或–to-stdout 　把压缩后的文件输出到标准输出设备，不去更动原始文件。 </li>
<li>-d或–decompress或—-uncompress 　解开压缩文件。</li>
<li>-f或–force 　强行压缩文件。不理会文件名称或硬连接是否存在以及该文件是否为符号连接。 </li>
<li>-h或–help 　在线帮助。 </li>
<li>-l或–list 　列出压缩文件的相关信息。</li>
<li>-L或–license 　显示版本与版权信息。 </li>
<li>-n或–no-name 　压缩文件时，不保存原来的文件名称及时间戳记。 </li>
<li>-N或–name 　压缩文件时，保存原来的文件名称及时间戳记。 </li>
<li>-q或–quiet 　不显示警告信息。</li>
<li>-r或–recursive 　递归处理，将指定目录下的所有文件及子目录一并处理。 </li>
<li>-S&lt;压缩字尾字符串&gt;或—-suffix&lt;压缩字尾字符串&gt; 　更改压缩字尾字符串。</li>
<li>-t或–test 　测试压缩文件是否正确无误。</li>
<li>-v或–verbose 　显示指令执行过程。 </li>
<li>-V或–version 　显示版本信息。</li>
<li>-num 用指定的数字num调整压缩的速度，-1或–fast表示最快压缩方法（低压缩比），-9或–best表示最慢压缩方法（高压缩比）。系统缺省值为6。</li>
</ul>
<h2 id="4-使用实例"><a href="#4-使用实例" class="headerlink" title="4.使用实例"></a>4.使用实例</h2><h3 id="实例1-把-test6-目录下的每个文件压缩成-gz-文件"><a href="#实例1-把-test6-目录下的每个文件压缩成-gz-文件" class="headerlink" title="实例1.把 test6 目录下的每个文件压缩成 .gz 文件"></a>实例1.把 test6 目录下的每个文件压缩成 .gz 文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gzip *</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 604</div><div class="line">---xr--r-- 1 root mail  302108 11-30 08:39 linklog.log</div><div class="line">---xr--r-- 1 mail users 302108 11-30 08:39 log2012.log</div><div class="line">-rw-r--r-- 1 mail users     61 11-30 08:39 log2013.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2014.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2015.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2016.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2017.log</div><div class="line">[root@localhost test6]<span class="comment"># gzip *</span></div><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 28</div><div class="line">---xr--r-- 1 root mail  1341 11-30 08:39 linklog.log.gz</div><div class="line">---xr--r-- 1 mail users 1341 11-30 08:39 log2012.log.gz</div><div class="line">-rw-r--r-- 1 mail users   70 11-30 08:39 log2013.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2014.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2015.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2016.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2017.log.gz</div><div class="line">[root@localhost test6]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h2 id="实例2：把例1中每个压缩的文件解压，并列出详细的信息"><a href="#实例2：把例1中每个压缩的文件解压，并列出详细的信息" class="headerlink" title="实例2：把例1中每个压缩的文件解压，并列出详细的信息"></a>实例2：把例1中每个压缩的文件解压，并列出详细的信息</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gzip -dv *</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 28</div><div class="line">---xr--r-- 1 root mail  1341 11-30 08:39 linklog.log.gz</div><div class="line">---xr--r-- 1 mail users 1341 11-30 08:39 log2012.log.gz</div><div class="line">-rw-r--r-- 1 mail users   70 11-30 08:39 log2013.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2014.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2015.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2016.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2017.log.gz</div><div class="line">[root@localhost test6]<span class="comment"># gzip -dv *</span></div><div class="line">linklog.log.gz:  99.6% -- replaced with linklog.log</div><div class="line">log2012.log.gz:  99.6% -- replaced with log2012.log</div><div class="line">log2013.log.gz:  47.5% -- replaced with log2013.log</div><div class="line">log2014.log.gz:   0.0% -- replaced with log2014.log</div><div class="line">log2015.log.gz:   0.0% -- replaced with log2015.log</div><div class="line">log2016.log.gz:   0.0% -- replaced with log2016.log</div><div class="line">log2017.log.gz:   0.0% -- replaced with log2017.log</div><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 604</div><div class="line">---xr--r-- 1 root mail  302108 11-30 08:39 linklog.log</div><div class="line">---xr--r-- 1 mail users 302108 11-30 08:39 log2012.log</div><div class="line">-rw-r--r-- 1 mail users     61 11-30 08:39 log2013.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2014.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2015.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2016.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2017.log</div><div class="line">[root@localhost test6]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例3：详细显示例1中诶每个压缩的文件的信息，并不解压"><a href="#实例3：详细显示例1中诶每个压缩的文件的信息，并不解压" class="headerlink" title="实例3：详细显示例1中诶每个压缩的文件的信息，并不解压"></a>实例3：详细显示例1中诶每个压缩的文件的信息，并不解压</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gzip -l *</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost test6]<span class="comment"># gzip -l *</span></div><div class="line">         compressed        uncompressed  ratio uncompressed_name</div><div class="line">               1341              302108  99.6% linklog.log</div><div class="line">               1341              302108  99.6% log2012.log</div><div class="line">                 70                  61  47.5% log2013.log</div><div class="line">                 32                   0   0.0% log2014.log</div><div class="line">                 32                   0   0.0% log2015.log</div><div class="line">                 32                   0   0.0% log2016.log</div><div class="line">                 32                   0   0.0% log2017.log</div><div class="line">               2880              604277  99.5% (totals)</div></pre></td></tr></table></figure>
<h3 id="实例4：压缩一个-tar-备份文件，此时压缩文件的扩展名为-tar-gz"><a href="#实例4：压缩一个-tar-备份文件，此时压缩文件的扩展名为-tar-gz" class="headerlink" title="实例4：压缩一个 tar 备份文件，此时压缩文件的扩展名为 .tar.gz"></a>实例4：压缩一个 tar 备份文件，此时压缩文件的扩展名为 .tar.gz</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gzip -r log.tar</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al log.tar</span></div><div class="line">-rw-r--r-- 1 root root 307200 11-29 17:54 log.tar</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># gzip -r log.tar</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al log.tar.gz </span></div><div class="line">-rw-r--r-- 1 root root 1421 11-29 17:54 log.tar.gz</div></pre></td></tr></table></figure>
<h3 id="实例5L递归的压缩目录"><a href="#实例5L递归的压缩目录" class="headerlink" title="实例5L递归的压缩目录"></a>实例5L递归的压缩目录</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gzip -rv test6</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 604</div><div class="line">---xr--r-- 1 root mail  302108 11-30 08:39 linklog.log</div><div class="line">---xr--r-- 1 mail users 302108 11-30 08:39 log2012.log</div><div class="line">-rw-r--r-- 1 mail users     61 11-30 08:39 log2013.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2014.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2015.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2016.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2017.log</div><div class="line">[root@localhost test6]<span class="comment"># cd ..</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># gzip -rv test6</span></div><div class="line">test6/log2014.log:        0.0% -- replaced with test6/log2014.log.gz</div><div class="line">test6/linklog.log:       99.6% -- replaced with test6/linklog.log.gz</div><div class="line">test6/log2015.log:        0.0% -- replaced with test6/log2015.log.gz</div><div class="line">test6/log2013.log:       47.5% -- replaced with test6/log2013.log.gz</div><div class="line">test6/log2012.log:       99.6% -- replaced with test6/log2012.log.gz</div><div class="line">test6/log2017.log:        0.0% -- replaced with test6/log2017.log.gz</div><div class="line">test6/log2016.log:        0.0% -- replaced with test6/log2016.log.gz</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test6</span></div><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 28</div><div class="line">---xr--r-- 1 root mail  1341 11-30 08:39 linklog.log.gz</div><div class="line">---xr--r-- 1 mail users 1341 11-30 08:39 log2012.log.gz</div><div class="line">-rw-r--r-- 1 mail users   70 11-30 08:39 log2013.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2014.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2015.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2016.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2017.log.gz</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这样，所有 test 下面的文件都变成了 <em>.gz ，目录依然存在，只是目录里面的文件相应变成了 </em>.gz 这就是压缩，和打包不同。因为是对目录操作，所以需要加上 -r 选项，这样也可以对子目录进行递归了。</p>
<h3 id="实例6：递归地解压目录"><a href="#实例6：递归地解压目录" class="headerlink" title="实例6：递归地解压目录"></a>实例6：递归地解压目录</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gzip -dr test6</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 28</div><div class="line">---xr--r-- 1 root mail  1341 11-30 08:39 linklog.log.gz</div><div class="line">---xr--r-- 1 mail users 1341 11-30 08:39 log2012.log.gz</div><div class="line">-rw-r--r-- 1 mail users   70 11-30 08:39 log2013.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2014.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2015.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2016.log.gz</div><div class="line">-rw-r--r-- 1 root mail    32 11-30 08:39 log2017.log.gz</div><div class="line">[root@localhost test6]<span class="comment"># cd ..</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># gzip -dr test6</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test6</span></div><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 604</div><div class="line">---xr--r-- 1 root mail  302108 11-30 08:39 linklog.log</div><div class="line">---xr--r-- 1 mail users 302108 11-30 08:39 log2012.log</div><div class="line">-rw-r--r-- 1 mail users     61 11-30 08:39 log2013.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2014.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2015.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2016.log</div><div class="line">-rw-r--r-- 1 root mail       0 11-30 08:39 log2017.log</div><div class="line">[root@localhost test6]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例7：-lt-数字-gt-自定义压缩率"><a href="#实例7：-lt-数字-gt-自定义压缩率" class="headerlink" title="实例7：-&lt;数字&gt; 自定义压缩率"></a>实例7：-&lt;数字&gt; 自定义压缩率</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gzip -v -9 test.tar</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># gzip -v -1 test.tar</span></div><div class="line">test.tar: 88.4% -- replaced with test.tar.gz</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># gzip -d test.tar.gz</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># gzip -v -9 test.tar</span></div><div class="line">test.tar: 89.7% -- replaced with test.tar.gz</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;压缩等级，1压缩最差，9压缩最好，6为默认。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/44. Linux 命令- kill" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/44. Linux 命令- kill/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.281Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/44. Linux 命令- kill/">
        Linux 命令- kill
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux中的kill命令用来终止指定的进程（terminate a process）的运行，是Linux下进程管理的常用命令。通常，终止一个前台进程可以使用Ctrl+C键，但是，对于一个后台进程就须用kill命令来终止，我们就需要先使用ps/pidof/pstree/top等工具获取进程PID，然后使用kill命令来杀掉该进程。kill命令是通过向进程发送指定的信号来结束相应进程的。在默认情况下，采用编号为15的TERM信号。TERM信号将终止所有不能捕获该信号的进程。对于那些可以捕获该信号的进程就要用编号为9的kill信号，强行“杀掉”该进程。 </p>
<h2 id="1．命令格式"><a href="#1．命令格式" class="headerlink" title="1．命令格式"></a>1．命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">kill</span>[参数][进程号]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能"><a href="#2．命令功能" class="headerlink" title="2．命令功能"></a>2．命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;发送指定的信号到相应进程。不指定型号将发送SIGTERM（15）终止指定进程。如果任无法终止该程序可用“-KILL” 参数，其发送的信号为SIGKILL(9) ，将强制结束进程，使用ps命令或者jobs 命令可以查看进程号。root用户将影响用户的进程，非root用户只能影响自己的进程。</p>
<h2 id="3．命令参数"><a href="#3．命令参数" class="headerlink" title="3．命令参数"></a>3．命令参数</h2><ul>
<li>-l  信号，若果不加信号的编号参数，则使用“-l”参数会列出全部的信号名称</li>
<li>-a  当处理当前进程时，不限制命令名和进程号的对应关系</li>
<li>-p  指定kill 命令只打印相关进程的进程号，而不发送任何信号</li>
<li>-s  指定发送信号</li>
<li>-u  指定用户 </li>
</ul>
<h3 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h3><ol>
<li><p>kill命令可以带信号号码选项，也可以不带。如果没有信号号码，kill命令就会发出终止信号(15)，这个信号可以被进程捕获，使得进程在退出之前可以清理并释放资源。也可以用kill向进程发送特定的信号。例如：<br>kill -2 123<br>它的效果等同于在前台运行PID为123的进程时按下Ctrl+C键。但是，普通用户只能使用不带signal参数的kill命令或最多使用-9信号。</p>
</li>
<li><p>kill可以带有进程ID号作为参数。当用kill向这些进程发送信号时，必须是这些进程的主人。如果试图撤销一个没有权限撤销的进程或撤销一个不存在的进程，就会得到一个错误信息。</p>
</li>
<li><p>可以向多个进程发信号或终止它们。</p>
</li>
<li><p>当kill成功地发送了信号后，shell会在屏幕上显示出进程的终止信息。有时这个信息不会马上显示，只有当按下Enter键使shell的命令提示符再次出现时，才会显示出来。</p>
</li>
<li><p>应注意，信号使进程强行终止，这常会带来一些副作用，如数据丢失或者终端无法恢复到正常状态。发送信号时必须小心，只有在万不得已时，才用kill信号(9)，因为进程不能首先捕获它。要撤销所有的后台作业，可以输入kill 0。因为有些在后台运行的命令会启动多个进程，跟踪并找到所有要杀掉的进程的PID是件很麻烦的事。这时，使用kill 0来终止所有由当前shell启动的进程，是个有效的方法。</p>
</li>
</ol>
<h2 id="4．使用实例"><a href="#4．使用实例" class="headerlink" title="4．使用实例"></a>4．使用实例</h2><h3 id="实例1：列出所有信号名称"><a href="#实例1：列出所有信号名称" class="headerlink" title="实例1：列出所有信号名称"></a>实例1：列出所有信号名称</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">kill</span> -l</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[root@localhost test6]<span class="comment"># kill -l</span></div><div class="line"> 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL</div><div class="line"> 5) SIGTRAP      6) SIGABRT      7) SIGBUS       8) SIGFPE</div><div class="line"> 9) SIGKILL     10) SIGUSR1     11) SIGSEGV     12) SIGUSR2</div><div class="line">13) SIGPIPE     14) SIGALRM     15) SIGTERM     16) SIGSTKFLT</div><div class="line">17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP</div><div class="line">21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU</div><div class="line">25) SIGXFSZ     26) SIGVTALRM   27) SIGPROF     28) SIGWINCH</div><div class="line">29) SIGIO       30) SIGPWR      31) SIGSYS      34) SIGRTMIN</div><div class="line">35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3  38) SIGRTMIN+4</div><div class="line">39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8</div><div class="line">43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12</div><div class="line">47) SIGRTMIN+13 48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14</div><div class="line">51) SIGRTMAX-13 52) SIGRTMAX-12 53) SIGRTMAX-11 54) SIGRTMAX-10</div><div class="line">55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7  58) SIGRTMAX-6</div><div class="line">59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2</div><div class="line">63) SIGRTMAX-1  64) SIGRTMAX</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;只有第9种信号(SIGKILL)才可以无条件终止进程，其他信号进程都有权利忽略。    下面是常用的信号：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">HUP    1    终端断线</div><div class="line">INT     2    中断（同 Ctrl + C）</div><div class="line">QUIT    3    退出（同 Ctrl + \）</div><div class="line">TERM   15    终止</div><div class="line">KILL    9    强制终止</div><div class="line">CONT   18    继续（与STOP相反， <span class="built_in">fg</span>/<span class="built_in">bg</span>命令）</div><div class="line">STOP    19    暂停（同 Ctrl + Z）</div></pre></td></tr></table></figure>
<h3 id="实例2：得到指定信号的数值"><a href="#实例2：得到指定信号的数值" class="headerlink" title="实例2：得到指定信号的数值"></a>实例2：得到指定信号的数值</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost test6]<span class="comment"># kill -l KILL</span></div><div class="line">9[root@localhost test6]<span class="comment"># kill -l SIGKILL</span></div><div class="line">9[root@localhost test6]<span class="comment"># kill -l TERM</span></div><div class="line">15[root@localhost test6]<span class="comment"># kill -l SIGTERM</span></div><div class="line">15[root@localhost test6]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例3：先用ps查找进程，然后用kill杀掉"><a href="#实例3：先用ps查找进程，然后用kill杀掉" class="headerlink" title="实例3：先用ps查找进程，然后用kill杀掉"></a>实例3：先用ps查找进程，然后用kill杀掉</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">kill</span> 3268</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost test6]<span class="comment"># ps -ef|grep vim </span></div><div class="line">root      3268  2884  0 16:21 pts/1    00:00:00 vim install.log</div><div class="line">root      3370  2822  0 16:21 pts/0    00:00:00 grep vim</div><div class="line">[root@localhost test6]<span class="comment"># kill 3268 </span></div><div class="line">[root@localhost test6]<span class="comment"># kill 3268 </span></div><div class="line">-bash: <span class="built_in">kill</span>: (3268) - 没有那个进程</div><div class="line">[root@localhost test6]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例4：彻底杀死进程"><a href="#实例4：彻底杀死进程" class="headerlink" title="实例4：彻底杀死进程"></a>实例4：彻底杀死进程</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">kill</span> –9 3268</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost test6]<span class="comment"># ps -ef|grep vim </span></div><div class="line">root      3268  2884  0 16:21 pts/1    00:00:00 vim install.log</div><div class="line">root      3370  2822  0 16:21 pts/0    00:00:00 grep vim</div><div class="line">[root@localhost test6]<span class="comment"># kill –9 3268 </span></div><div class="line">[root@localhost test6]<span class="comment"># kill 3268 </span></div><div class="line">-bash: <span class="built_in">kill</span>: (3268) - 没有那个进程</div><div class="line">[root@localhost test6]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例5：杀死指定用户所有进程"><a href="#实例5：杀死指定用户所有进程" class="headerlink" title="实例5：杀死指定用户所有进程"></a>实例5：杀死指定用户所有进程</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">kill</span> -9 $(ps -ef | grep peidalinux)</div><div class="line"><span class="built_in">kill</span> -u peidalinux</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># kill -9 $(ps -ef | grep peidalinux) </span></div><div class="line">[root@localhost ~]<span class="comment"># kill -u peidalinux</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;方法一，过滤出hnlinux用户进程并杀死</p>
<h3 id="实例6：init进程是不可杀的"><a href="#实例6：init进程是不可杀的" class="headerlink" title="实例6：init进程是不可杀的"></a>实例6：init进程是不可杀的</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">kill</span> -9 1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ps -ef|grep init</span></div><div class="line">root         1     0  0 Nov02 ?        00:00:00 init [3]                  </div><div class="line">root     17563 17534  0 17:37 pts/1    00:00:00 grep init</div><div class="line">[root@localhost ~]<span class="comment"># kill -9 1</span></div><div class="line">[root@localhost ~]<span class="comment"># kill -HUP 1</span></div><div class="line">[root@localhost ~]<span class="comment"># ps -ef|grep init</span></div><div class="line">root         1     0  0 Nov02 ?        00:00:00 init [3]                  </div><div class="line">root     17565 17534  0 17:38 pts/1    00:00:00 grep init</div><div class="line">[root@localhost ~]<span class="comment"># kill -KILL 1</span></div><div class="line">[root@localhost ~]<span class="comment"># ps -ef|grep init</span></div><div class="line">root         1     0  0 Nov02 ?        00:00:00 init [3]                  </div><div class="line">root     17567 17534  0 17:38 pts/1    00:00:00 grep init</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;init是Linux系统操作中不可缺少的程序之一。所谓的init进程，它是一个由内核启动的用户级进程。内核自行启动（已经被载入内存，开始运行，并已初始化所有的设备驱动程序和数据结构等）之后，就通过启动一个用户级程序init的方式，完成引导进程。所以,init始终是第一个进程（其进程编号始终为1）。 其它所有进程都是init进程的子孙。init进程是不可杀的！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/63. Linux 命令- wget" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/63. Linux 命令- wget/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.280Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/63. Linux 命令- wget/">
        Linux 命令- wget
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux系统中的wget是一个下载文件的工具，它用在命令行下。对于Linux用户是必不可少的工具，我们经常要下载一些软件或从远程服务器恢复备份到本地服务器。wget支持HTTP，HTTPS和FTP协议，可以使用HTTP代理。所谓的自动下载是指，wget可以在用户退出系统的之后在后台执行。这意味这你可以登录系统，启动一个wget下载任务，然后退出系统，wget将在后台执行直到任务完成，相对于其它大部分浏览器在下载大量数据时需要用户一直的参与，这省去了极大的麻烦。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;wget 可以跟踪HTML页面上的链接依次下载来创建远程服务器的本地版本，完全重建原始站点的目录结构。这又常被称作”递归下载”。在递归下载的时候，wget 遵循Robot Exclusion标准(/robots.txt). wget可以在下载的同时，将链接转换成指向本地文件，以方便离线浏览。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;wget         非常稳定，它在带宽很窄的情况下和不稳定网络中有很强的适应性.如果是由于网络的原因下载失败，wget会不断的尝试，直到整个文件下载完毕。如果是服务器打断下载过程，它会再次联到服务器上从停止的地方继续下载。这对从那些限定了链接时间的服务器上下载大文件非常有用。</p>
<h2 id="1．命令格式"><a href="#1．命令格式" class="headerlink" title="1．命令格式"></a>1．命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget [参数] [URL地址]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能"><a href="#2．命令功能" class="headerlink" title="2．命令功能"></a>2．命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用于从网络上下载资源，没有指定目录，下载资源回默认为当前目录。wget虽然功能强大，但是使用起来还是比较简单：</p>
<ol>
<li>支持断点下传功能；这一点，也是网络蚂蚁和FlashGet当年最大的卖点，现在，Wget也可以使用此功能，那些网络不是太好的用户可以放心了；</li>
<li>同时支持FTP和HTTP下载方式；尽管现在大部分软件可以使用HTTP方式下载，但是，有些时候，仍然需要使用FTP方式下载软件；</li>
<li>支持代理服务器；对安全强度很高的系统而言，一般不会将自己的系统直接暴露在互联网上，所以，支持代理是下载软件必须有的功能；</li>
<li>设置方便简单；可能，习惯图形界面的用户已经不是太习惯命令行了，但是，命令行在设置上其实有更多的优点，最少，鼠标可以少点很多次，也不要担心是否错点鼠标；</li>
<li>程序小，完全免费；程序小可以考虑不计，因为现在的硬盘实在太大了；完全免费就不得不考虑了，即使网络上有很多所谓的免费软件，但是，这些软件的广告却不是我们喜欢的。</li>
</ol>
<h2 id="3．命令参数："><a href="#3．命令参数：" class="headerlink" title="3．命令参数："></a>3．命令参数：</h2><h3 id="启动参数："><a href="#启动参数：" class="headerlink" title="启动参数："></a>启动参数：</h3><ul>
<li>-V, –version 显示wget的版本后退出</li>
<li>-h, –help 打印语法帮助</li>
<li>-b, –background 启动后转入后台执行</li>
<li>-e, –execute=COMMAND 执行`.wgetrc’格式的命令，wgetrc格式参见/etc/wgetrc或~/.wgetrc</li>
</ul>
<h3 id="记录和输入文件参数："><a href="#记录和输入文件参数：" class="headerlink" title="记录和输入文件参数："></a>记录和输入文件参数：</h3><ul>
<li>-o, –output-file=FILE 把记录写到FILE文件中</li>
<li>-a, –append-output=FILE 把记录追加到FILE文件中</li>
<li>-d, –debug 打印调试输出</li>
<li>-q, –quiet 安静模式(没有输出)</li>
<li>-v, –verbose 冗长模式(这是缺省设置)</li>
<li>-nv, –non-verbose 关掉冗长模式，但不是安静模式</li>
<li>-i, –input-file=FILE 下载在FILE文件中出现的URLs</li>
<li>-F, –force-html 把输入文件当作HTML格式文件对待</li>
<li>-B, –base=URL 将URL作为在-F - -i参数指定的文件中出现的相对链接的前缀</li>
<li>–sslcertfile=FILE 可选客户端证书</li>
<li>–sslcertkey=KEYFILE 可选客户端证书的KEYFILE</li>
<li>–egd-file=FILE 指定EGD socket的文件名</li>
</ul>
<h3 id="下载参数："><a href="#下载参数：" class="headerlink" title="下载参数："></a>下载参数：</h3><ul>
<li>–bind-address=ADDRESS 指定本地使用地址(主机名或IP，当本地有多个IP或名字时使用)</li>
<li>-t, –tries=NUMBER 设定最大尝试链接次数(0 表示无限制).</li>
<li>-O –output-document=FILE 把文档写到FILE文件中</li>
<li>-nc, –no-clobber 不要覆盖存在的文件或使用.#前缀</li>
<li>-c, –continue 接着下载没下载完的文件</li>
<li>–progress=TYPE 设定进程条标记</li>
<li>-N, –timestamping 不要重新下载文件除非比本地文件新</li>
<li>-S, –server-response 打印服务器的回应</li>
<li>–spider 不下载任何东西</li>
<li>-T, –timeout=SECONDS 设定响应超时的秒数</li>
<li>-w, –wait=SECONDS 两次尝试之间间隔SECONDS秒</li>
<li>–waitretry=SECONDS 在重新链接之间等待1…SECONDS秒</li>
<li>–random-wait 在下载之间等待0…2*WAIT秒</li>
<li>-Y, –proxy=on/off 打开或关闭代理</li>
<li>-Q, –quota=NUMBER 设置下载的容量限制</li>
<li>–limit-rate=RATE 限定下载输率</li>
</ul>
<h3 id="目录参数："><a href="#目录参数：" class="headerlink" title="目录参数："></a>目录参数：</h3><ul>
<li>-nd –no-directories 不创建目录</li>
<li>-x, –force-directories 强制创建目录</li>
<li>-nH, –no-host-directories 不创建主机目录</li>
<li>-P, –directory-prefix=PREFIX 将文件保存到目录 PREFIX/…</li>
<li>–cut-dirs=NUMBER 忽略 NUMBER层远程目录</li>
</ul>
<h3 id="HTTP-选项参数："><a href="#HTTP-选项参数：" class="headerlink" title="HTTP 选项参数："></a>HTTP 选项参数：</h3><ul>
<li>–http-user=USER 设定HTTP用户名为 USER.</li>
<li>–http-passwd=PASS 设定http密码为 PASS</li>
<li>-C, –cache=on/off 允许/不允许服务器端的数据缓存 (一般情况下允许)</li>
<li>-E, –html-extension 将所有text/html文档以.html扩展名保存</li>
<li>–ignore-length 忽略 `Content-Length’头域</li>
<li>–header=STRING 在headers中插入字符串 STRING</li>
<li>–proxy-user=USER 设定代理的用户名为 USER</li>
<li>–proxy-passwd=PASS 设定代理的密码为 PASS</li>
<li>–referer=URL 在HTTP请求中包含 `Referer: URL’头</li>
<li>-s, –save-headers 保存HTTP头到文件</li>
<li>-U, –user-agent=AGENT 设定代理的名称为 AGENT而不是 Wget/VERSION</li>
<li>–no-http-keep-alive 关闭 HTTP活动链接 (永远链接)</li>
<li>–cookies=off 不使用 cookies</li>
<li>–load-cookies=FILE 在开始会话前从文件 FILE中加载cookie</li>
<li>–save-cookies=FILE 在会话结束后将 cookies保存到 FILE文件中</li>
</ul>
<h3 id="FTP-选项参数："><a href="#FTP-选项参数：" class="headerlink" title="FTP 选项参数："></a>FTP 选项参数：</h3><ul>
<li>-nr, –dont-remove-listing 不移走 `.listing’文件</li>
<li>-g, –glob=on/off 打开或关闭文件名的 globbing机制</li>
<li>–passive-ftp 使用被动传输模式 (缺省值).</li>
<li>–active-ftp 使用主动传输模式</li>
<li>–retr-symlinks 在递归的时候，将链接指向文件(而不是目录)</li>
</ul>
<h3 id="递归下载参数："><a href="#递归下载参数：" class="headerlink" title="递归下载参数："></a>递归下载参数：</h3><ul>
<li>-r, –recursive 递归下载－－慎用!</li>
<li>-l, –level=NUMBER 最大递归深度 (inf 或 0 代表无穷)</li>
<li>–delete-after 在现在完毕后局部删除文件</li>
<li>-k, –convert-links 转换非相对链接为相对链接</li>
<li>-K, –backup-converted 在转换文件X之前，将之备份为 X.orig</li>
<li>-m, –mirror 等价于 -r -N -l inf -nr</li>
<li>-p, –page-requisites 下载显示HTML文件的所有图片</li>
</ul>
<h3 id="递归下载中的包含和不包含-accept-reject-："><a href="#递归下载中的包含和不包含-accept-reject-：" class="headerlink" title="递归下载中的包含和不包含(accept/reject)："></a>递归下载中的包含和不包含(accept/reject)：</h3><ul>
<li>-A, –accept=LIST 分号分隔的被接受扩展名的列表</li>
<li>-R, –reject=LIST 分号分隔的不被接受的扩展名的列表</li>
<li>-D, –domains=LIST 分号分隔的被接受域的列表</li>
<li>–exclude-domains=LIST 分号分隔的不被接受的域的列表</li>
<li>–follow-ftp 跟踪HTML文档中的FTP链接</li>
<li>–follow-tags=LIST 分号分隔的被跟踪的HTML标签的列表</li>
<li>-G, –ignore-tags=LIST 分号分隔的被忽略的HTML标签的列表</li>
<li>-H, –span-hosts 当递归时转到外部主机</li>
<li>-L, –relative 仅仅跟踪相对链接</li>
<li>-I, –include-directories=LIST 允许目录的列表</li>
<li>-X, –exclude-directories=LIST 不被包含目录的列表</li>
<li>-np, –no-parent 不要追溯到父目录<br>wget -S –spider url 不下载只显示过程</li>
</ul>
<h2 id="4．使用实例"><a href="#4．使用实例" class="headerlink" title="4．使用实例"></a>4．使用实例</h2><h3 id="实例1：使用wget下载单个文件"><a href="#实例1：使用wget下载单个文件" class="headerlink" title="实例1：使用wget下载单个文件"></a>实例1：使用wget下载单个文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget http://www.minjieren.com/wordpress-3.1-zh_CN.zip</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;以下的例子是从网络下载一个文件并保存在当前目录，在下载的过程中会显示进度条，包含（下载完成百分比，已经下载的字节，当前下载速度，剩余下载时间）。</p>
<h3 id="实例2：使用wget-O下载并以不同的文件名保存"><a href="#实例2：使用wget-O下载并以不同的文件名保存" class="headerlink" title="实例2：使用wget -O下载并以不同的文件名保存"></a>实例2：使用wget -O下载并以不同的文件名保存</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget -O wordpress.zip http://www.minjieren.com/download.aspx?id=1080</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;wget默认会以最后一个符合”/”的后面的字符来命令，对于动态链接的下载通常文件名会不正确。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;错误：下面的例子会下载一个文件并以名称download.aspx?id=1080保存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget http://www.minjieren.com/download?id=1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;即使下载的文件是zip格式，它仍然以download.php?id=1080命令。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;正确：为了解决这个问题，我们可以使用参数-O来指定一个文件名：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget -O wordpress.zip http://www.minjieren.com/download.aspx?id=1080</div></pre></td></tr></table></figure>
<h3 id="实例3：使用wget-–limit-rate限速下载"><a href="#实例3：使用wget-–limit-rate限速下载" class="headerlink" title="实例3：使用wget –limit -rate限速下载"></a>实例3：使用wget –limit -rate限速下载</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget --<span class="built_in">limit</span>-rate=300k http://www.minjieren.com/wordpress-3.1-zh_CN.zip</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;当你执行wget的时候，它默认会占用全部可能的宽带下载。但是当你准备下载一个大文件，而你还需要下载其它文件时就有必要限速了。</p>
<h3 id="实例4：使用wget-c断点续传"><a href="#实例4：使用wget-c断点续传" class="headerlink" title="实例4：使用wget -c断点续传"></a>实例4：使用wget -c断点续传</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget -c http://www.minjieren.com/wordpress-3.1-zh_CN.zip</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;使用wget -c重新启动下载中断的文件，对于我们下载大文件时突然由于网络等原因中断非常有帮助，我们可以继续接着下载而不是重新下载一个文件。需要继续中断的下载时可以使用-c参数。</p>
<h3 id="实例5：使用wget-b后台下载"><a href="#实例5：使用wget-b后台下载" class="headerlink" title="实例5：使用wget -b后台下载"></a>实例5：使用wget -b后台下载</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget -b http://www.minjieren.com/wordpress-3.1-zh_CN.zip</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;对于下载非常大的文件的时候，我们可以使用参数-b进行后台下载。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">wget -b http://www.minjieren.com/wordpress-3.1-zh_CN.zip</div><div class="line">Continuing <span class="keyword">in</span> background, pid 1840.</div><div class="line">Output will be written to `wget-log<span class="string">'.</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;你可以使用以下命令来察看下载进度：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tail -f wget-log</div></pre></td></tr></table></figure>
<h3 id="实例6：伪装代理名称下载"><a href="#实例6：伪装代理名称下载" class="headerlink" title="实例6：伪装代理名称下载"></a>实例6：伪装代理名称下载</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget --user-agent=<span class="string">"Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.204 Safari/534.16"</span> http://www.minjieren.com/wordpress-3.1-zh_CN.zip</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;有些网站能通过根据判断代理名称不是浏览器而拒绝你的下载请求。不过你可以通过–user-agent参数伪装。</p>
<h3 id="实例7：使用wget-–spider测试下载链接"><a href="#实例7：使用wget-–spider测试下载链接" class="headerlink" title="实例7：使用wget –spider测试下载链接"></a>实例7：使用wget –spider测试下载链接</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget --spider URL</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;当你打算进行定时下载，你应该在预定时间测试下载链接是否有效。我们可以增加–spider参数进行检查。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget --spider URL</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果下载链接正确，将会显示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">wget --spider URL</div><div class="line">Spider mode enabled. Check <span class="keyword">if</span> remote file exists.</div><div class="line">HTTP request sent, awaiting response... 200 OK</div><div class="line">Length: unspecified [text/html]</div><div class="line">Remote file exists and could contain further links,</div><div class="line">but recursion is disabled -- not retrieving.</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这保证了下载能在预定的时间进行，但当你给错了一个链接，将会显示如下错误</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">wget --spider url</div><div class="line">Spider mode enabled. Check <span class="keyword">if</span> remote file exists.</div><div class="line">HTTP request sent, awaiting response... 404 Not Found</div><div class="line">Remote file does not exist -- broken link!!!</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;可以在以下几种情况下使用spider参数：</p>
<ul>
<li>定时下载之前进行检查</li>
<li>间隔检测网站是否可用</li>
<li>检查网站页面的死链接</li>
</ul>
<h3 id="实例8：使用wget-–tries增加重试次数"><a href="#实例8：使用wget-–tries增加重试次数" class="headerlink" title="实例8：使用wget –tries增加重试次数"></a>实例8：使用wget –tries增加重试次数</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget --tries=40 URL</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果网络有问题或下载一个大文件也有可能失败。wget默认重试20次连接下载文件。如果需要，你可以使用–tries增加重试次数。</p>
<h3 id="实例9：使用wget-i下载多个文件"><a href="#实例9：使用wget-i下载多个文件" class="headerlink" title="实例9：使用wget -i下载多个文件"></a>实例9：使用wget -i下载多个文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget -i filelist.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;首先，保存一份下载链接文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">cat &gt; filelist.txt</div><div class="line">url1</div><div class="line">url2</div><div class="line">url3</div><div class="line">url4</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;接着使用这个文件和参数-i下载</p>
<h3 id="实例10：使用wget-–mirror镜像网站"><a href="#实例10：使用wget-–mirror镜像网站" class="headerlink" title="实例10：使用wget –mirror镜像网站"></a>实例10：使用wget –mirror镜像网站</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget --mirror -p --convert-links -P ./LOCAL URL</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;下载整个网站到本地。</p>
<ul>
<li>–miror:开户镜像下载</li>
<li>-p:下载所有为了html页面显示正常的文件</li>
<li>–convert-links:下载后，转换成本地的链接</li>
<li>-P ./LOCAL：保存所有文件和目录到本地指定目录</li>
</ul>
<h3 id="实例11：使用wget-–reject过滤指定格式下载"><a href="#实例11：使用wget-–reject过滤指定格式下载" class="headerlink" title="实例11：使用wget –reject过滤指定格式下载"></a>实例11：使用wget –reject过滤指定格式下载</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget --reject=gif ur</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;下载一个网站，但你不希望下载图片，可以使用以下命令。</p>
<h3 id="实例12：使用wget-o把下载信息存入日志文件"><a href="#实例12：使用wget-o把下载信息存入日志文件" class="headerlink" title="实例12：使用wget -o把下载信息存入日志文件"></a>实例12：使用wget -o把下载信息存入日志文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget -o download.log URL</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;不希望下载信息直接显示在终端而是在一个日志文件，可以使用</p>
<h3 id="实例13：使用wget-Q限制总下载文件大小"><a href="#实例13：使用wget-Q限制总下载文件大小" class="headerlink" title="实例13：使用wget -Q限制总下载文件大小"></a>实例13：使用wget -Q限制总下载文件大小</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget -Q5m -i filelist.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;当你想要下载的文件超过5M而退出下载，你可以使用。注意：这个参数对单个文件下载不起作用，只能递归下载时才有效。</p>
<h3 id="实例14：使用wget-r-A下载指定格式文件"><a href="#实例14：使用wget-r-A下载指定格式文件" class="headerlink" title="实例14：使用wget -r -A下载指定格式文件"></a>实例14：使用wget -r -A下载指定格式文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget -r -A.pdf url</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;可以在以下情况使用该功能：</p>
<ul>
<li>下载一个网站的所有图片</li>
<li>下载一个网站的所有视频</li>
<li>下载一个网站的所有PDF文件</li>
</ul>
<h3 id="实例15：使用wget-FTP下载"><a href="#实例15：使用wget-FTP下载" class="headerlink" title="实例15：使用wget FTP下载"></a>实例15：使用wget FTP下载</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wget ftp-url</div><div class="line">wget --ftp-user=USERNAME --ftp-password=PASSWORD url</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;可以使用wget来完成ftp链接的下载。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;使用wget匿名ftp下载：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget ftp-url</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;使用wget用户名和密码认证的ftp下载</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget --ftp-user=USERNAME --ftp-password=PASSWORD url</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;备注：编译安装<br>使用如下命令编译安装： </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># tar zxvf wget-1.9.1.tar.gz </span></div><div class="line"><span class="comment"># cd wget-1.9.1 </span></div><div class="line"><span class="comment"># ./configure </span></div><div class="line"><span class="comment"># make </span></div><div class="line"><span class="comment"># make install</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/65. Linux 命令- sort" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/65. Linux 命令- sort/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.280Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/65. Linux 命令- sort/">
        Linux 命令- sort
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sort 命令在 linux 里非常有用，它将文件进行排序，并将排序结果标准输出。</p>
<h2 id="1-命令语法"><a href="#1-命令语法" class="headerlink" title="1. 命令语法"></a>1. 命令语法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sort [参数] [文件]</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2. 命令功能"></a>2. 命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用作排序</p>
<h2 id="3-命令参数"><a href="#3-命令参数" class="headerlink" title="3. 命令参数"></a>3. 命令参数</h2><ul>
<li>-b   忽略每行前面开始出的空格字符。</li>
<li>-d   排序时，处理英文字母、数字及空格字符外，忽略其他的字符。</li>
<li>-f   排序时，将小写字母视为大写字母。</li>
<li>-i   排序时，除了040至176之间的ASCII字符外，忽略其他的字符。</li>
<li>-c   检查文件是否已经按照顺序排序。</li>
<li>-m   将几个排序好的文件进行合并。</li>
<li>-M  前面3个字母依照月份的缩写进行排序。</li>
<li>-n   依照数值的大小排序。</li>
<li>-o&lt;输出文件&gt;   将排序后的结果存入指定的文件。</li>
<li>-r   以相反的顺序来排序。</li>
<li>-t&lt;分隔字符&gt;   指定排序时所用的栏位分隔字符。</li>
<li>-k 指定域</li>
<li>–help   显示帮助。</li>
<li>–version   显示版本信息。</li>
</ul>
<h2 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h2><h3 id="实例1：对-etc-passwd-的帐号进行排序"><a href="#实例1：对-etc-passwd-的帐号进行排序" class="headerlink" title="实例1：对 /etc/passwd 的帐号进行排序"></a>实例1：对 /etc/passwd 的帐号进行排序</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat /etc/passwd|sort</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cat /etc/passwd|sort</span></div><div class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</div><div class="line">bin:x:1:1:bin:/bin:/sbin/nologin</div><div class="line">chrony:x:997:995::/var/lib/chrony:/sbin/nologin</div><div class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</div><div class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</div><div class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</div><div class="line">games:x:12:100:games:/usr/games:/sbin/nologin</div><div class="line">halt:x:7:0:halt:/sbin:/sbin/halt</div><div class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</div><div class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</div><div class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</div><div class="line">operator:x:11:0:operator:/root:/sbin/nologin</div><div class="line">polkitd:x:998:996:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</div><div class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</div><div class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</div><div class="line">sync:x:5:0:sync:/sbin:/bin/sync</div><div class="line">systemd-bus-proxy:x:999:997:systemd Bus Proxy:/:/sbin/nologin</div><div class="line">systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</div><div class="line">tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果 sort 不加任何选项，则从手自缚向后，一次按 ASCII 码值进行比较，最后将它们按升序输出。</p>
<h3 id="实例2：对-etc-passwd-第三栏排序"><a href="#实例2：对-etc-passwd-第三栏排序" class="headerlink" title="实例2：对 /etc/passwd 第三栏排序"></a>实例2：对 /etc/passwd 第三栏排序</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat /etc/passwd|sort -t<span class="string">':'</span> -k 3</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cat /etc/passwd|sort -t':' -k 3</span></div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">operator:x:11:0:operator:/root:/sbin/nologin</div><div class="line">bin:x:1:1:bin:/bin:/sbin/nologin</div><div class="line">games:x:12:100:games:/usr/games:/sbin/nologin</div><div class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</div><div class="line">systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</div><div class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</div><div class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</div><div class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</div><div class="line">sync:x:5:0:sync:/sbin:/bin/sync</div><div class="line">tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin</div><div class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</div><div class="line">halt:x:7:0:halt:/sbin:/sbin/halt</div><div class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</div><div class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</div><div class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</div><div class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</div><div class="line">chrony:x:997:995::/var/lib/chrony:/sbin/nologin</div><div class="line">polkitd:x:998:996:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</div><div class="line">systemd-bus-proxy:x:999:997:systemd Bus Proxy:/:/sbin/nologin</div><div class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;默认是以字符串来排序的</p>
<h3 id="实例3：对-etc-passwd-第三栏以纯数字排序"><a href="#实例3：对-etc-passwd-第三栏以纯数字排序" class="headerlink" title="实例3：对 /etc/passwd 第三栏以纯数字排序"></a>实例3：对 /etc/passwd 第三栏以纯数字排序</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat /etc/passwd|sort -t<span class="string">':'</span> -k3 -n</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cat /etc/passwd|sort -t':' -k 3 -n</span></div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">bin:x:1:1:bin:/bin:/sbin/nologin</div><div class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</div><div class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</div><div class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</div><div class="line">sync:x:5:0:sync:/sbin:/bin/sync</div><div class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</div><div class="line">halt:x:7:0:halt:/sbin:/sbin/halt</div><div class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</div><div class="line">operator:x:11:0:operator:/root:/sbin/nologin</div><div class="line">games:x:12:100:games:/usr/games:/sbin/nologin</div><div class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</div><div class="line">tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin</div><div class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</div><div class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</div><div class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</div><div class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</div><div class="line">systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</div><div class="line">chrony:x:997:995::/var/lib/chrony:/sbin/nologin</div><div class="line">polkitd:x:998:996:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</div><div class="line">systemd-bus-proxy:x:999:997:systemd Bus Proxy:/:/sbin/nologin</div></pre></td></tr></table></figure>
<h3 id="实例4：去重复排序"><a href="#实例4：去重复排序" class="headerlink" title="实例4：去重复排序"></a>实例4：去重复排序</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sort -u seq.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[rocrocket@rocrocket programming]$ cat seq.txt</div><div class="line">banana</div><div class="line">apple</div><div class="line">pear</div><div class="line">orange</div><div class="line">pear</div><div class="line">[rocrocket@rocrocket programming]$ sort seq.txt</div><div class="line">apple</div><div class="line">banana</div><div class="line">orange</div><div class="line">pear</div><div class="line">pear</div><div class="line">[rocrocket@rocrocket programming]$ sort -u seq.txt</div><div class="line">apple</div><div class="line">banana</div><div class="line">orange</div><div class="line">pear</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pear 由于重复被 -u 选项去重复了</p>
<h3 id="实例5：进行降序排列"><a href="#实例5：进行降序排列" class="headerlink" title="实例5：进行降序排列"></a>实例5：进行降序排列</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sort -r number.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">rocrocket@rocrocket programming]$ cat number.txt</div><div class="line">1</div><div class="line">3</div><div class="line">5</div><div class="line">2</div><div class="line">4</div><div class="line">[rocrocket@rocrocket programming]$ sort number.txt</div><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">[rocrocket@rocrocket programming]$ sort -r number.txt</div><div class="line">5</div><div class="line">4</div><div class="line">3</div><div class="line">2</div><div class="line">1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sort 默认的排列方式是升序，使用 -r 选项就可以改成降序</p>
<h3 id="实例6：把排序结果输出到源文件中"><a href="#实例6：把排序结果输出到源文件中" class="headerlink" title="实例6：把排序结果输出到源文件中"></a>实例6：把排序结果输出到源文件中</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sort -r number.txt -o number.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[rocrocket@rocrocket programming]$ sort -r number.txt &gt; number.txt</div><div class="line">[rocrocket@rocrocket programming]$ cat number.txt</div><div class="line">[rocrocket@rocrocket programming]$</div><div class="line"></div><div class="line">[rocrocket@rocrocket programming]$ cat number.txt</div><div class="line">1</div><div class="line">3</div><div class="line">5</div><div class="line">2</div><div class="line">4</div><div class="line">[rocrocket@rocrocket programming]$ sort -r number.txt -o number.txt</div><div class="line">[rocrocket@rocrocket programming]$ cat number.txt</div><div class="line">5</div><div class="line">4</div><div class="line">3</div><div class="line">2</div><div class="line">1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;直接把排序结果用重定向输出到源文件中，结果文件被清空了；使用 -o 选项解决了这个问题，可以放心把输出结果写入源文件</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/82. Linux 命令- screen" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/82. Linux 命令- screen/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.279Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/82. Linux 命令- screen/">
        Linux 命令- screen
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;screen命令用于多重视窗管理程序。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;screen为多重视窗管理程序。所谓的视窗，是指一个全屏幕的文字模式画面。通常只有在使用telnet登入主机或是使用老式终端机时，才有可能用到screen程序。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;有时候，也许会有这样的需求。要执行一个命令或者脚本，但是需要几个小时甚至几天。这就要考虑一个问题，就是中途断网或出现其他意外情况，执行的任务中断了怎么办？可以把命令或者脚本丢到后台运行，不过也不保险。screen可以避免这样的问题发生。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;screen中有会话的概念，用户可以在一个screen会话中创建多个screen窗口，在每一个窗口中就想操作一个真实的SSH连接窗口那样。</p>
<h2 id="命令语法"><a href="#命令语法" class="headerlink" title="命令语法"></a>命令语法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">screen [-AmRvx -ls -wipe][-d &lt;作业名称&gt;][-h &lt;行数&gt;][-r &lt;作业名称&gt;][-s &lt;shell&gt;][-S &lt;作业名称&gt;]</div></pre></td></tr></table></figure>
<h2 id="命令参数"><a href="#命令参数" class="headerlink" title="命令参数"></a>命令参数</h2><ul>
<li>-A 　将所有的视窗都调整为目前终端机的大小。</li>
<li>-d&lt;作业名称&gt; 　将指定的screen作业离线。</li>
<li>-h&lt;行数&gt; 　指定视窗的缓冲区行数。</li>
<li>-m 　即使目前已在作业中的screen作业，仍强制建立新的screen作业。</li>
<li>-r&lt;作业名称&gt; 　恢复离线的screen作业。</li>
<li>-R 　先试图恢复离线的作业。若找不到离线的作业，即建立新的screen作业。</li>
<li>-s<shell> 　指定建立新视窗时，所要执行的shell。</shell></li>
<li>-S&lt;作业名称&gt; 　指定screen作业的名称。</li>
<li>-v 　显示版本信息。</li>
<li>-x 　恢复之前离线的screen作业。</li>
<li>-ls或–list 　显示目前所有的screen作业。</li>
<li>-wipe 　检查目前所有的screen作业，并删除已经无法使用的screen作业。</li>
</ul>
<h2 id="命令实例"><a href="#命令实例" class="headerlink" title="命令实例"></a>命令实例</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果没有screen命令需先安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install -y screen</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;创建screen终端</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># screen</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;创建 screen 终端 ，并执行 vi命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># screen vi ~/main.c </span></div><div class="line"></div><div class="line"><span class="comment">#include </span></div><div class="line"></div><div class="line">main ()</div><div class="line">&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="string">"~/mail.c"</span>       0,0-1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <code>Ctrl+a</code> 再按d键，退出该screen回话，只是退出，并没有结束。需要结束的话输入 <code>Ctrl+d</code> 或者输入 <code>exit</code></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <code>screen -ls</code> 查看已经打开的screen会话</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># screen -ls</span></div><div class="line">There is a screen on:</div><div class="line">20001.pts-0.localhost (Attached)</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;退出后还想再次登录某个screen会话，使用 <code>sreen -r [screen编号]</code> ，这个编号就是上例中那个20001.当只有一个screen会话时，后面的编号是可以省略的。当有某个需要长时间运行的命令或者脚本时就打开一个screen会话，然后运行该任务。按 <code>ctrl+a d</code>退出会话，不影响终端窗口上的任何操作。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;创建新的screen是可以指定自定义名称的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># screen -S yanyi</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;要想进入该screen，可以直接</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">screen -r yanyi</div></pre></td></tr></table></figure>
<h2 id="screen源码编译安装"><a href="#screen源码编译安装" class="headerlink" title="screen源码编译安装"></a>screen源码编译安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@host1 src]<span class="comment"># wget ftp://ftp.gnu.org/pub/gnu/screen/screen-4.0.3.tar.gz</span></div><div class="line">[root@host1 src]<span class="comment"># tar -xvf screen-4.0.3.tar.gz</span></div><div class="line">[root@host1 src]<span class="comment"># cd screen-4.0.3</span></div><div class="line">[root@host1 screen-4.0.2]<span class="comment"># ./configure</span></div><div class="line">[root@host1 screen-4.0.2]<span class="comment"># make</span></div><div class="line">[root@host1 screen-4.0.2]<span class="comment"># make install</span></div><div class="line">[root@host1 screen-4.0.2]<span class="comment"># install -m 644 etc/etcscreenrc /etc/screenrc</span></div><div class="line">[root@host1 screen-4.0.2]<span class="comment"># cp ./screen /bin</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;注意和一般程序的安装过程有所不同，后面两条命令一定要执行。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/53. Linux 命令- lsof" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/53. Linux 命令- lsof/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.278Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/53. Linux 命令- lsof/">
        Linux 命令- lsof
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lsof（list open files）是一个列出当前系统打开文件的工具。在linux环境下，任何事物都以文件的形式存在，通过文件不仅仅可以访问常规数据，还可以访问网络连接和硬件。所以如传输控制协议 (TCP) 和用户数据报协议 (UDP) 套接字等，系统在后台都为该应用程序分配了一个文件描述符，无论这个文件的本质如何，该文件描述符为应用程序与基础操作系统之间的交互提供了通用接口。因为应用程序打开文件的描述符列表提供了大量关于这个应用程序本身的信息，因此通过lsof工具能够查看这个列表对系统监测以及排错将是很有帮助的。</p>
<h2 id="1．命令格式"><a href="#1．命令格式" class="headerlink" title="1．命令格式"></a>1．命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof [参数] [文件]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能"><a href="#2．命令功能" class="headerlink" title="2．命令功能"></a>2．命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用于查看你进程开打的文件，打开文件的进程，进程打开的端口(TCP、UDP)。找回/恢复删除的文件。是十分方便的系统监视工具，因为 lsof 需要访问核心内存和各种文件，所以需要root用户执行。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lsof打开的文件可以是：</p>
<ol>
<li>普通文件</li>
<li>目录</li>
<li>网络文件系统的文件</li>
<li>字符或设备文件</li>
<li>(函数)共享库</li>
<li>管道，命名管道</li>
<li>符号链接</li>
<li>网络文件（例如：NFS file、网络socket，unix域名socket）</li>
<li>还有其它类型的文件，等等</li>
</ol>
<h2 id="3．命令参数"><a href="#3．命令参数" class="headerlink" title="3．命令参数"></a>3．命令参数</h2><ul>
<li>-a 列出打开文件存在的进程</li>
<li>-c&lt;进程名&gt; 列出指定进程所打开的文件</li>
<li>-g  列出GID号进程详情</li>
<li>-d&lt;文件号&gt; 列出占用该文件号的进程</li>
<li>+d&lt;目录&gt;  列出目录下被打开的文件</li>
<li>+D&lt;目录&gt;  递归列出目录下被打开的文件</li>
<li>-n&lt;目录&gt;  列出使用NFS的文件</li>
<li>-i&lt;条件&gt;  列出符合条件的进程。（4、6、协议、:端口、 @ip ）</li>
<li>-p&lt;进程号&gt; 列出指定进程号所打开的文件</li>
<li>-u  列出UID号进程详情</li>
<li>-h 显示帮助信息</li>
<li>-v 显示版本信息</li>
</ul>
<h2 id="4．使用实例"><a href="#4．使用实例" class="headerlink" title="4．使用实例"></a>4．使用实例</h2><h3 id="实例1：无任何参数"><a href="#实例1：无任何参数" class="headerlink" title="实例1：无任何参数"></a>实例1：无任何参数</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># lsof</span></div><div class="line"></div><div class="line">COMMAND     PID USER   FD      TYPE             DEVICE     SIZE       NODE NAME</div><div class="line">init          1 root  cwd       DIR                8,2     4096          2 /</div><div class="line">init          1 root  rtd       DIR                8,2     4096          2 /</div><div class="line">init          1 root  txt       REG                8,2    43496    6121706 /sbin/init</div><div class="line">init          1 root  mem       REG                8,2   143600    7823908 /lib64/ld-2.5.so</div><div class="line">init          1 root  mem       REG                8,2  1722304    7823915 /lib64/libc-2.5.so</div><div class="line">init          1 root  mem       REG                8,2    23360    7823919 /lib64/libdl-2.5.so</div><div class="line">init          1 root  mem       REG                8,2    95464    7824116 /lib64/libselinux.so.1</div><div class="line">init          1 root  mem       REG                8,2   247496    7823947 /lib64/libsepol.so.1</div><div class="line">init          1 root   10u     FIFO               0,17                1233 /dev/initctl</div><div class="line">migration     2 root  cwd       DIR                8,2     4096          2 /</div><div class="line">migration     2 root  rtd       DIR                8,2     4096          2 /</div><div class="line">migration     2 root  txt   unknown                                        /proc/2/exe</div><div class="line">ksoftirqd     3 root  cwd       DIR                8,2     4096          2 /</div><div class="line">ksoftirqd     3 root  rtd       DIR                8,2     4096          2 /</div><div class="line">ksoftirqd     3 root  txt   unknown                                        /proc/3/exe</div><div class="line">migration     4 root  cwd       DIR                8,2     4096          2 /</div><div class="line">migration     4 root  rtd       DIR                8,2     4096          2 /</div><div class="line">migration     4 root  txt   unknown                                        /proc/4/exe</div><div class="line">ksoftirqd     5 root  cwd       DIR                8,2     4096          2 /</div><div class="line">ksoftirqd     5 root  rtd       DIR                8,2     4096          2 /</div><div class="line">ksoftirqd     5 root  txt   unknown                                        /proc/5/exe</div><div class="line">events/0      6 root  cwd       DIR                8,2     4096          2 /</div><div class="line">events/0      6 root  rtd       DIR                8,2     4096          2 /</div><div class="line">events/0      6 root  txt   unknown                                        /proc/6/exe</div><div class="line">events/1      7 root  cwd       DIR                8,2     4096          2 /</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>lsof输出各列信息的意义如下：</strong></p>
<ul>
<li>COMMAND：进程的名称</li>
<li>PID：进程标识符</li>
<li>PPID：父进程标识符（需要指定-R参数）</li>
<li>USER：进程所有者</li>
<li>PGID：进程所属组</li>
<li>FD：文件描述符，应用程序通过文件描述符识别该文件。如cwd、txt等<ul>
<li>（1）cwd：表示current work dirctory，即：应用程序的当前工作目录，这是该应用程序启动的目录，除非它本身对这个目录进行更改</li>
<li>（2）txt ：该类型的文件是程序代码，如应用程序二进制文件本身或共享库，如上列表中显示的 /sbin/init 程序</li>
<li>（3）lnn：library references (AIX);</li>
<li>（4）er：FD information error (see NAME column);</li>
<li>（5）jld：jail directory (FreeBSD);</li>
<li>（6）ltx：shared library text (code and data);</li>
<li>（7）mxx ：hex memory-mapped type number xx.</li>
<li>（8）m86：DOS Merge mapped file;</li>
<li>（9）mem：memory-mapped file;</li>
<li>（10）mmap：memory-mapped device;</li>
<li>（11）pd：parent directory;</li>
<li>（12）rtd：root directory;</li>
<li>（13）tr：kernel trace file (OpenBSD);</li>
<li>（14）v86  VP/ix mapped file;</li>
<li>（15）0：表示标准输出</li>
<li>（16）1：表示标准输入</li>
<li>（17）2：表示标准错误</li>
</ul>
</li>
<li>一般在标准输出、标准错误、标准输入后还跟着文件状态模式：r、w、u等<ul>
<li>（1）u：表示该文件被打开并处于读取/写入模式</li>
<li>（2）r：表示该文件被打开并处于只读模式</li>
<li>（3）w：表示该文件被打开并处于</li>
<li>（4）空格：表示该文件的状态模式为unknow，且没有锁定</li>
<li>（5）-：表示该文件的状态模式为unknow，且被锁定</li>
</ul>
</li>
<li>同时在文件状态模式后面，还跟着相关的锁<ul>
<li>（1）N：for a Solaris NFS lock of unknown type;</li>
<li>（2）r：for read lock on part of the file;</li>
<li>（3）R：for a read lock on the entire file;</li>
<li>（4）w：for a write lock on part of the file;（文件的部分写锁）</li>
<li>（5）W：for a write lock on the entire file;（整个文件的写锁）</li>
<li>（6）u：for a read and write lock of any length;</li>
<li>（7）U：for a lock of unknown type;</li>
<li>（8）x：for an SCO OpenServer Xenix lock on part      of the file;</li>
<li>（9）X：for an SCO OpenServer Xenix lock on the      entire file;</li>
<li>（10）space：if there is no lock.</li>
</ul>
</li>
<li>TYPE：文件类型，如DIR、REG等，常见的文件类型<ul>
<li>（1）DIR：表示目录</li>
<li>（2）CHR：表示字符类型</li>
<li>（3）BLK：块设备类型</li>
<li>（4）UNIX： UNIX 域套接字</li>
<li>（5）FIFO：先进先出 (FIFO) 队列</li>
<li>（6）IPv4：网际协议 (IP) 套接字</li>
</ul>
</li>
<li>DEVICE：指定磁盘的名称</li>
<li>SIZE：文件的大小</li>
<li>NODE：索引节点（文件在磁盘上的标识）</li>
<li>NAME：打开文件的确切名称</li>
</ul>
<h3 id="实例2：查看谁正在使用某个文件，也就是说查找某个文件相关的进程"><a href="#实例2：查看谁正在使用某个文件，也就是说查找某个文件相关的进程" class="headerlink" title="实例2：查看谁正在使用某个文件，也就是说查找某个文件相关的进程"></a>实例2：查看谁正在使用某个文件，也就是说查找某个文件相关的进程</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof /bin/bash</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># lsof /bin/bash</span></div><div class="line">COMMAND   PID USER  FD   TYPE DEVICE   SIZE    NODE NAME</div><div class="line">bash    24159 root txt    REG    8,2 801528 5368780 /bin/bash</div><div class="line">bash    24909 root txt    REG    8,2 801528 5368780 /bin/bash</div><div class="line">bash    24941 root txt    REG    8,2 801528 5368780 /bin/bash</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例3：递归查看某个目录的文件信息"><a href="#实例3：递归查看某个目录的文件信息" class="headerlink" title="实例3：递归查看某个目录的文件信息"></a>实例3：递归查看某个目录的文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof <span class="built_in">test</span>/test3</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cd /opt/soft/</span></div><div class="line">[root@localhost soft]<span class="comment"># lsof test/test3</span></div><div class="line">COMMAND   PID USER   FD   TYPE DEVICE SIZE    NODE NAME</div><div class="line">bash    24941 root  cwd    DIR    8,2 4096 2258872 <span class="built_in">test</span>/test3</div><div class="line">vi      24976 root  cwd    DIR    8,2 4096 2258872 <span class="built_in">test</span>/test3</div><div class="line">[root@localhost soft]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;使用了+D，对应目录下的所有子目录和文件都会被列出</p>
<h3 id="实例4：不使用-D选项，遍历查看某个目录的所有文件信息的方法"><a href="#实例4：不使用-D选项，遍历查看某个目录的所有文件信息的方法" class="headerlink" title="实例4：不使用+D选项，遍历查看某个目录的所有文件信息的方法"></a>实例4：不使用+D选项，遍历查看某个目录的所有文件信息的方法</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof |grep <span class="string">'test/test3'</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost soft]<span class="comment"># lsof |grep 'test/test3'</span></div><div class="line">bash      24941 root  cwd       DIR                8,2     4096    2258872 /opt/soft/<span class="built_in">test</span>/test3</div><div class="line">vi        24976 root  cwd       DIR                8,2     4096    2258872 /opt/soft/<span class="built_in">test</span>/test3</div><div class="line">vi        24976 root    4u      REG                8,2    12288    2258882 /opt/soft/<span class="built_in">test</span>/test3/.log2013.log.swp</div><div class="line">[root@localhost soft]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例5：列出某个用户打开的文件信息"><a href="#实例5：列出某个用户打开的文件信息" class="headerlink" title="实例5：列出某个用户打开的文件信息"></a>实例5：列出某个用户打开的文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -u username</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-u 选项，u其实是user的缩写</p>
<h3 id="实例6：列出某个程序进程所打开的文件信息"><a href="#实例6：列出某个程序进程所打开的文件信息" class="headerlink" title="实例6：列出某个程序进程所打开的文件信息"></a>实例6：列出某个程序进程所打开的文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -c mysql</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-c 选项将会列出所有以mysql这个进程开头的程序的文件，其实你也可以写成 lsof | grep mysql, 但是第一种方法明显比第二种方法要少打几个字符了</p>
<h3 id="实例7：列出多个进程多个打开的文件信息"><a href="#实例7：列出多个进程多个打开的文件信息" class="headerlink" title="实例7：列出多个进程多个打开的文件信息"></a>实例7：列出多个进程多个打开的文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -c mysql -c apache</div></pre></td></tr></table></figure>
<h3 id="实例8：列出某个用户以及某个进程所打开的文件信息"><a href="#实例8：列出某个用户以及某个进程所打开的文件信息" class="headerlink" title="实例8：列出某个用户以及某个进程所打开的文件信息"></a>实例8：列出某个用户以及某个进程所打开的文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof  -u <span class="built_in">test</span> -c mysql</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用户与进程可相关，也可以不相关</p>
<h3 id="实例9：列出除了某个用户外的被打开的文件信息"><a href="#实例9：列出除了某个用户外的被打开的文件信息" class="headerlink" title="实例9：列出除了某个用户外的被打开的文件信息"></a>实例9：列出除了某个用户外的被打开的文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -u ^root</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;^这个符号在用户名之前，将会把是root用户打开的进程不让显示</p>
<h3 id="实例10：通过某个进程号显示该进行打开的文件"><a href="#实例10：通过某个进程号显示该进行打开的文件" class="headerlink" title="实例10：通过某个进程号显示该进行打开的文件"></a>实例10：通过某个进程号显示该进行打开的文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -p 1</div></pre></td></tr></table></figure>
<h3 id="实例11：列出多个进程号对应的文件信息"><a href="#实例11：列出多个进程号对应的文件信息" class="headerlink" title="实例11：列出多个进程号对应的文件信息"></a>实例11：列出多个进程号对应的文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -p 1,2,3</div></pre></td></tr></table></figure>
<h3 id="实例12：列出除了某个进程号，其他进程号所打开的文件信息"><a href="#实例12：列出除了某个进程号，其他进程号所打开的文件信息" class="headerlink" title="实例12：列出除了某个进程号，其他进程号所打开的文件信息"></a>实例12：列出除了某个进程号，其他进程号所打开的文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -p ^1</div></pre></td></tr></table></figure>
<h3 id="实例13：列出所有的网络连接"><a href="#实例13：列出所有的网络连接" class="headerlink" title="实例13：列出所有的网络连接"></a>实例13：列出所有的网络连接</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -i</div></pre></td></tr></table></figure>
<h3 id="实例14：列出所有tcp-网络连接信息"><a href="#实例14：列出所有tcp-网络连接信息" class="headerlink" title="实例14：列出所有tcp 网络连接信息"></a>实例14：列出所有tcp 网络连接信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -i tcp</div></pre></td></tr></table></figure>
<h3 id="实例15：列出所有udp网络连接信息"><a href="#实例15：列出所有udp网络连接信息" class="headerlink" title="实例15：列出所有udp网络连接信息"></a>实例15：列出所有udp网络连接信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -i udp</div></pre></td></tr></table></figure>
<h3 id="实例16：列出谁在使用某个端口"><a href="#实例16：列出谁在使用某个端口" class="headerlink" title="实例16：列出谁在使用某个端口"></a>实例16：列出谁在使用某个端口</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -i :3306</div></pre></td></tr></table></figure>
<h3 id="实例17：列出谁在使用某个特定的udp端口"><a href="#实例17：列出谁在使用某个特定的udp端口" class="headerlink" title="实例17：列出谁在使用某个特定的udp端口"></a>实例17：列出谁在使用某个特定的udp端口</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -i udp:55</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;或者：特定的tcp端口</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -i tcp:80</div></pre></td></tr></table></figure>
<h3 id="实例18：列出某个用户的所有活跃的网络端口"><a href="#实例18：列出某个用户的所有活跃的网络端口" class="headerlink" title="实例18：列出某个用户的所有活跃的网络端口"></a>实例18：列出某个用户的所有活跃的网络端口</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -a -u <span class="built_in">test</span> -i</div></pre></td></tr></table></figure>
<h3 id="实例19：列出所有网络文件系统"><a href="#实例19：列出所有网络文件系统" class="headerlink" title="实例19：列出所有网络文件系统"></a>实例19：列出所有网络文件系统</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -N</div></pre></td></tr></table></figure>
<h3 id="实例20：域名socket文件"><a href="#实例20：域名socket文件" class="headerlink" title="实例20：域名socket文件"></a>实例20：域名socket文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -u</div></pre></td></tr></table></figure>
<h3 id="实例21：某个用户组所打开的文件信息"><a href="#实例21：某个用户组所打开的文件信息" class="headerlink" title="实例21：某个用户组所打开的文件信息"></a>实例21：某个用户组所打开的文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -g 5555</div></pre></td></tr></table></figure>
<h3 id="实例22：根据文件描述列出对应的文件信息"><a href="#实例22：根据文件描述列出对应的文件信息" class="headerlink" title="实例22：根据文件描述列出对应的文件信息"></a>实例22：根据文件描述列出对应的文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">lsof -d description(like 2)</div><div class="line">例如：lsof  -d  txt</div><div class="line">例如：lsof  -d  1</div><div class="line">例如：lsof  -d  2</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0表示标准输入，1表示标准输出，2表示标准错误，从而可知：所以大多数应用程序所打开的文件的 FD 都是从 3 开始</p>
<h3 id="实例23：根据文件描述范围列出文件信息"><a href="#实例23：根据文件描述范围列出文件信息" class="headerlink" title="实例23：根据文件描述范围列出文件信息"></a>实例23：根据文件描述范围列出文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -d 2-3</div></pre></td></tr></table></figure>
<h3 id="实例24：列出COMMAND列中包含字符串”-sshd”，且文件描符的类型为txt的文件信息"><a href="#实例24：列出COMMAND列中包含字符串”-sshd”，且文件描符的类型为txt的文件信息" class="headerlink" title="实例24：列出COMMAND列中包含字符串” sshd”，且文件描符的类型为txt的文件信息"></a>实例24：列出COMMAND列中包含字符串” sshd”，且文件描符的类型为txt的文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -c sshd -a -d txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost soft]<span class="comment"># lsof -c sshd -a -d txt</span></div><div class="line">COMMAND   PID USER  FD   TYPE DEVICE   SIZE    NODE NAME</div><div class="line">sshd     2756 root txt    REG    8,2 409488 1027867 /usr/sbin/sshd</div><div class="line">sshd    24155 root txt    REG    8,2 409488 1027867 /usr/sbin/sshd</div><div class="line">sshd    24905 root txt    REG    8,2 409488 1027867 /usr/sbin/sshd</div><div class="line">sshd    24937 root txt    REG    8,2 409488 1027867 /usr/sbin/sshd</div><div class="line">[root@localhost soft]<span class="comment"># </span></div><div class="line">[root@localhost soft]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例25：列出被进程号为1234的进程所打开的所有IPV4-network-files"><a href="#实例25：列出被进程号为1234的进程所打开的所有IPV4-network-files" class="headerlink" title="实例25：列出被进程号为1234的进程所打开的所有IPV4 network files"></a>实例25：列出被进程号为1234的进程所打开的所有IPV4 network files</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -i 4 -a -p 1234</div></pre></td></tr></table></figure>
<h3 id="实例26：列出目前连接主机peida-linux上端口为：20，21，22，25，53，80相关的所有文件信息，且每隔3秒不断的执行lsof指令"><a href="#实例26：列出目前连接主机peida-linux上端口为：20，21，22，25，53，80相关的所有文件信息，且每隔3秒不断的执行lsof指令" class="headerlink" title="实例26：列出目前连接主机peida.linux上端口为：20，21，22，25，53，80相关的所有文件信息，且每隔3秒不断的执行lsof指令"></a>实例26：列出目前连接主机peida.linux上端口为：20，21，22，25，53，80相关的所有文件信息，且每隔3秒不断的执行lsof指令</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -i @peida.linux:20,21,22,25,53,80  -r  3</div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/43/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/42/">42</a><a class="page-number" href="/page/43/">43</a><span class="page-number current">44</span><a class="page-number" href="/page/45/">45</a><a class="page-number" href="/page/46/">46</a><span class="space">&hellip;</span><a class="page-number" href="/page/63/">63</a><a class="extend next" rel="next" href="/page/45/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2017 失落的乐章
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>