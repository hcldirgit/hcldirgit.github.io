<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>失落的乐章</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="失落的乐章的Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="失落的乐章">
<meta property="og:url" content="https://hcldirgit.github.io/page/53/index.html">
<meta property="og:site_name" content="失落的乐章">
<meta property="og:description" content="失落的乐章的Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="失落的乐章">
<meta name="twitter:description" content="失落的乐章的Blog">
  
    <link rel="alternative" href="/atom.xml" title="失落的乐章" type="application/atom+xml">
  
  
    <link rel="icon" href="https://hcldirgit.github.io/images/0.png">
  
  <link rel="stylesheet" href="/css/style.css">
  
  
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85415703-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://hcldirgit.github.io/images/0.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">失落的乐章</a></h1>
		</hgroup>

		
		<p class="header-subtitle">技术面前，永远都是学生。</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Ansible/" style="font-size: 10.42px;">Ansible</a> <a href="/tags/Apache/" style="font-size: 18.33px;">Apache</a> <a href="/tags/Cacti/" style="font-size: 11.67px;">Cacti</a> <a href="/tags/DNS/" style="font-size: 13.33px;">DNS</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/FTP/" style="font-size: 11.25px;">FTP</a> <a href="/tags/Git/" style="font-size: 10.83px;">Git</a> <a href="/tags/HA集群/" style="font-size: 11.67px;">HA集群</a> <a href="/tags/Hadoop/" style="font-size: 12.5px;">Hadoop</a> <a href="/tags/Jenkins/" style="font-size: 10.42px;">Jenkins</a> <a href="/tags/LAMP/" style="font-size: 19.58px;">LAMP</a> <a href="/tags/LNMP/" style="font-size: 17.08px;">LNMP</a> <a href="/tags/LVS/" style="font-size: 16.67px;">LVS</a> <a href="/tags/Linux/" style="font-size: 19.17px;">Linux</a> <a href="/tags/Linux命令/" style="font-size: 20px;">Linux命令</a> <a href="/tags/Linux安全/" style="font-size: 14.17px;">Linux安全</a> <a href="/tags/Memcached/" style="font-size: 11.25px;">Memcached</a> <a href="/tags/MongoDB/" style="font-size: 15.42px;">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 17.5px;">MySQL</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/Nagios/" style="font-size: 11.67px;">Nagios</a> <a href="/tags/Nginx/" style="font-size: 17.92px;">Nginx</a> <a href="/tags/OpenStack/" style="font-size: 11.25px;">OpenStack</a> <a href="/tags/Php/" style="font-size: 14.58px;">Php</a> <a href="/tags/Puppet/" style="font-size: 11.25px;">Puppet</a> <a href="/tags/Python/" style="font-size: 14.58px;">Python</a> <a href="/tags/Redis/" style="font-size: 16.25px;">Redis</a> <a href="/tags/Resin/" style="font-size: 10px;">Resin</a> <a href="/tags/Saltstack/" style="font-size: 10px;">Saltstack</a> <a href="/tags/Samba/" style="font-size: 12.08px;">Samba</a> <a href="/tags/Squid/" style="font-size: 14.58px;">Squid</a> <a href="/tags/Tomcat/" style="font-size: 13.75px;">Tomcat</a> <a href="/tags/Zabbix/" style="font-size: 15.83px;">Zabbix</a> <a href="/tags/haproxy/" style="font-size: 12.5px;">haproxy</a> <a href="/tags/keepalived/" style="font-size: 12.92px;">keepalived</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/shell练习/" style="font-size: 18.75px;">shell练习</a> <a href="/tags/正则表达式/" style="font-size: 12.92px;">正则表达式</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">失落的乐章</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://hcldirgit.github.io/images/0.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">失落的乐章</h1>
			</hgroup>
			
			<p class="header-subtitle">技术面前，永远都是学生。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-1. Linux 基础/46.Linux支持中文" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/46.Linux支持中文/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.328Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/46.Linux支持中文/">
        Linux支持中文
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>修改/root/.bash_profile文件，增加export LANG=zh_CN.GB18030对于其他用户，也必须相应修改该文件使用该方法时putty能显示中文，但桌面系统是英文，而且所有的网页中文显示还是乱码</p>
</li>
<li><p>引用:修改/etc/sysconfig/i18n文件</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#LANG="en_US.UTF-8"</span></div><div class="line"><span class="comment">#SUPPORTED="en_US.UTF-8:en_US:en"</span></div><div class="line"><span class="comment">#SYSFONT="latarcyrheb-sun16"</span></div></pre></td></tr></table></figure>
<p>改为</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">LANG=<span class="string">"zh_CN.GB18030"</span></div><div class="line">LANGUAGE=<span class="string">"zh_CN.GB18030:zh_CN.GB2312:zh_CN"</span></div><div class="line">SUPPORTED=<span class="string">"zh_CN.GB18030:zh_CN:zh"</span></div><div class="line">SYSFONT=<span class="string">"lat0-sun16"</span></div><div class="line">SYSFONTACM=<span class="string">"8859-15"</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/19. tmpfs 是什么" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/19. tmpfs 是什么/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.317Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/19. tmpfs 是什么/">
        tmpfs 是什么
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;我们df 的时候会看到一行 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># df</span></div><div class="line">Filesystem                   1K-blocks    Used Available Use% Mounted on</div><div class="line">/dev/mapper/VolGroup-lv_root  18102140 1429428  15753160   9% /</div><div class="line">tmpfs                           146844       0    146844   0% /dev/shm</div><div class="line">/dev/sda1                       495844   31636    438608   7% /boot</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;它的大小为 146844，这个数值其实正好是内存大小的一半：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># free</span></div><div class="line">             total       used       free     shared    buffers     cached</div><div class="line">Mem:       293692     203528      90164          0      15880     125184</div><div class="line">-/+ buffers/cache:      62464     231228</div><div class="line">Swap:      2064376          0    2064376</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这个tmpfs到底是什么呢? 其实它是一个临时文件系统，驻留于内存中，使用它可以提高文件访问速度，并能保证重启时会自动清除这些文件。只不过驻留在这里的文件是容易丢失的，因为内存数据是不会像硬盘中的数据那样可以永久存在。知道了tmpfs的这个特性后，我们就可以把一些对读写性能要求较高，但是数据又可以丢失的这样的数据就可以保存在/dev/shm中，你也可以认为这里就是内存。既然/dev/shm是内存，那么想当然，我们不能把全部内存都挂载到这个目录下，系统默认只分一半是有道理的。那么我们能不能更改这个tmpfs的大小？ 当然可以！</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># mount -o remount,size=180M tmpfs /dev/shm</span></div><div class="line">[root@localhost ~]<span class="comment"># df -h</span></div><div class="line">Filesystem                    Size  Used Avail Use% Mounted on</div><div class="line">/dev/mapper/VolGroup-lv_root   18G  1.4G   16G   9% /</div><div class="line">tmpfs                         180M     0  180M   0% /dev/shm</div><div class="line">/dev/sda1                     485M   31M  429M   7% /boot</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;所以说，这个tmpfs是可以更改的，但这种办法知识临时的，重启后还会恢复内存大小的一半。那如何让他永久生效？、</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># vi /etc/fstab  //编辑/etc/fstab， 把tmpfs这一行改为：</span></div><div class="line">tmpfs                   /dev/shm                tmpfs   defaults,size=180M        0 0</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这样就可以啦。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/5. Linux 文件权限" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/5. Linux 文件权限/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.316Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/5. Linux 文件权限/">
        Linux 文件权限
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;一个文件都有一个所有者, 表示该文件是谁创建的. 同时, 该文件还有一个组编号, 表示该文件所属的组, 一般为文件所有者所属的组. 如果是一个可执行文件, 那么在执行时, 一般该文件只拥有调用该文件的用户具有的权限. 而setuid, setgid 可以来改变这种设置.</p>
<h2 id="setuid、setgid、sticky-bit-说明"><a href="#setuid、setgid、sticky-bit-说明" class="headerlink" title="setuid、setgid、sticky bit 说明"></a>setuid、setgid、sticky bit 说明</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>setuid</strong>：用于二进制可执行文件，设置使文件在执行阶段具有文件所有者的权限。典型的文件是 <code>/usr/bin/passwd</code> ，它更改用户的密码时是会更改 <code>/etc/passwd</code> 和 <code>/etc/shadow</code> 等文件的，这些文件默认普通用户没有写权限。如果一般用户执行该文件，则在执行过程中，该文件可以获得 root 权限，从而可以更改用户的密码。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>setgid</strong>：用于目录，用户在该目录下创建的文件都拥有与该目录相同的属组。当作用在文件上时，作用和 <code>suid</code> 类似，让执行该文件的用户临时拥有属组的权限，目录被设置该位后，任何用户在此目录下创建的文件都具有和该目录所属的组相同的组。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>sticky bit</strong>：该位可以理解为防删除位。一个文件是否可以被某用户删除，主要取决于该文件所属的组是否对该用户具有写权限。如果没有写权限，则这个目录下的所有文件都不能被删除，同时也不能添加新的文件。如果希望用户能够添加文件但同时不能删除文件，则可以对文件使用 <code>sticky bit</code> 位。设置该位后，就算用户对目录具有写权限，也不能删除该文件。</p>
<h2 id="权限修改操作"><a href="#权限修改操作" class="headerlink" title="权限修改操作"></a>权限修改操作</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;操作这些标志与操作文件权限的命令是一样的，都是 <code>chmod</code> 。有两种方法来操作：</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>1.</strong> 如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">chmod u+s  temp    -- 为temp文件加上setuid标志. (setuid 只对文件有效)</div><div class="line">chmod g+s tempdir  -- 为tempdir目录加上setgid标志（可以作用在文件上，效果和suid类似，也可以作用在目录）</div><div class="line">chmod o+t tempdir  -- 为tempdir目录加上sticky标志 (sticky只对目录有效)</div></pre></td></tr></table></figure>
<p> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>2.</strong> 用八进制方式。对一般文件通过三组八进制数字来设置标志，如 666 ，777 ，644 等。如果设置这些特殊标志，则在这组数字之外外加一组八进制数字。如 4666 ， 2777 等。这一组八进制数字三围的意义如下：</p>
<ul>
<li>a - setuid 位，如果该位为 1，则表示设置 setuid</li>
<li>b - setgid 位，如果该位为 1，则表示设置 setgid</li>
<li>c - sticky 位，如果该位为 1，则表示设置 sticky</li>
</ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;也就是说，如果有特殊权限是，第一位数字可以是 0，1（–t），2（-s-），3（-st），4（s–），5（s-t），6（ss-），7（sst）</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;设置完这些标志后，可以用 <code>ls l</code> 来查看。如果有这些标志，则会在原来的执行标志位置上显示。如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rwsrw-r--    表示有setuid标志</div><div class="line">rwxrwsrw-    表示有setgid标志</div><div class="line">rwxrw-rwt    表示有sticky标志</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;那么原来的执行标志 <code>x</code> ，系统是这样规定的。如果本来该为上有 <code>x</code> ，则这些特殊表示显示为小写字母（s ，s ，t）。否则，显示为大写字母（S , S ,T）</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/72. 进程与线程" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/72. 进程与线程/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.315Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/72. 进程与线程/">
        进程与线程
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;计算机上运行的程序都会有进程，你可以打开windows的进程管理器来查看系统所有的进程信息，而linux可以使用top或者ps来查看所有的进程信息。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;线程是比进程还要细分的一个单元，它在进程里面，一个进程下面可以有多个线程。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;下表为进程和线程的主要区别：</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>进程</th>
<th>线程</th>
</tr>
</thead>
<tbody>
<tr>
<td>unit</td>
<td>分配系统资源(cpu时间、内存等）的基本单位</td>
<td>进程内的一个执行单元，CPU调度和分派的基本单位</td>
</tr>
<tr>
<td>地址空间</td>
<td>有独立的地址空间</td>
<td>和同进程内的其他线程共享地址空间</td>
</tr>
<tr>
<td>健壮性</td>
<td>很健壮，一个进程崩溃对其他进程没有影响</td>
<td>不健壮，相同进程内，一个线程崩溃（意味着进程崩溃），其他线程也会崩溃</td>
</tr>
<tr>
<td>调度（切换）</td>
<td>进程上下文切换，资源耗费大</td>
<td>轻量级进程切换，不用重新加载内存，一个进程内的线程切换要比不同进程内的线程切换快5-50倍</td>
</tr>
<tr>
<td>创建</td>
<td>拷贝父进程的地址空间，耗时较长</td>
<td>直接创建，比进程创建要快10-100倍</td>
</tr>
<tr>
<td>通信</td>
<td>进程间通信，用到IPC通信机制（共享内存、socket、信号、管道等）</td>
<td>可以直接和相同进程内的其他线程通信</td>
</tr>
<tr>
<td>编程容易</td>
<td>多进程间耦合性较小，比较容易</td>
<td>线程间耦合度较大，共享全局变量，需要考虑关键变量的互斥操作</td>
</tr>
</tbody>
</table>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/11. Linux usermod 修改用户属性" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/11. Linux usermod 修改用户属性/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.315Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/11. Linux usermod 修改用户属性/">
        Linux 修改用户属性
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;us<br>ermod 命令修改系统帐户文件来反映通过命令行指定的变化    </p>
<h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-a|–append&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;##把用户追加到某些组中，仅与-G选项一起使用 </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-c|–comment&#160;&#160;&#160;&#160;&#160;&#160;&#160;##修改/etc/passwd文件第五段comment</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-d|–home&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;##修改用户的家目录通常和-m选项一起使用 </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-e|–expiredate&#160;&#160;&#160;&#160;&#160;&#160;##指定用户帐号禁用的日期，格式YY-MM-DD </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-f|–inactive&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ##用户密码过期多少天后采用就禁用该帐号，0表示密码已过期就禁用帐号，-1表示禁用此功能，默认值是-1 </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-g|–gid&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ##修改用户的gid，改组一定存在</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-G|–groups&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;##把用户追加到某些组中，仅与-a选项一起使用 </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-l|–login&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;##修改用户的登录名称</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-L|–lock&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;##锁定用户的密码 </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-m|–move-home&#160;&#160;&#160;##修改用户的家目录通常和-d选项一起使用 </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-s|–shell&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;##修改用户的shell </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-u|–uid&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;##修改用户的uid，该uid必须唯一 </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-U|–unlock&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;##解锁用户的密码 </p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><h3 id="1-新建用户-test-，密码-test-，另外添加-usertest-组"><a href="#1-新建用户-test-，密码-test-，另外添加-usertest-组" class="headerlink" title="1.新建用户 test ，密码 test ，另外添加 usertest 组"></a>1.新建用户 test ，密码 test ，另外添加 usertest 组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#useradd test </span></div><div class="line"><span class="comment">#echo "test" | passwd --stdin test </span></div><div class="line"><span class="comment">#groupadd usertest</span></div></pre></td></tr></table></figure>
<h3 id="2-把-test-用户加入-usertest-组"><a href="#2-把-test-用户加入-usertest-组" class="headerlink" title="2.把 test 用户加入 usertest 组"></a>2.把 test 用户加入 usertest 组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#usermod -aG usertest test ##多个组之间用空格隔开 </span></div><div class="line"><span class="comment">#id test </span></div><div class="line">uid=500(<span class="built_in">test</span>) gid=500(<span class="built_in">test</span>) groups=500(<span class="built_in">test</span>),501(usertest)</div></pre></td></tr></table></figure>
<h3 id="3-修改-test-用户的家目录"><a href="#3-修改-test-用户的家目录" class="headerlink" title="3.修改 test 用户的家目录"></a>3.修改 test 用户的家目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#usermod -md /home/usertest </span></div><div class="line"><span class="comment">#ls /home </span></div><div class="line">usertest</div></pre></td></tr></table></figure>
<h3 id="4-修改用户名"><a href="#4-修改用户名" class="headerlink" title="4.修改用户名"></a>4.修改用户名</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#usermod -l urchin(新用户名称)  test(原来用户名称) </span></div><div class="line"><span class="comment">#id urchin </span></div><div class="line">uid=500(urchin) gid=500(<span class="built_in">test</span>) groups=500(<span class="built_in">test</span>),501(usertest)</div></pre></td></tr></table></figure>
<h3 id="5-锁定-urchin-的密码"><a href="#5-锁定-urchin-的密码" class="headerlink" title="5.锁定 urchin 的密码"></a>5.锁定 urchin 的密码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># sed -n '$p' /etc/shadow </span></div><div class="line">urchin:<span class="variable">$6</span><span class="variable">$1PwPVBn5</span><span class="variable">$o</span>.MIEYONzURQPvn/YqSp69kt2CIASvXhOnjv/t \</div><div class="line">Z5m4NN6bJyLjCG7S6vmji/PFDfbyITdm1WmtV45CfHV5vux/:15594:0:99999:7::: </div><div class="line"><span class="comment">#usermod -L urchin </span></div><div class="line"><span class="comment"># sed -n '$p' /etc/shadow </span></div><div class="line">urchin:!<span class="variable">$6</span><span class="variable">$1PwPVBn5</span><span class="variable">$o</span>.MIEYONzURQPvn/YqSp69kt2CIASvXhOnjv/t \</div><div class="line">Z5m4NN6bJyLjCG7S6vmji/PFDfbyITdm1WmtV45CfHV5vux/:15594:0:99999:7:::</div></pre></td></tr></table></figure>
<h3 id="6-解锁-urchin-的密码"><a href="#6-解锁-urchin-的密码" class="headerlink" title="6.解锁 urchin 的密码"></a>6.解锁 urchin 的密码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#usermod -U urchin </span></div><div class="line"><span class="comment"># sed -n '$p' /etc/shadow </span></div><div class="line">urchin:<span class="variable">$6</span><span class="variable">$1PwPVBn5</span><span class="variable">$o</span>.MIEYONzURQPvn/YqSp69kt2CIASvXhOnjv/t \ </div><div class="line">Z5m4NN6bJyLjCG7S6vmji/PFDfbyITdm1WmtV45CfHV5vux/:15594:0:99999:7:::</div></pre></td></tr></table></figure>
<h3 id="7-修改用户的-shell"><a href="#7-修改用户的-shell" class="headerlink" title="7.修改用户的 shell"></a>7.修改用户的 shell</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#sed '$!d' /etc/passwd </span></div><div class="line">urchin:x:500:500::/home/usertest:/bin/bash </div><div class="line"><span class="comment">#usermod -s /bin/sh urchin </span></div><div class="line"><span class="comment">#sed -n '$p' /etc/passwd </span></div><div class="line">urchin:x:500:500::/home/usertest:/bin/sh</div></pre></td></tr></table></figure>
<h3 id="8-修改用户的-UID"><a href="#8-修改用户的-UID" class="headerlink" title="8.修改用户的 UID"></a>8.修改用户的 UID</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#usermod -u 578 urchin (UID必须唯一) </span></div><div class="line"><span class="comment">#id urchin </span></div><div class="line">uid=578(urchin) gid=500(<span class="built_in">test</span>) groups=500(<span class="built_in">test</span>),501(usertest)</div></pre></td></tr></table></figure>
<h3 id="9-修改用户的-GID"><a href="#9-修改用户的-GID" class="headerlink" title="9.修改用户的 GID"></a>9.修改用户的 GID</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#groupadd -g 578 test1 </span></div><div class="line"><span class="comment">#usermod -g 578 urchin (578组一定要存在) </span></div><div class="line"><span class="comment">#id urchin </span></div><div class="line">uid=578(urchin) gid=578(test1) groups=578(test1),501(usertest)</div></pre></td></tr></table></figure>
<h3 id="10-指定帐号过期日期"><a href="#10-指定帐号过期日期" class="headerlink" title="10.指定帐号过期日期"></a>10.指定帐号过期日期</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># sed -n '$p' /etc/shadow </span></div><div class="line">urchin:<span class="variable">$6</span><span class="variable">$1PwPVBn5</span><span class="variable">$o</span>.MIEYONzURQPvn/YqSp69kt2CIASvXhOnjv/t \ </div><div class="line">Z5m4NN6bJyLjCG7S6vmji/PFDfbyITdm1WmtV45CfHV5vux/:15594:0:99999:7::: </div><div class="line"><span class="comment"># usermod -e 2012-09-11 urchin </span></div><div class="line"><span class="comment"># sed -n '$p' /etc/shadow </span></div><div class="line">urchin:<span class="variable">$6</span><span class="variable">$1PwPVBn5</span><span class="variable">$o</span>.MIEYONzURQPvn/YqSp69kt2CIASvXhOnjv/t \ </div><div class="line">Z5m4NN6bJyLjCG7S6vmji/PFDfbyITdm1WmtV45CfHV5vux/:15594:0:99999:7::15594:</div></pre></td></tr></table></figure>
<h3 id="11-指定用户帐号密码过期多少天后，禁用该帐号"><a href="#11-指定用户帐号密码过期多少天后，禁用该帐号" class="headerlink" title="11.指定用户帐号密码过期多少天后，禁用该帐号"></a>11.指定用户帐号密码过期多少天后，禁用该帐号</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># usermod -f 0 urchin </span></div><div class="line"><span class="comment"># sed -n '$p' /etc/shadow </span></div><div class="line">urchin:<span class="variable">$6</span><span class="variable">$1PwPVBn5</span><span class="variable">$o</span>.MIEYONzURQPvn/YqSp69kt2CIASvXhOnjv/t \ </div><div class="line">Z5m4NN6bJyLjCG7S6vmji/PFDfbyITdm1WmtV45CfHV5vux/:15594:0:99999:7:0:15594:</div></pre></td></tr></table></figure>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;usermod 不允许改变正在线上的使用者帐号名称。当 usermod 用来改变 userID ,必须确认这名 user 没在电脑上执行任何程序</p>
<p>/etc/passwd<br>user_name:x:uid:gid:commnet:home:shell        </p>
<p>/etc/shadow<br>username:passwd:lastchg:min:max:warn:inactive:expire:flag<br>–用户名<br>–密码<br>–从1970年1月1日起到上次修改密码所经过的天数<br>–密码再过几天可以被变更(0表示随时可以改变)<br>–密码再过几天必须被变更(99999表示永不过期)<br>–密码过期前几天提醒用户(默认为一周)<br>–密码过期几天后帐号被禁用<br>–从1970年1月1日算起，多少天后账号失效      </p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/29. vim百科" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/29. vim百科/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.314Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/29. vim百科/">
        vim百科
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Vim是从vi发展出来的一个文本编辑器。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。和Emacs并列成为类Unix系统用户最喜欢的编辑器。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Vim的第一个版本由布莱姆·米勒在1991年发布。最初的简称是Vi IMitation，随着功能的不断增加，正式名称改成了Vi IMproved。现在是在开放源代码方式下发行的自由软件。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;布莱姆·米勒在80年代末购入他的Amiga计算机时，Amiga上还没有他最常用的编辑器vi。Bram从一个开源的vi复制Stevie开始，开发了Vim的1.0版本。最初的目标只是完全复制vi的功能，那个时候的Vim是Vi IMitation（模拟）的简称。1991年Vim 1.14版被”Fred Fish Disk #591”这个Amiga用的免费软体集所收录了。1992年1.22版本的Vim被移植到了UNIX和MS-DOS上。从那个时候开始，Vim的全名就变成Vi IMproved（改良）了。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在这之后，Vim加入了不计其数的新功能。做为第一个里程碑的是1994年的3.0版本加入了多视窗编辑模式（分区视窗）。从那之后，同一萤幕可以显示的Vim编辑文件数可以不止一个了。1996年发布的Vim 4.0是第一个利用GUI（图形用户界面）的版本。1998年5.0版本的Vim加入了highlight（语法高亮）功能。2001年的Vim 6.0版本加入了代码折叠、插件、多国语言支持、垂直分区视窗等功能。2006 年5月发布的Vim 7.0版更加入了拼字检查、上下文相关补全，标签页编辑等新功能。2008年8月发布的Vim 7.2，合并了Vim 7.1以来的所有修正补丁，并且加入了脚本的浮点数支持。现在最新的版本是2010年8月发布的Vim 7.3，这个版本除了包含最新修正的补丁之外，还加入了“永久撤销”、“Blowfish算法加密”、“文本隐藏”和“Lua以及Python3的接口”等新功能。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;目前, VIM是按照VIM许可证发布的开源软件，这个协议兼容GPL。它的协议中包含一些慈善条款，建议用户向荷兰ICCF捐款，用于帮助乌干达的艾滋病患者. VIM启动时会显示Help poor children in Uganda!的字样，在中文版本中则是请帮助乌干达的可怜孩童!.</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;对于大多数用户来说，Vim有着一个比较陡峭的学习曲线。这意味着开始学习的时候可能会进展缓慢，但是一旦掌握一些基本操作之后，能大幅度提高编辑效率。为了帮助学习，Vim为初学者准备了Vim教学。通常可以在Unix系统命令行下输入”vimtutor”或者点击Windows系统桌面上的Vim教学图标进入。在Vim用户手册 中更加详细的描述了Vim的基础和进阶功能。可以在Vim中输入”:help user-manual”进入用户手册。手册除了原始的英文版本之外，也被志愿者翻译成了各国文字，其中包括中文。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;新用户也应该学习Vim的帮助系统。可以在Vim中输入不带参数的”help”来阅读主帮助文件。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;从vi演生出来的Vim具有多种模式，这种独特的设计容易使初学者产生混淆。几乎所有的编辑器都会有插入和执行命令两种模式，并且大多数的编辑器使用了与Vim截然不同的方式：命令目录（鼠标或者键盘驱动），组合键（通常通过control键（CTRL）和alt键（ALT）组成）或者鼠标输入。Vim和vi一样，仅仅通过键盘来在这些模式之中切换。这就使得Vim可以不用进行菜单或者鼠标操作，并且最小化组合键的操作。对文字录入员或者程序员可以大大增强速度和效率。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/48.Linux下比较两个时间的时间差" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/48.Linux下比较两个时间的时间差/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.313Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/48.Linux下比较两个时间的时间差/">
        Linux下比较两个时间的时间差
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;有一个特殊的需求，知道两个文件的最后修改时间，现在要比较这两个时间的时间差是不是在一个阀值内？这就需要求出连个时间的时间差。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在Linux下，有一个方法可以将基础时间转为时间戳</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例如，2017-07-13 10:01:05 这个时间的时间戳为</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># date +%s -d '2017-07-13 10:01:05'</span></div><div class="line">1499911265</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;根据这个时间戳，就可以求出两个时间的时间差了。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;比如，求2017-07-13 10:01:05 和 2017-07-13 11:01:05两个时间的时间差</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># a=`date +%s -d '2017-07-13 10:01:05'`</span></div><div class="line">[root@localhost ~]<span class="comment"># b=`date +%s -d '2017-07-13 11:01:05'` </span></div><div class="line">[root@localhost ~]<span class="comment"># time=$[$b-$a]</span></div><div class="line">[root@localhost ~]<span class="comment"># echo $time</span></div><div class="line">3600</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;结果就是3600，可见它的单位是秒，如果求分钟，直接除以60即可。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/22. parted 分区 GPT格式" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/22. parted 分区 GPT格式/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.312Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/22. parted 分区 GPT格式/">
        parted 分区 GPT 格式
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>我们讲的fdisk分区工具，它的分区格式为MBR，特点是，最多分4个主分区，磁盘大小不能超过2T。而GPT分区格式，突破了这些限制，它没有主分区、扩展分区、逻辑分区之分，在一块磁盘上最多可以分128个分区出来，支持大于2T的分区，最大卷可达18EB。</strong> 相信，随着存储级别的升级，将来的分区格式逐渐会淘汰MBR，而GPT成为主流。</p>
<h2 id="parted-工具常用功能："><a href="#parted-工具常用功能：" class="headerlink" title="parted 工具常用功能："></a>parted 工具常用功能：</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;当在命令行输入parted后，进入parted命令的交互模式。输入help会显示帮助信息。下面就简单介绍一下常用的功能</p>
<ol>
<li><p><strong>check</strong> 简单检查文件系统。建议用其他命令检查文件系统，比如fsck</p>
</li>
<li><p><strong>help</strong> 显示帮助信息</p>
</li>
<li><p><strong>mklabel</strong> 创建分区表， 即是使用msdos（MBR）还是使用gpt，或者是其他方式分区表</p>
</li>
<li><p><strong>mkfs</strong> 创建文件系统。该命令不支持ext3 格式，因此建议不使用，最好是用parted分好区，然后退出parted交互模式，用其他命令进行分区，比如：mkfs.ext3</p>
</li>
<li><p><strong>mkpart</strong> 创建新分区。<br>格式：</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkpart PART-TYPE  [FS-TYPE]  START  END</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PART-TYPE 类型主要有primary（主分区）, extended（扩展分区）, logical（逻辑区）. 扩展分区和逻辑分区只对msdos。<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;fs-type   文件系统类型，主要有fs32，NTFS，ext2，ext3等<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;start end 分区的起始和结束位置。</p>
<ol>
<li><p><strong>mkpartfs</strong> 建立分区及其文件系统。目前还不支持ext3文件系统，因此不建议使用该功能。最后是分好区后，退出parted，然后用其他命令建立文件系统。</p>
</li>
<li><p><strong>print</strong> 输出分区信息。该功能有3个选项，<br>free 显示该盘的所有信息，并显示磁盘剩余空间<br>number 显示指定的分区的信息<br>all 显示所有磁盘信息</p>
</li>
<li><p><strong>resize</strong> 调整指定的分区的大小。目前对ext3格式支持不是很好，所以不建议使用该功能。</p>
</li>
<li><p><strong>rescue</strong> 恢复不小心删除的分区。如果不小心用parted的rm命令删除了一个分区，那么可以通过rescue功能进行恢复。恢复时需要给出分区的起始和结束的位置。然后parted就会在给定的范围内去寻找，并提示恢复分区。</p>
</li>
<li><p><strong>rm</strong> 删除分区。命令格式 rm  number 。如：rm 3 就是将编号为3的分区删除</p>
</li>
<li><p><strong>select</strong> 选择设备。当输入parted命令后直接回车进入交互模式是，如果有多块硬盘，需要用select 选择要操作的硬盘。如：select /dev/sdb</p>
</li>
<li><p><strong>set</strong> 设置标记。更改指定分区编号的标志。标志通常有如下几种：boot  hidden   raid   lvm 等。<br>boot 为引导分区，hidden 为隐藏分区，raid 软raid，lvm 为逻辑分区。<br>如：set 3  boot  on   设置分区号3 为启动分区<br>注：以上内容为parted常用的功能，由于该工具目前对ext3支持得不是很好，因此有些功能无法应用，比如move（移动分区）和resize等。</p>
</li>
</ol>
<h2 id="parted分区功能事例。"><a href="#parted分区功能事例。" class="headerlink" title="parted分区功能事例。"></a>parted分区功能事例。</h2><ol>
<li>用命令模式 为/dev/sdb创建gpt类型文件分区表,并分500G分区。然后为该分区创建ext3文件系统。并将该分区挂载在/test文件夹下。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#  parted  /dev/sdb  mklabel     —创建分区表</span></div><div class="line"><span class="comment">#  parted  /dev/sdb  mkpart  ext3  0  500000    —创建500G分区/dev/sdb1</span></div><div class="line"><span class="comment"># mkfs.ext3  /dev/sdb1      —-将分区/dev/sdb1格式化成ext3格式文件系统</span></div><div class="line"><span class="comment"># mount  /dev/sdb1 /test   —将/dev/sdb1 挂载在/test下</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果让系统自动挂载/dev/sdb1 需手工编辑/etc/fstab文件。并在文件末尾添加如下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/dev/sdb1             /<span class="built_in">test</span>                ext3    defaults        0 0</div></pre></td></tr></table></figure>
<ol>
<li>创建大小为4G的交互分区。由于已经创建了500G的/dev/sdb1 ,因此再创建的分区为/dev/sdb2</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># parted /dev/sdb mkpart swap 500000 504000 —创建4G分区/dev/sdb2</span></div><div class="line"><span class="comment"># mkswap  /dev/sdb2   —-将/dev/sdb2创建为交换分区</span></div><div class="line"><span class="comment"># swapon /dev/sdb2   —-激活/dev/sdb2</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果让系统自动挂载/dev/sdb2这个交换分区，需手工编辑/etc/fstab文件。并在文件末尾添加如下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/dev/sdb2             swap                swap    defaults        0 0</div></pre></td></tr></table></figure>
<ol>
<li>恢复被误删除的分区(也可以参考testdisk命令)。由于parted直接写磁盘，因此一旦不小心删除了某一分区，建议立即用rescue恢复。下面通过事例来理解恢复过程。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># parted /dev/sdb mkpart ext3 504000 514000 —-创建10G分区/dev/sdb3</span></div><div class="line"><span class="comment"># mkfs.ext3 /dev/sdb3  —将/dev/sdb3格式化成ext3文件系统。</span></div><div class="line"><span class="comment"># parted /dev/sdb rm 3 —-删除/dev/sdb3</span></div><div class="line"><span class="comment"># parted /dev/sdb rescue 504000 514000    —依照屏幕提示，输入yes即可恢复被误删除分区</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/31. vim的设置详解" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/31. vim的设置详解/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.312Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/31. vim的设置详解/">
        vim的设置详解
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;vim通过一个叫vimrc的文件来进行设置</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;vimrc 配置文件存放位置：</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;系统vimrc在 /etc/vimrc</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用户的在 $HOME/.vimrc   这个默认不存在，需用户自定义创建。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;下面介绍vimrc中常用的配置选项，其中以”为开头的行为不生效的行，也就是说在vimrc配置文件中，它是以”为注释符号的：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">set</span> nobackup</div><div class="line"></div><div class="line"><span class="string">" 不要生成swap文件，当buffer被丢弃的时候隐藏它</span></div><div class="line"><span class="string">setlocal noswapfile</span></div><div class="line"><span class="string">set bufhidden=hide</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 字符间插入的像素行数目</div><div class="line"><span class="built_in">set</span> linespace=0</div><div class="line"></div><div class="line"><span class="string">" 增强模式中的命令行自动完成操作</span></div><div class="line"><span class="string">set wildmenu</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 在状态行上显示光标所在位置的行号和列号</div><div class="line"><span class="built_in">set</span> ruler</div><div class="line"><span class="built_in">set</span> rulerformat=%20(%2*%&lt;%f%=\ %m%r\ %3l\ %c\ %p%%%)</div><div class="line"></div><div class="line"><span class="string">" 命令行（在状态行下）的高度，默认为1，这里是2</span></div><div class="line"><span class="string">set cmdheight=2</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 使回格键（backspace）正常处理indent, eol, start等</div><div class="line"><span class="built_in">set</span> backspace=2</div><div class="line"></div><div class="line"><span class="string">" 允许backspace和光标键跨越行边界</span></div><div class="line"><span class="string">set whichwrap+=&lt;,&gt;,h,l</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 可以在buffer的任何地方使用鼠标（类似office中在工作区双击鼠标定位）</div><div class="line"><span class="built_in">set</span> mouse=a</div><div class="line"><span class="built_in">set</span> selection=exclusive</div><div class="line"><span class="built_in">set</span> selectmode=mouse,key</div><div class="line"></div><div class="line"><span class="string">" 启动的时候不显示那个援助索马里儿童的提示</span></div><div class="line"><span class="string">set shortmess=atI</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 通过使用: commands命令，告诉我们文件的哪一行被改变过</div><div class="line"><span class="built_in">set</span> report=0</div><div class="line"></div><div class="line"><span class="string">" 不让vim发出讨厌的滴滴声</span></div><div class="line"><span class="string">set noerrorbells</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 在被分割的窗口间显示空白，便于阅读</div><div class="line"><span class="built_in">set</span> fillchars=vert:\ ,stl:\ ,stlnc:\</div><div class="line"></div><div class="line"><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">"</span></div><div class="line"><span class="string">"</span> 搜索和匹配</div><div class="line"><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">"</span></div><div class="line"><span class="string">"</span> 高亮显示匹配的括号</div><div class="line"><span class="built_in">set</span> showmatch</div><div class="line"></div><div class="line"><span class="string">" 匹配括号高亮的时间（单位是十分之一秒）</span></div><div class="line"><span class="string">set matchtime=5</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 在搜索的时候忽略大小写</div><div class="line"><span class="built_in">set</span> ignorecase</div><div class="line"></div><div class="line"><span class="string">" 不要高亮被搜索的句子（phrases）</span></div><div class="line"><span class="string">set nohlsearch</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 在搜索时，输入的词句的逐字符高亮（类似firefox的搜索）</div><div class="line"><span class="built_in">set</span> incsearch</div><div class="line"></div><div class="line"><span class="string">" 输入:set list命令是应该显示些啥？</span></div><div class="line"><span class="string">set listchars=tab:\|\ ,trail:.,extends:&gt;,precedes:&lt;,eol:$</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 光标移动到buffer的顶部和底部时保持3行距离</div><div class="line"><span class="built_in">set</span> scrolloff=3</div><div class="line"></div><div class="line"><span class="string">" 不要闪烁</span></div><div class="line"><span class="string">set novisualbell</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 我的状态行显示的内容（包括文件类型和解码）</div><div class="line"><span class="built_in">set</span> statusline=%F%m%r%h%w\[POS=%l,%v][%p%%]\%&#123;strftime(\<span class="string">"%d/%m/%y\ -\ %H:%M\")&#125;</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 总是显示状态行</div><div class="line"><span class="built_in">set</span> laststatus=2</div><div class="line"></div><div class="line"><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">"</span></div><div class="line"><span class="string">"</span> 文本格式和排版</div><div class="line"><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">"</span></div><div class="line"><span class="string">"</span> 自动格式化</div><div class="line"><span class="built_in">set</span> formatoptions=tcrqn</div><div class="line"></div><div class="line"><span class="string">" 继承前一行的缩进方式，特别适用于多行注释</span></div><div class="line"><span class="string">set autoindent</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 为C程序提供自动缩进</div><div class="line"><span class="built_in">set</span> smartindent</div><div class="line"></div><div class="line"><span class="string">" 使用C样式的缩进</span></div><div class="line"><span class="string">set cindent</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 制表符为4</div><div class="line"><span class="built_in">set</span> tabstop=4</div><div class="line"></div><div class="line"><span class="string">" 统一缩进为4</span></div><div class="line"><span class="string">set softtabstop=4</span></div><div class="line"><span class="string">set shiftwidth=4</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 不要用空格代替制表符</div><div class="line"><span class="built_in">set</span> noexpandtab</div><div class="line"></div><div class="line"><span class="string">" 不要换行</span></div><div class="line"><span class="string">set nowrap</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 在行和段开始处使用制表符</div><div class="line"><span class="built_in">set</span> smarttab</div><div class="line"></div><div class="line"><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">"</span></div><div class="line"><span class="string">"</span> CTags的设定</div><div class="line"><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">"</span></div><div class="line"><span class="string">"</span> 按照名称排序</div><div class="line"><span class="built_in">let</span> Tlist_Sort_Type = <span class="string">"name"</span></div><div class="line"></div><div class="line"><span class="string">" 在右侧显示窗口</span></div><div class="line"><span class="string">let Tlist_Use_Right_Window = 1</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 压缩方式</div><div class="line"><span class="built_in">let</span> Tlist_Compart_Format = 1</div><div class="line"></div><div class="line"><span class="string">" 如果只有一个buffer，kill窗口也kill掉buffer</span></div><div class="line"><span class="string">let Tlist_Exist_OnlyWindow = 1</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span> 不要关闭其他文件的tags</div><div class="line"><span class="built_in">let</span> Tlist_File_Fold_Auto_Close = 0</div><div class="line"></div><div class="line"><span class="string">" 不要显示折叠树</span></div><div class="line"><span class="string">let Tlist_Enable_Fold_Column = 0</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">"</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span></div><div class="line"><span class="string">" Autocommands</span></div><div class="line"><span class="string">"</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span></div><div class="line"><span class="string">" 只在下列文件类型被侦测到的时候显示行号，普通文本文件不显示</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">if has("</span>autocmd<span class="string">")</span></div><div class="line"><span class="string">autocmd FileType xml,html,c,cs,java,perl,shell,bash,cpp,python,vim,php,ruby set number</span></div><div class="line"><span class="string">autocmd FileType xml,html vmap 'o'&gt;o--&gt;</span></div><div class="line"><span class="string">autocmd FileType java,c,cpp,cs vmap ' 0 &amp;&amp; line("</span><span class="string">'\"") &lt;= line("$") |</span></div><div class="line"><span class="string">\ exe " normal g`\"" |</span></div><div class="line"><span class="string">\ endif</span></div><div class="line"><span class="string">endif "has("autocmd")</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">" F5编译和运行C程序，F6编译和运行C++程序</span></div><div class="line"><span class="string">" 请注意，下述代码在windows下使用会报错</span></div><div class="line"><span class="string">" 需要去掉./这两个字符</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">" C的编译和运行</span></div><div class="line"><span class="string">map  :call CompileRunGcc()</span></div><div class="line"><span class="string">func! CompileRunGcc()</span></div><div class="line"><span class="string">exec "w"</span></div><div class="line"><span class="string">exec "!gcc % -o %&lt;"</span></div><div class="line"><span class="string">exec "! ./%&lt;"</span></div><div class="line"><span class="string">endfunc</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">" C++的编译和运行</span></div><div class="line"><span class="string">map  :call CompileRunGpp()</span></div><div class="line"><span class="string">func! CompileRunGpp()</span></div><div class="line"><span class="string">exec "w"</span></div><div class="line"><span class="string">exec "!g++ % -o %&lt;"</span></div><div class="line"><span class="string">exec "! ./%&lt;"</span></div><div class="line"><span class="string">endfunc</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">" 能够漂亮地显示.NFO文件</span></div><div class="line"><span class="string">set encoding=utf-8</span></div><div class="line"><span class="string">function! SetFileEncodings(encodings)</span></div><div class="line"><span class="string">let b:myfileencodingsbak=&amp;fileencodings</span></div><div class="line"><span class="string">let &amp;fileencodings=a:encodings</span></div><div class="line"><span class="string">endfunction</span></div><div class="line"><span class="string">function! RestoreFileEncodings()</span></div><div class="line"><span class="string">let &amp;fileencodings=b:myfileencodingsbak</span></div><div class="line"><span class="string">unlet b:myfileencodingsbak</span></div><div class="line"><span class="string">endfunction</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">au BufReadPre *.nfo call SetFileEncodings('</span>cp437<span class="string">')|set ambiwidth=single au BufReadPost *.nfo call RestoreFileEncodings()</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">" 高亮显示普通txt文件（需要txt.vim脚本）</span></div><div class="line"><span class="string">au BufRead,BufNewFile * setfiletype txt</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">" 用空格键来开关折叠</span></div><div class="line"><span class="string">set foldenable</span></div><div class="line"><span class="string">set foldmethod=manual</span></div><div class="line"><span class="string">nnoremap  @=((foldclosed(line('</span>.<span class="string">')) &lt; 0) ? '</span>zc<span class="string">':'</span>zo<span class="string">')</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">" minibufexpl插件的一般设置</span></div><div class="line"><span class="string">let g:miniBufExplMapWindowNavVim = 1</span></div><div class="line"><span class="string">let g:miniBufExplMapWindowNavArrows = 1</span></div><div class="line"><span class="string">let g:miniBufExplMapCTabSwitchBufs = 1</span></div><div class="line"><span class="string">let g:miniBufExplModSelTarget = 1</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/43.bash_profile和bashrc区别" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/43.bash_profile和bashrc区别/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.311Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/43.bash_profile和bashrc区别/">
        bash_profile和bashrc区别
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="bash-profile-与-bashrc-的区别"><a href="#bash-profile-与-bashrc-的区别" class="headerlink" title=".bash_profile 与 .bashrc 的区别"></a>.bash_profile 与 .bashrc 的区别</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code>.bash_profile</code> is executed for <code>login shells</code>, while <code>.bashrc</code> is executed for interactive <code>non-login shells</code>.</p>
<h2 id="login-shell-与-non-login-shell-的区别"><a href="#login-shell-与-non-login-shell-的区别" class="headerlink" title="login shell 与 non-login shell 的区别"></a>login shell 与 non-login shell 的区别</h2><ol>
<li>当你直接在机器login界面登陆、使用ssh登陆或者su切换用户登陆时，.bash_profile 会被调用来初始化shell环境</li>
</ol>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>Note：.bash_profile文件默认调用.bashrc文件</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.bash_profile中有如下内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> [ -f ~/.bashrc ]; <span class="keyword">then</span></div><div class="line">        . ~/.bashrc</div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<ol>
<li><p>当你不登陆系统而使用ssh直接在远端执行命令，.bashrc 会被调用</p>
</li>
<li><p>当你已经登陆系统后，每打开一个新的Terminal时，.bashrc 都会被再次调用。</p>
</li>
</ol>
<h2 id="测试准备工作"><a href="#测试准备工作" class="headerlink" title="测试准备工作"></a>测试准备工作</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;hclient2主机hadoop用户家目录下执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[hadoop@hclient2 ~]$ <span class="built_in">echo</span> <span class="string">"invoke hclient2:~/.bashrc"</span>&gt;&gt;.bashrc</div><div class="line">[hadoop@hclient2 ~]$ <span class="built_in">echo</span> <span class="string">"invoke hclient2:~/.bash_profile"</span>&gt;&gt;.bash_profile</div></pre></td></tr></table></figure>
<h3 id="Login-Shell"><a href="#Login-Shell" class="headerlink" title="Login Shell"></a>Login Shell</h3><ol>
<li>窗口登陆</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Red Hat Enterprise Linux Server release 6.3 (Santiago)</div><div class="line">Kernel 2.6.32-279.el6.x86_64 on an x86_64</div><div class="line"></div><div class="line"></div><div class="line">hclient2 login: hadoop</div><div class="line">Password:</div><div class="line">Last login: Mon Feb 25 23:03:45 on tty1</div><div class="line">invoke hclient2:~/.bashrc</div><div class="line">invoke hclient2:~/.bash_profile</div><div class="line"></div><div class="line">[hadoop@hclient2 ~]$</div></pre></td></tr></table></figure>
<ol>
<li>SSH 登陆</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[hadoop@hserver ~]$ ssh hclient2</div><div class="line">Last login: Mon Feb 25 22:42:19 2013 from hserver</div><div class="line">invoke hclient2:~/.bashrc</div><div class="line">invoke hclient2:~/.bash_profile</div><div class="line">[hadoop@hclient2 ~]$</div></pre></td></tr></table></figure>
<ol>
<li>su 登陆</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@hclient2 ~]<span class="comment"># su - hadoop</span></div><div class="line">invoke hclient2:~/.bashrc</div><div class="line">invoke hclient2:~/.bash_profile</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>Non-login Shell</strong>:</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Note: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh ...[user@] hostname [<span class="built_in">command</span>]</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">If <span class="built_in">command</span> is specified, it is executed on the remote host instead of a login shell.</div><div class="line">[hadoop@hserver ~]$ ssh hclient2 hostname</div><div class="line">invoke hclient2:~/.bashrc</div><div class="line">hclient2</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>注</strong>：若要配置环境变量之类，最保险是写在 .bashrc 文件中。因为不管是登陆还是不登陆，该文件总会被调用！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/52/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/51/">51</a><a class="page-number" href="/page/52/">52</a><span class="page-number current">53</span><a class="page-number" href="/page/54/">54</a><a class="page-number" href="/page/55/">55</a><span class="space">&hellip;</span><a class="page-number" href="/page/63/">63</a><a class="extend next" rel="next" href="/page/54/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2017 失落的乐章
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    

<script>
	var yiliaConfig = {
		fancybox: ,
		mathjax: ,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



  </div>
</body>
</html>