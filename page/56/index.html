<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>失落的乐章</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="失落的乐章的Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="失落的乐章">
<meta property="og:url" content="https://hcldirgit.github.io/page/56/index.html">
<meta property="og:site_name" content="失落的乐章">
<meta property="og:description" content="失落的乐章的Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="失落的乐章">
<meta name="twitter:description" content="失落的乐章的Blog">
  
    <link rel="alternative" href="/atom.xml" title="失落的乐章" type="application/atom+xml">
  
  
    <link rel="icon" href="https://hcldirgit.github.io/images/0.png">
  
  <link rel="stylesheet" href="/css/style.css">
  
  
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85415703-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://hcldirgit.github.io/images/0.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">失落的乐章</a></h1>
		</hgroup>

		
		<p class="header-subtitle">技术面前，永远都是学生。</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Ansible/" style="font-size: 10.42px;">Ansible</a> <a href="/tags/Apache/" style="font-size: 18.33px;">Apache</a> <a href="/tags/Cacti/" style="font-size: 11.67px;">Cacti</a> <a href="/tags/DNS/" style="font-size: 13.33px;">DNS</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/FTP/" style="font-size: 11.25px;">FTP</a> <a href="/tags/Git/" style="font-size: 10.83px;">Git</a> <a href="/tags/HA集群/" style="font-size: 11.67px;">HA集群</a> <a href="/tags/Hadoop/" style="font-size: 12.5px;">Hadoop</a> <a href="/tags/Jenkins/" style="font-size: 10.42px;">Jenkins</a> <a href="/tags/LAMP/" style="font-size: 19.58px;">LAMP</a> <a href="/tags/LNMP/" style="font-size: 17.08px;">LNMP</a> <a href="/tags/LVS/" style="font-size: 16.67px;">LVS</a> <a href="/tags/Linux/" style="font-size: 19.17px;">Linux</a> <a href="/tags/Linux命令/" style="font-size: 20px;">Linux命令</a> <a href="/tags/Linux安全/" style="font-size: 14.17px;">Linux安全</a> <a href="/tags/Memcached/" style="font-size: 11.25px;">Memcached</a> <a href="/tags/MongoDB/" style="font-size: 15.42px;">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 17.5px;">MySQL</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/Nagios/" style="font-size: 11.67px;">Nagios</a> <a href="/tags/Nginx/" style="font-size: 17.92px;">Nginx</a> <a href="/tags/OpenStack/" style="font-size: 11.25px;">OpenStack</a> <a href="/tags/Php/" style="font-size: 14.58px;">Php</a> <a href="/tags/Puppet/" style="font-size: 11.25px;">Puppet</a> <a href="/tags/Python/" style="font-size: 14.58px;">Python</a> <a href="/tags/Redis/" style="font-size: 16.25px;">Redis</a> <a href="/tags/Resin/" style="font-size: 10px;">Resin</a> <a href="/tags/Saltstack/" style="font-size: 10px;">Saltstack</a> <a href="/tags/Samba/" style="font-size: 12.08px;">Samba</a> <a href="/tags/Squid/" style="font-size: 14.58px;">Squid</a> <a href="/tags/Tomcat/" style="font-size: 13.75px;">Tomcat</a> <a href="/tags/Zabbix/" style="font-size: 15.83px;">Zabbix</a> <a href="/tags/haproxy/" style="font-size: 12.5px;">haproxy</a> <a href="/tags/keepalived/" style="font-size: 12.92px;">keepalived</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/shell练习/" style="font-size: 18.75px;">shell练习</a> <a href="/tags/正则表达式/" style="font-size: 12.92px;">正则表达式</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">失落的乐章</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://hcldirgit.github.io/images/0.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">失落的乐章</h1>
			</hgroup>
			
			<p class="header-subtitle">技术面前，永远都是学生。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-1. Linux 基础/12. Linux su 切换用户" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/12. Linux su 切换用户/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.288Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/12. Linux su 切换用户/">
        Linux 用户切换
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="命令："><a href="#命令：" class="headerlink" title="命令："></a>命令：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">su</div></pre></td></tr></table></figure>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">su [-] username</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;后面可以跟 ‘-’ 也可以不跟，普通用户 su 不加 username 时就是切换到 root 用户，当然 root 用户同样可以 su 到普通用户。 ‘-’ 这个字符的作用是，加上后会初始化当前用户的各种环境变量。<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;做个实验说明加与不加 ‘-’ 的区别：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[<span class="built_in">test</span>@localhost ~]$ <span class="built_in">pwd</span></div><div class="line">/home/<span class="built_in">test</span></div><div class="line">[<span class="built_in">test</span>@localhost ~]$ su</div><div class="line">密码：</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># pwd</span></div><div class="line">/home/<span class="built_in">test</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># exit</span></div><div class="line"><span class="built_in">exit</span></div><div class="line">[<span class="built_in">test</span>@localhost ~]$ su -</div><div class="line">密码：</div><div class="line">[root@localhost ~]<span class="comment"># pwd</span></div><div class="line">/root</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果不加 ‘-’ 切换到 root 账户下时，当前目录没有变化，而加上 ‘-’ 切换到 root 账户后，当前目录为 root 账户的家目录，这跟直接登录 root 账户是一样的。当用 root 切换普通用户时，是不需要输入密码的。这也体现了 root 用户至高无上的权利。</p>
<h2 id="以某一个用户的身份执行某一个命令"><a href="#以某一个用户的身份执行某一个命令" class="headerlink" title="以某一个用户的身份执行某一个命令"></a>以某一个用户的身份执行某一个命令</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>语法</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">su -c <span class="string">"command"</span> username</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>示例</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用 www 的用户身份执行 /home/www/test.sh 这个脚本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">su -c <span class="string">"/home/www/test.sh"</span> www</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;前提是，/home/www/test.sh 这个脚本文件 www 用户有执行权限</p>
<h2 id="如何限制远程登录时，不允许-root-登录，而只允许普通用户登录"><a href="#如何限制远程登录时，不允许-root-登录，而只允许普通用户登录" class="headerlink" title="如何限制远程登录时，不允许 root 登录，而只允许普通用户登录"></a>如何限制远程登录时，不允许 root 登录，而只允许普通用户登录</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;修改配置文件 <code>/etc/sshd/sshd_config</code> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/sshd/sshd_config</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在文件中查找 <code>“#PermitRoorLogin    yes”</code> 这句话，修改为 <code>“PermitRootLogin   no”</code> 表示不允许 root 用户远程登录。<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/etc/sshd/sshd_config 为 sshd 服务的配置文件，默认虽然在前面加 “#” 注释了这句，“PermitRootLogin    yes” 但它默认就是允许 root 账户登录的，所以要想不让 root 登录，修改为 no 就可以了。保存配置文件后，重启 sshd 服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service sshd restart</div></pre></td></tr></table></figure>
<h2 id="如何限制远程登录时，只允许-root-使用密钥登录，而不能使用密码登录"><a href="#如何限制远程登录时，只允许-root-使用密钥登录，而不能使用密码登录" class="headerlink" title="如何限制远程登录时，只允许 root 使用密钥登录，而不能使用密码登录"></a>如何限制远程登录时，只允许 root 使用密钥登录，而不能使用密码登录</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;打开配置文件 <code>/etc/sshd/sshd_config</code>     </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/sshd/sshd_config</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;加上一句：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PermitRootLogin   without-password</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;保存配置文件后，重启 sshd 服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service sshd restart</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这样就可以了。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/39.yum局域网软件源搭建" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/39.yum局域网软件源搭建/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.288Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/39.yum局域网软件源搭建/">
        yum局域网软件源搭建
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-搭建apache服务器或ftp服务器"><a href="#1-搭建apache服务器或ftp服务器" class="headerlink" title="1.搭建apache服务器或ftp服务器"></a>1.搭建apache服务器或ftp服务器</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;yum安装或二进制安装</p>
<h2 id="2、准备RPM包"><a href="#2、准备RPM包" class="headerlink" title="2、准备RPM包"></a>2、准备RPM包</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;把CentOS的DVD1和DVD2.iso都下载下来，把DVD1.iso里的所有内容解压出来，放到/var/www/html/centos-6目录下，然后把DVD2.iso解压出来的Packages目录下的rpm包复制到/var/html/centos-6/Packages目录下，这样/var/html/centos-6/Packages里面就有了6000多个rpm包。</p>
<h2 id="3、创建yum仓库"><a href="#3、创建yum仓库" class="headerlink" title="3、创建yum仓库"></a>3、创建yum仓库</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;准备createrepo：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y install createrepo</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;创建repository：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">createrepo /var/www/html/centos-6/</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;创建完成之后，会在/var/www/html/centos-6/repodata下生成一些文件。</p>
<h2 id="4、使用软件源"><a href="#4、使用软件源" class="headerlink" title="4、使用软件源"></a>4、使用软件源</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在其他centos机器上试试软件源能不能用。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;首先修改机器上软件源配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># cd /etc/yum.repos.d/</span></div><div class="line"><span class="comment"># mkdir bk</span></div><div class="line"><span class="comment"># mv *.repo bk/</span></div><div class="line"><span class="comment"># cp bk/CentOS-Base.repo ./</span></div><div class="line"><span class="comment"># vi CentOS-Base.repo</span></div><div class="line">CentOS-Base.repo文件修改之后如下：</div><div class="line">[base]</div><div class="line">name=CentOS-<span class="variable">$releasever</span> - Base</div><div class="line">baseurl=http://*.*.*.*/centos-6/</div><div class="line">gpgcheck=1(改成0下面那行就不用设置了)</div><div class="line">gpgkey=http:///*.*.*.*/centos-6/RPM-GPG-KEY-CentOS-6</div><div class="line">enabled=1</div><div class="line"><span class="comment">#released updates</span></div><div class="line"><span class="comment">#[updates]</span></div><div class="line"><span class="comment">#name=CentOS-$releasever - Updates</span></div><div class="line"><span class="comment">#baseurl=http:///*.*.*.*/centos-6/</span></div><div class="line"><span class="comment">#gpgcheck=1</span></div><div class="line"><span class="comment">#gpgkey=http:///*.*.*.*/centos-6/RPM-GPG-KEY-CentOS-6</span></div><div class="line"><span class="comment">#enabled = 1</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;保存之后，就可以使用局域网的软件源了：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># yum update</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/10. Linux passwd 修改用户密码" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/10. Linux passwd 修改用户密码/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.287Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/10. Linux passwd 修改用户密码/">
        Linux 修改用户密码
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="命令：passwd"><a href="#命令：passwd" class="headerlink" title="命令：passwd"></a>命令：passwd</h2><h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">passwd [username]</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;创建完账户后，默认是没有设置密码的，虽然没有密码，但该账户同样登录不了系统。只有设置好密码后才能登录系统。为用户创建密码时，为了安全起见，尽量设置复杂一些。<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;可以按照这样的规则来设置密码：      </p>
<ol>
<li>长度大于10个字符；</li>
<li>密码中包含大小写字母数字以及特殊字符 ‘*’ ，‘&amp;’ ，‘%’ 等；</li>
<li>不规则性（不要出现 root 、happy 、love 、linux 、7758520 、111111 等等单词或者数字）；</li>
<li>不要带有自己的名字、公司名字、自己电话、自己生日等。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># passwd</span></div><div class="line">更改用户 root 的密码 。</div><div class="line">新的 密码：</div><div class="line">重新输入新的 密码：</div><div class="line">passwd： 所有的身份验证令牌已经成功更新。</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;“passwd” 后面不加 username 则是修改当先账户的密码。如果登录的是 root 账户，后面可以跟普通用户的名字，意思是修改指定账户的密码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># passwd user11</span></div><div class="line">更改用户 user11 的密码 。</div><div class="line">新的 密码：</div><div class="line">重新输入新的 密码：</div><div class="line">passwd： 所有的身份验证令牌已经成功更新。</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;只有 root 用户才可以修改其他账户的密码，普通账户只能修改自己的密码，其他账户的密码是不可以修改的。</p>
<h3 id="passwd-几个比较重要的参数"><a href="#passwd-几个比较重要的参数" class="headerlink" title="passwd 几个比较重要的参数"></a>passwd 几个比较重要的参数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">[root@localhost beinan]<span class="comment"># passwd --help</span></div><div class="line">Usage: passwd [OPTION...] &lt;accountName&gt;</div><div class="line">-k, --keep-tokens       keep non-expired authentication tokens    注：保留即将过期的用户在期满后能仍能使用；</div><div class="line">-d, --delete            delete the password <span class="keyword">for</span> the named account (root only)    注：删除用户密码，仅能以root权限操作；</div><div class="line">-l, --lock              lock the named account (root only)    注：锁住用户无权更改其密码，仅能通过root权限操作；</div><div class="line">-u, --unlock            unlock the named account (root only)    注：解除锁定；</div><div class="line">-f, --force             force operation    注：强制操作；仅root权限才能操作；</div><div class="line">-x, --maximum=DAYS      maximum password lifetime (root only)          注：两次密码修正的最大天数，后面接数字；仅能root权限操作；</div><div class="line">-n, --minimum=DAYS      minimum password lifetime (root only)     注：两次密码修改的最小天数，后面接数字，仅能root权限操作；</div><div class="line">-w, --warning=DAYS      number of days warning users receives before     注：在距多少天提醒用户修改密码；仅能root权限操作；</div><div class="line">password expiration (root only)</div><div class="line">-i, --inactive=DAYS     number of days after password expiration when an     注：在密码过期后多少天，用户被禁掉，仅能以root操作；</div><div class="line">account becomes disabled (root only)</div><div class="line">-S, --status            report password status on the named account (root       注：查询用户的密码状态，仅能root用户操作；</div><div class="line">only)</div><div class="line">--stdin                 <span class="built_in">read</span> new tokens from stdin (root only)</div></pre></td></tr></table></figure>
<h2 id="命令：mkpasswd"><a href="#命令：mkpasswd" class="headerlink" title="命令：mkpasswd"></a>命令：mkpasswd</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这个命令经常用来生成密码，省的去想。默认 Linux 是没有这个命令的，需要安装一个包 “expect” ，如果 CentOS 可以上网，也可以使用命令完成安装。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install -y expect</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;安装好后，输入命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># mkpasswd</span></div><div class="line">HXut8oy*8</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;生成的随机字符串就可以作为一个密码，只不过这个密码不容易记忆。</p>
<h2 id="锁定和解锁某个账户"><a href="#锁定和解锁某个账户" class="headerlink" title="锁定和解锁某个账户"></a>锁定和解锁某个账户</h2><h3 id="锁定账户语法"><a href="#锁定账户语法" class="headerlink" title="锁定账户语法"></a>锁定账户语法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">passwd -l username</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;让某个账户不能修改密码，可以用 -l 参数来锁定:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># passwd -l beinan 注：锁定用户beinan不能更改密码；</span></div><div class="line">Locking password <span class="keyword">for</span> user beinan.</div><div class="line">passwd: Success           注：锁定成功；</div><div class="line">[beinan@localhost ~]<span class="comment"># su beinan 注：通过su切换到beinan用户；</span></div><div class="line">[beinan@localhost ~]$ passwd 注：beinan来更改密码；</div><div class="line">Changing password <span class="keyword">for</span> user beinan.</div><div class="line">Changing password <span class="keyword">for</span> beinan</div><div class="line">(current) UNIX password: 注：输入beinan的当前密码；</div><div class="line">passwd: Authentication token manipulation error 注：失败，不能更改密码；</div></pre></td></tr></table></figure>
<h3 id="解锁账户语法"><a href="#解锁账户语法" class="headerlink" title="解锁账户语法"></a>解锁账户语法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">passwd -u username</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;注意：这两个用法只有 root 账户才有资格执行。</p>
<h2 id="清除账户密码"><a href="#清除账户密码" class="headerlink" title="清除账户密码"></a>清除账户密码</h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">passwd -d username</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># passwd -d beinan 注：清除beinan用户密码；</span></div><div class="line">Removing password <span class="keyword">for</span> user beinan.</div><div class="line">passwd: Success                        注：清除成功；</div><div class="line">[root@localhost ~]<span class="comment"># passwd -S beinan 注：查询beinan用户密码状态；</span></div><div class="line">Empty password.                     注：空密码，也就是没有密码；</div><div class="line"></div><div class="line">注意： 当我们清除一个用户的密码时，登录时就无需密码；这一点要加以注意</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;注意：当清除一个账户的密码时，登录时就无需密码;这一点要嫁衣注意；</p>
<h2 id="密码时效命令：chage"><a href="#密码时效命令：chage" class="headerlink" title="密码时效命令：chage"></a>密码时效命令：chage</h2><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chage [选项] [username]</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;chage 命令的选项说明：<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-m days： 密码可更改的最小天数。为零时代表任何时候都可以更改密码。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-M days： 指定口令有效的最多天数。当该选项指定的天数加上-d选项指定的天数小于当前的日期时，用户在使用该帐号前就必须改变口令。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-d days： 指定从1970年1月1日起，口令被改变的天数。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-I days： 指定口令过期后，帐号被锁前不活跃的天数。如果值为0，帐号在口令过期后就不会被锁。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-E date： 指定帐号被锁的日期。日期格式YYYY-MM-DD。若不用日期，也可以使用自1970年1月1日后经过的天数。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-W days： 指定口令过期前要警告用户的天数。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-l： 列出指定用户当前的口令时效信息，以确定帐号何时过期。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例如：要求用户 user1 两天内不能更改口令，并且口令最长的存活期为30天，并且口令过期前5天通知用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chage -m 2 -M 30 -W 5 user1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;可以使用如下命令查看用户 user1 当前的口令时效信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chage -l user1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;提示：   </p>
<ol>
<li>可以使用 <code>chage [用户名]</code> 进入交互模式修改用户的口令时效。</li>
<li>修改口令实质上就是修改影子口令文件 <code>/etc/shadow</code> 中与口令时效相关的字段值。</li>
</ol>
<h2 id="chage-修改用户密码有限期限的命令"><a href="#chage-修改用户密码有限期限的命令" class="headerlink" title="chage 修改用户密码有限期限的命令"></a>chage 修改用户密码有限期限的命令</h2><h3 id="chage-语法格式"><a href="#chage-语法格式" class="headerlink" title="chage 语法格式"></a>chage 语法格式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chage [-l] [-m 最小天数] [-M 最大天数] [-W 警告] [-i 失效日] [-E 过期日] [-d 最后日]  username</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/1. Linux 简介" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/1. Linux 简介/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.286Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/1. Linux 简介/">
        Linux 简介
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Linux-简史"><a href="#Linux-简史" class="headerlink" title="Linux 简史"></a>Linux 简史</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux 操作系统的诞生、发展和成长过程始终依赖着五个重要支柱：UNIX 操作系统、MINIX 操作系统、GNU计划、POSIX 标准和Internet 网络。  </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1981 年IBM公司推出微型计算机IBM PC。   </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1991年，GNU计划已经开发出了许多工具软件，最受期盼的GNU C编译器已经出现，GNU的操作系统核心HURD一直处于实验阶段，没有任何可用性，实质上也没能开发出完整的GNU操作系统，但是GNU奠定了Linux用户基础和开发环境。   </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1991年初，林纳斯·托瓦兹开始在一台386sx兼容微机上学习minix操作系统。1991年4月，林纳斯·托瓦兹开始酝酿并着手编制自己的操作系统。  </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1991 年4 月13 日在comp.os.minix 上发布说自己已经成功地将bash 移植到了minix 上，而且已经爱不释手、不能离开这个shell软件了。    </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1991年7月3日，第一个与Linux有关的消息是在comp.os.minix上发布的（当然此时还不存在Linux这个名称，当时林纳斯·托瓦兹的脑子里想的可能是FREAX，FREAX的英文含义是怪诞的、怪物、异想天开等）。      </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1991年的10月5日，林纳斯·托瓦兹在comp.os.minix新闻组上发布消息，正式向外宣布Linux内核的诞生（Freeminix-like kernel sources for 386-AT）。 </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1993年，大约有100余名程序员参与了Linux内核代码编写/修改工作，其中核心组由5人组成，此时Linux 0.99的代码大约有十万行，用户大约有10万左右。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1994年3月，Linux1.0发布，代码量17万行，当时是按照完全自由免费的协议发布，随后正式采用GPL协议。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1995年1月，Bob Young创办了RedHat（小红帽），以GNU/Linux为核心，集成了400多个源代码开放的程序模块，搞出了一种冠以品牌的Linux，即RedHat Linux,称为Linux”发行版”，在市场上出售。这在经营模式上是一种创举。     </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1996年6月，Linux 2.0内核发布，此内核有大约40万行代码，并可以支持多个处理器。此时的Linux 已经进入了实用阶段，全球大约有350万人使用<br>。      </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1998年2月，以Eric Raymond为首的一批年轻的”老牛羚骨干分子”终于认识到GNU/Linux体系的产业化道路的本质，并非是什么自由哲学，而是市场竞争的驱动，创办了”Open Source Intiative”（开放源代码促进会）”复兴”的大旗，在互联网世界里展开了一场历史性的Linux产业化运动。      </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;2001年1月，Linux 2.4发布，它进一步地提升了SMP系统的扩展性，同时它也集成了很多用于支持桌面系统的特性：USB，PC卡（PCMCIA）的支持，内置的即插即用，等等功能。      </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;2003年12月，Linux 2.6版内核发布，相对于2.4版内核2.6在对系统的支持都有很大的变化。  </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;2004年的第1月，SuSE嫁到了Novell，SCO继续顶着骂名四处强行“化缘”， Asianux， MandrakeSoft也在五年中首次宣布季度赢利。3月，SGI宣布成功实现了Linux操作系统支持256个Itanium 2处理器。</p>
<h2 id="主要特性"><a href="#主要特性" class="headerlink" title="主要特性"></a>主要特性</h2><h3 id="基本思想"><a href="#基本思想" class="headerlink" title="基本思想"></a>基本思想</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux的基本思想有两点：第一，一切都是文件；第二，每个软件都有确定的用途。其中第一条详细来讲就是系统中的所有都归结为一个文件，包括命令、硬件和软件设备、操作系统、进程等等对于操作系统内核而言，都被视为拥有各自特性或类型的文件。至于说Linux是基于Unix的，很大程度上也是因为这两者的基本思想十分相近。</p>
<h3 id="完全免费"><a href="#完全免费" class="headerlink" title="完全免费"></a>完全免费</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux是一款免费的操作系统，用户可以通过网络或其他途径免费获得，并可以任意修改其源代码。这是其他的操作系统所做不到的。正是由于这一点，来自全世界的无数程序员参与了Linux的修改、编写工作，程序员可以根据自己的兴趣和灵感对其进行改变，这让Linux吸收了无数程序员的精华，不断壮大。</p>
<h3 id="完全兼容POSIX1-0标准"><a href="#完全兼容POSIX1-0标准" class="headerlink" title="完全兼容POSIX1.0标准"></a>完全兼容POSIX1.0标准</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这使得可以在Linux下通过相应的模拟器运行常见的DOS、Windows的程序。这为用户从Windows转到Linux奠定了基础。许多用户在考虑使用Linux时，就想到以前在Windows下常见的程序是否能正常运行，这一点就消除了他们的疑虑。</p>
<h3 id="多用户、多任务"><a href="#多用户、多任务" class="headerlink" title="多用户、多任务"></a>多用户、多任务</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux支持多用户，各个用户对于自己的文件设备有自己特殊的权利，保证了各用户之间互不影响。多任务则是现在电脑最主要的一个特点，Linux可以使多个程序同时并独立地运行。</p>
<h3 id="良好的界面"><a href="#良好的界面" class="headerlink" title="良好的界面"></a>良好的界面</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux同时具有字符界面和图形界面。在字符界面用户可以通过键盘输入相应的指令来进行操作。它同时也提供了类似Windows图形界面的X-Window系统，用户可以使用鼠标对其进行操作。在X-Window环境中就和在Windows中相似，可以说是一个Linux版的Windows。</p>
<h3 id="支持多种平台"><a href="#支持多种平台" class="headerlink" title="支持多种平台"></a>支持多种平台</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux可以运行在多种硬件平台上，如具有x86、680x0、SPARC、Alpha等处理器的平台。此外Linux还是一种嵌入式操作系统，可以运行在掌上电脑、机顶盒或游戏机上。2001年1月份发布的Linux 2.4版内核已经能够完全支持Intel 64位芯片架构。同时Linux也支持多处理器技术。多个处理器同时工作，使系统性能大大提高。</p>
<h2 id="桌面环境"><a href="#桌面环境" class="headerlink" title="桌面环境"></a>桌面环境</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在图形计算中，一个桌面环境（Desktop environment，有时称为桌面管理器）为计算机提供一个图形用户界面（GUI）。但严格来说窗口管理器和桌面环境是有区别的。桌面环境就是桌面图形环境，它的主要目标是为Linux/Unix操作系统提供一个更加完备 的界面以及大量各类整合工具和使用 程序，其基本 易用性吸引着大量的新用户。桌面环境名称来自桌面比拟，对应于早期的文字命令行界面（CLI）。一个典型的桌面环境提供图标，视窗，工具栏，文件夹，壁纸以及像拖放这样的能力。整体而言，桌面环境在设计和功能上的特性，赋予了它与众不同的外观和感觉。</p>
<h3 id="种类"><a href="#种类" class="headerlink" title="种类"></a>种类</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;现今主流的桌面环境有KDE，gnome，Xfce，LXDE等，除此之外还有Ambient，EDE，IRIX Interactive Desktop，Mezzo，Sugar，CDE等。</p>
<h3 id="gnome"><a href="#gnome" class="headerlink" title="gnome"></a>gnome</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;即GNU网络对象模型环境 (The GNU Network Object Model Environment)，GNU计划的一部分，开放源码运动的一个重要组成部分。是一种让使用者容易操作和设定电脑环境的工具。<br>目标是基于自由软件，为Unix或者类Unix操作系统构造一个功能完善、操作简单以及界面友好的桌面环境，他是GNU计划的正式桌面。</p>
<h3 id="Xfce"><a href="#Xfce" class="headerlink" title="Xfce"></a>Xfce</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;即XForms Common Environment，创建于2007年7月，类似于商业图形环境CDE，是一个运行在各类Unix下的轻量级桌面环境。原作者Olivier Fourdan最先设计XFce是基于XForms三维图形库。Xfce设计目的是用来提高系统的效率，在节省系统资源的同时，能够快速加载和执行应用程序。</p>
<h3 id="Fluxbox"><a href="#Fluxbox" class="headerlink" title="Fluxbox"></a>Fluxbox</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;是一个基于GNU/Linux的轻量级图形操作界面，它虽然没有GNOME和KDE那样精致 ，但由于它的运行对系统资源和配置要求极低，所以它被安装到很多较旧的或是对性能要求较高的机器上，其菜单和有关 配置被保存于用户根目录下的.fluxbox目录里，这样使得它的配置极为便利。</p>
<h3 id="Enlightenment"><a href="#Enlightenment" class="headerlink" title="Enlightenment"></a>Enlightenment</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;是一个功能强大的窗口管理器，它的目标是运用 户轻而易举地配置所见即所得的桌面图形界面。现在Enlightenment的界面已经相当豪华,它拥有像AfterStep一样的可视化时钟以及其它浮华的界面效果，用户不仅可以任意选择边框和动感的声音效果，最有吸引力的是由于它开放的设计思想，每一个用户可以根据自己的爱好，任意地配置窗口的边框、菜单以及屏幕上其它各个部分，而不须要 接触源代码，也不须要 编译任何程序。</p>
<h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><h3 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>普通文件</strong>（regular file）：就是一般存取的文件，由ls -al显示出来的属性中，第一个属性为 [-]，例如 [-rwxrwxrwx]。另外，依照文件的内容，又大致可以分为：</p>
<ol>
<li>纯文本文件（ASCII）：这是Unix系统中最多的一种文件类型，之所以称为纯文本文件，是因为内容可以直接读到的数据，例如数字、字母等等。设 置文件几乎都属于这种文件类型。举例来说，使用命令“cat ~/.bashrc”就可以看到该文件的内容（cat是将文件内容读出来）。</li>
</ol>
<ol>
<li><p>二进制文件（binary）：系统其实仅认识且可以执行二进制文件（binary file）。Linux中的可执行文件（脚本，文本方式的批处理文件不算）就是这种格式的。举例来说，命令cat就是一个二进制文件。</p>
</li>
<li><p>数据格式的文件（data）：有些程序在运行过程中，会读取某些特定格式的文件，那些特定格式的文件可以称为数据文件（data file）。举例来说，Linux在用户登入时，都会将登录数据记录在 /var/log/wtmp文件内，该文件是一个数据文件，它能通过last命令读出来。但使用cat时，会读出乱码。因为它是属于一种特殊格式的文件。</p>
</li>
</ol>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>目录文件</strong>（directory）：就是目录，第一个属性为 [d]，例如 [drwxrwxrwx]。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>连接文件</strong>（link）：类似Windows下面的快捷方式。第一个属性为 [l]，例如 [lrwxrwxrwx]。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>设备与设备文件</strong>（device）：与系统外设及存储等相关的一些文件，通常都集中在 /dev目录。通常又分为两种：</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>块设备文件</strong>：就是存储数据以供系统存取的接口设备，简单而言就是硬盘。例如一号硬盘的代码是 /dev/hda1等文件。第一个属性为 [b]。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>字符设备文件</strong>：即串行端口的接口设备，例如键盘、鼠标等等。第一个属性为 [c]。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>套接字</strong>（sockets）：这类文件通常用在网络数据连接。可以启动一个程序来监听客户端的要求，客户端就可以通过套接字来进行数据通信。第一个属性为 [s]，最常在 /var/run目录中看到这种文件类型。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>管道</strong>（FIFO,pipe）：FIFO也是一种特殊的文件类型，它主要的目的是，解决多个程序同时存取一个文件所造成的错误。FIFO是first-in-first-out（先进先出）的缩写。第一个属性为 [p]。</p>
<h3 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/</strong>：根目录，所有的目录、文件、设备都在/之下，/就是Linux文件系统的组织者，也是最上级的领导者。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/bin</strong>：bin 就是二进制（binary）英文缩写。在一般的系统当中，都可以在这个目录下找到linux常用的命令。系统所需要的那些命令位于此目录。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/boot</strong>：Linux的内核及引导系统程序所需要的文件目录，比如 vmlinuz initrd.img 文件都位于这个目录中。在一般情况下，GRUB或LILO系统引导管理器也位于这个目录。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/cdrom</strong>：这个目录在刚刚安装系统的时候是空的。可以将光驱文件系统挂在这个目录下。例如：mount /dev/cdrom /cdrom</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/dev</strong>：dev 是设备（device)的英文缩写。这个目录对所有的用户都十分重要。因为在这个目录中包含了所有linux系统中使用的外部设备。但是这里并不是放的外部设备的驱动程序。这一点和常用的windows,dos操作系统不一样。它实际上是一个访问这些外部设备的端口。可以非常方便地去访问这些外部设备，和访问一个文件，一个目录没有任何区别。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/etc</strong>：etc这个目录是linux系统中最重要的目录之一。在这个目录下存放了系统管理时要用到的各种配置文件和子目录。要用到的网络配置文件，文件系统，x系统配置文件，设备配置信息，设置用户信息等都在这个目录下。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/home</strong>：如果建立一个用户，用户名是”xx”,那么在/home目录下就有一个对应的/home/xx路径，用来存放用户的主目录。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/lib</strong>：lib是库（library）英文缩写。这个目录是用来存放系统动态连接共享库的。几乎所有的应用程序都会用到这个目录下的共享库。因此，千万不要轻易对这个目录进行什么操作，一旦发生问题，系统就不能工作了。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/lost+found</strong>：在ext2或ext3文件系统中，当系统意外崩溃或机器意外关机，而产生一些文件碎片放在这里。当系统启动的过程中fsck工具会检查这里，并修复已经损坏的文件系统。有时系统发生问题，有很多的文件被移到这个目录中，可能会用手工的方式来修复，或移到文件到原来的位置上。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/mnt</strong>：这个目录一般是用于存放挂载储存设备的挂载目录的，比如有cdrom等目录。可以参看/etc/fstab的定义。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/media</strong>：有些linux的发行版使用这个目录来挂载那些usb接口的移动硬盘（包括U盘）、CD/DVD驱动器等等。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/opt</strong>：这里主要存放那些可选的程序。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/proc</strong>：可以在这个目录下获取系统信息。这些信息是在内存中，由系统自己产生的。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/root</strong>：Linux超级权限用户root的家目录。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/sbin</strong>：这个目录是用来存放系统管理员的系统管理程序。大多是涉及系统管理的命令的存放，是超级权限用户root的可执行命令存放地，普通用户无权限执行这个目录下的命令，这个目录和/usr/sbin; /usr/X11R6/sbin或/usr/local/sbin目录是相似的，凡是目录sbin中包含的都是root权限才能执行的。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/selinux</strong> ：对SElinux的一些配置文件目录，SElinux可以让linux更加安全。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/srv</strong> 服务启动后，所需访问的数据目录，举个例子来说，www服务启动读取的网页数据就可以放在/srv/www中</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/tmp</strong>：临时文件目录，用来存放不同程序执行时产生的临时文件。有时用户运行程序的时候，会产生临时文件。/tmp就用来存放临时文件的。/var/tmp目录和这个目录相似。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/usr</strong>：这是linux系统中占用硬盘空间最大的目录。用户的很多应用程序和文件都存放在这个目录下。在这个目录下，可以找到那些不适合放在/bin或/etc目录下的额外的工具</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/usr/local</strong>：这里主要存放那些手动安装的软件，即不是通过“新立得”或apt-get安装的软件。它和/usr目录具有相类似的目录结构。让软件包管理器来管理/usr目录，而把自定义的脚本（scripts)放到/usr/local目录下面。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/usr/share</strong> ：系统共用的东西存放地，比如 /usr/share/fonts 是字体目录，/usr/share/doc和/usr/share/man帮助文件。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>/var</strong>：这个目录的内容是经常变动的，看名字就知道，可以理解为vary的缩写，/var下有/var/log 这是用来存放系统日志的目录。/var/ www目录是定义Apache服务器站点存放目录；/var/lib 用来存放一些库文件，比如MySQL的，以及MySQL数据库的的存放地。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/62. Linux系统服务" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/62. Linux系统服务/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.285Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/62. Linux系统服务/">
        Linux系统服务
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果你对windows非常熟悉的话，相信你肯定配置过开机启动的服务，有些服务我们日常用不到则要把它停掉，一来可以节省资源，二来可以减少安全隐患。在linux上同样也有相关的工具来管理系统的服务。</p>
<h2 id="1-ntsysv服务配置工具"><a href="#1-ntsysv服务配置工具" class="headerlink" title="1. ntsysv服务配置工具"></a>1. ntsysv服务配置工具</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用来配置哪些服务开启或者关闭，有点类似图形界面，不过是使用键盘来控制的。如果没有这个命令请使用 <code>yum  install  -y  ntsysv</code> 安装它。安装好后，直接运行命令 <code>ntsysv</code> 回车后弹出一个配置界面：</p>
<p><img src="https://github.com/hcldirgit/image/blob/master/%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1/01.png?raw=true" alt=""></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;按键盘的上下方向键可以调节红色光标，按空格可以选择开启或者不开启，如果前面的中括号内显示有 <code>*</code> 则表示开启否则不开启。通过这个工具也可以看到目前系统中所有的服务。 <strong>建议除 “crond, iptables, network, sshd, syslog, irqbalance, sendmail, microcode_ctl” 外其他服务全部停掉。选择好后，按 “tab” 键选择 “确定”, 然后回车，需要重启机器才能生效</strong> 。</p>
<h2 id="2-chkconfig服务管理工具"><a href="#2-chkconfig服务管理工具" class="headerlink" title="2. chkconfig服务管理工具"></a>2. chkconfig服务管理工具</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux系统所有的预设服务可以查看/etc/init.d/目录得到:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ls /etc/init.d</span></div><div class="line">auditd     keepalived   netfs    portreserve  rpcidmapd   squid</div><div class="line">crond      killall      network  postfix      rpcsvcgssd  sshd</div><div class="line"><span class="built_in">functions</span>  messagebus   nfs      rdisc        rsyslog     sysstat</div><div class="line">halt       mysqld       nfslock  resin        sandbox     tomcat</div><div class="line">ip6tables  mysqldslave  nmb      restorecond  saslauthd   udev-post</div><div class="line">iptables   named        ntpd     rpcbind      single      vsftpd</div><div class="line">ipvsadm    netconsole   ntpdate  rpcgssd      smb         winbind</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;其实这就是系统所有的预设服务了。为什么这样讲，因为系统预设服务都是可以通过这样的命令实现 <code>service  服务名  start|stop|restart</code> 这里的服务名就是/etc/init.d/目录下的这些文件了。除了可以使用 <code>service  crond start</code> 启动crond外，还可以使用 <code>/etc/init.d/crond start</code> 来启动。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;言归正传，我们可以使用 chkconfig –list 列出所有的服务以及每个级别是否开启:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># chkconfig --list</span></div><div class="line">abrt-ccpp 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:启用 6:关闭</div><div class="line">abrtd 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:启用 6:关闭</div><div class="line">acpid 0:关闭 1:关闭 2:启用 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">atd 0:关闭 1:关闭 2:关闭 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">auditd 0:关闭 1:关闭 2:启用 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">blk-availability 0:关闭 1:启用 2:启用 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">cpuspeed 0:关闭 1:启用 2:启用 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">crond 0:关闭 1:关闭 2:启用 3:启用 4:启用 5:启用 6:关闭</div><div class="line">haldaemon 0:关闭 1:关闭 2:关闭 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">htcacheclean 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</div><div class="line">httpd 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</div><div class="line">ip6tables 0:关闭 1:关闭 2:启用 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">iptables 0:关闭 1:关闭 2:启用 3:启用 4:启用 5:启用 6:关闭</div><div class="line">irqbalance 0:关闭 1:关闭 2:关闭 3:启用 4:启用 5:启用 6:关闭</div><div class="line">kdump 0:关闭 1:关闭 2:关闭 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">lvm2-monitor 0:关闭 1:启用 2:启用 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">mdmonitor 0:关闭 1:关闭 2:启用 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">messagebus 0:关闭 1:关闭 2:启用 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">netconsole 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</div><div class="line">netfs 0:关闭 1:关闭 2:关闭 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">network 0:关闭 1:关闭 2:启用 3:启用 4:启用 5:启用 6:关闭</div><div class="line">ntpd 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</div><div class="line">ntpdate 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</div><div class="line">postfix 0:关闭 1:关闭 2:启用 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">psacct 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</div><div class="line">quota_nld 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</div><div class="line">rdisc 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</div><div class="line">restorecond 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</div><div class="line">rngd 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</div><div class="line">rsyslog 0:关闭 1:关闭 2:启用 3:关闭 4:启用 5:启用 6:关闭</div><div class="line">saslauthd 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</div><div class="line">smartd 0:关闭 1:关闭 2:关闭 3:关闭 4:关闭 5:关闭 6:关闭</div><div class="line">sshd 0:关闭 1:关闭 2:启用 3:启用 4:启用 5:启用 6:关闭</div><div class="line">sysstat 0:关闭 1:启用 2:启用 3:启用 4:启用 5:启用 6:关闭</div><div class="line">udev-post 0:关闭 1:启用 2:启用 3:关闭 4:启用 5:启用 6:关闭</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这里的级别（0,1,2,3,4,5,6）就是 /etc/inittab 里面的那几个启动级别了，0、1、6运行级别被系统保留：其中0作为shutdown动作，1作为重启至单用户模式，6为重启；在一般的Linux系统实现中，都使用了2、3、4、5几个级别，在CentOS系统中，2表示无NFS支持的多用户模式，3表示完全多用户模式（也是最常用的级别），4保留给用户自定义，5表示图形登录方式。我们可以使用grep命令把我们想要看的服务过滤出来:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># chkconfig --list |grep cron</span></div><div class="line">crond 0:关闭 1:关闭 2:启用 3:启用 4:启用 5:启用 6:关闭</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;现在我们只是看到了各服务在每个级别下是否开启，那么如何去更改哪个级别下是否开启呢？</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># chkconfig --level 3 crond off</span></div><div class="line">[root@localhost ~]<span class="comment"># chkconfig --list |grep cron</span></div><div class="line">crond 0:关闭 1:关闭 2:启用 3:关闭 4:启用 5:启用 6:关闭</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用 –level 指定级别，后面是服务名，然后是 off 或者 on ，–level 后还可以跟多个级别：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># chkconfig --level 345 crond off</span></div><div class="line">[root@localhost ~]<span class="comment"># chkconfig --list |grep cron</span></div><div class="line">crond 0:关闭 1:关闭 2:启用 3:关闭 4:关闭 5:关闭 6:关闭</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;另外还可以省略级别，默认是针对2，3，4，5级别操作：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># chkconfig crond on</span></div><div class="line">[root@localhost ~]<span class="comment"># chkconfig --list |grep cron</span></div><div class="line">crond 0:关闭 1:关闭 2:启用 3:启用 4:启用 5:启用 6:关闭</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;chkconfig 还有一个功能就是可以把某个服务加入到系统服务，即可以使用 <code>service 服务名 start</code> 这样的形式，并且可以在 <code>chkconfig --list</code> 中查找到。当然也能删除掉。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># chkconfig --del crond</span></div><div class="line">[root@localhost ~]<span class="comment"># chkconfig --list |grep cron</span></div><div class="line">[root@localhost ~]<span class="comment"># chkconfig --add crond</span></div><div class="line">[root@localhost ~]<span class="comment"># chkconfig --list |grep cron</span></div><div class="line">crond 0:关闭 1:关闭 2:启用 3:启用 4:启用 5:启用 6:关闭</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这个功能常用在把自定义的启动脚本加入到系统服务当中。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/51. 怎么知道Linux系统安装的时间" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/51. 怎么知道Linux系统安装的时间/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.284Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/51. 怎么知道Linux系统安装的时间/">
        怎么知道Linux系统安装的时间
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在安装系统时，每个分区都会有一个<code>lost+found</code>，而且这个目录的创建时间是和该分区创建的时间一样的。所以如果想知道系统是什么时候安装的，只需要看这个目录的创建时间即可。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;通常情况下，分区都会把/boot单独分一个区，所以只要查看<code>/boot/lost+found</code>这个目录的创建时间即可。比较简单的方法是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls -ld /boot/lost+found</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果/boot/不是单独分区，那么就看一下 / 下的吧。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls -ld /lost+found</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/69. CentOS 7 下使用iptables" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/69. CentOS 7 下使用iptables/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.283Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/69. CentOS 7 下使用iptables/">
        CentOS 7 下使用iptables
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;系统升级到CentOS 7后总感觉iptables怪怪的,比如不管怎么保存重启后都被初始化一下,即便我最后发大绝招启动时候加命令:</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;首先iptables-save &gt; /etc/iptables.rules保存当前状态。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@openstack1 ~]<span class="comment"># iptables-save &gt; /etc/iptables.rules</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;然后再在/etc/rc.local中强制加上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">iptables-restore/etc/iptables.rules</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;重启后虽然规则生效但仔细看规则还是一些被莫名添加的额外的内容，让人很是不爽。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;仔细一google,发现问题之所在了。RedHat在7中更改了系统软件，不再使用iptables作为系统的防火墙，而是使用了FirewallD,但是为了兼容过去的命令也可以使用iptables来设置防护规则，但启动的时候自搞了一套。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;解决方法也很简单:</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;首先，可以考虑follow官方的想法转用FirewallD 。其实查看一些官方文档也能用。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;但是，个人觉得若没有显著的提升也可以继续使用原来的iptables.若打算继续使用iptables,可以继续做如下:</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;备份当前规则</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@openstack1 ~]<span class="comment"># iptables-save &gt; iptables.rules</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;禁用FireWallD,安装&amp;启用iptables-services</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@openstack1 ~]<span class="comment"># systemctl stop firewalld</span></div><div class="line">[root@openstack1 ~]<span class="comment"># systemctl mask firewalld</span></div><div class="line">Created symlink from /etc/systemd/system/firewalld.service to /dev/null.</div><div class="line">[root@openstack1 ~]<span class="comment"># yum install -y iptables-services</span></div><div class="line">[root@openstack1 ~]<span class="comment"># systemctl enable iptables</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;mask是比disable 更强劲的禁用</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;为了让/etc/init.d/iptables save 这条命令生效，需要这么做</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@openstack1 ~]<span class="comment"># cp /usr/libexec/iptables/iptables.init /etc/init.d/iptables</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;而chkconfig iptables 命令会自动重定向到sytemctl enable iptables</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@openstack1 ~]<span class="comment"># chkconfig ipatbles</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这时候检查iptables发现规则被清空了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@openstack1 ~]<span class="comment"># iptables -nxL</span></div><div class="line">Chain INPUT (policy ACCEPT)</div><div class="line">target   prot   opt   <span class="built_in">source</span>   destination </div><div class="line"></div><div class="line">Chain FORWARD (policy ACCEPT)</div><div class="line">target   prot   opt   <span class="built_in">source</span>   destination </div><div class="line"></div><div class="line">Chain OUTPUT (policy ACCEPT)</div><div class="line">target   prot   opt   <span class="built_in">source</span>   destination</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;将备份的规则还原</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@openstack1 ~]<span class="comment"># iptables-restore iptables.rules</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;保存当前规则</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@openstack1 ~]<span class="comment"># /usr/libexec/iptables/iptables.init save</span></div><div class="line">iptables: Saving firewall rules to /etc/sysconfig/iptables:[ 确定 ]</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;若使用minimize版本的安装，可能会出现提示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">iptables: Saving firewall rules to /etc/sysconfig/iptables: /etc/init.d/iptables: line 274: restorecon: <span class="built_in">command</span> not found</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这是因为selinux没有安装的缘故，缺少一个组件。安装policycoreutils即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@openstack1 ~]<span class="comment"># yum install -y policycoreutils</span></div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/37. 利用tar通过网络拷贝数据" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/37. 利用tar通过网络拷贝数据/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.283Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/37. 利用tar通过网络拷贝数据/">
        利用tar通过网络拷贝数据
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># cd /data  // data目录下有我们要拷贝的目标文件目录 test</span></div><div class="line"><span class="comment"># tar cvf  -  test| ssh 10.0.1.11 "cd /copy1/; tar xvf  -"  //首先将要拷贝的目录test打包，"-" 代表标准输出，然后再ssh 到目标主机 10.0.1.11 ，运行相应的命令。其中tar xvf  - 意思是，将前面的标准输出内容作为解包的对象。</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;总结：其实就是想拷贝的目录先打包，然后将打包好的文件拷贝到目标主机，最后在目标主机上解包。只不过，我们用一条命令实现了边打包边解包的过程。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/45.让命令历史永久保存并加时间戳" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/45.让命令历史永久保存并加时间戳/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.282Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/45.让命令历史永久保存并加时间戳/">
        让命令历史永久保存并加时间戳
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line">grep HISTTIMEFORMAT /etc/bashrc || <span class="built_in">echo</span> <span class="string">'export HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S "'</span> &gt;&gt;/etc/bashrc</div><div class="line"><span class="keyword">for</span> U <span class="keyword">in</span> `grep -v shutdown /etc/passwd|awk -F: <span class="string">'$NF~/sh/&amp;&amp;$NF!~/no/&#123;print $1&#125;'</span>`</div><div class="line"><span class="keyword">do</span></div><div class="line">    UHOME=`cat /etc/passwd|grep <span class="string">"^<span class="variable">$U</span>"</span>|cut -d: -f6`</div><div class="line">    [ ! -f <span class="variable">$UHOME</span>/.bash_history ] &amp;&amp; touch <span class="variable">$UHOME</span>/.bash_history</div><div class="line">    chattr +a <span class="variable">$UHOME</span>/.bash_history</div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/18. Linux 的文件系统" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/18. Linux 的文件系统/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.281Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/18. Linux 的文件系统/">
        Linux 的文件系统
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;搞计算机的应该都知道windows的系统格式化硬盘时会指定格式，fat 或者 ntfs。而 linux的文件系统格式为Ext3，或者Ext4 。早期的linux使用Ext2格式，目前的linux都使 用了Ext3, 而CentOS6已经使用了Ext4. Ext2文件系统虽然是高效稳定的。但是，随着  Linux系统在关键业务中的应用，Linux文件系统的弱点也渐渐显露出来了，因为Ext2文件系统是非日志文件系统。这在关键行业的应用是一个致命的弱点。Ext3文件系统是直接从  Ext2文件系统发展而来，Ext3文件系统带有日志功能，可以跟踪记录文件系统的变化，并将变化内容写入日志，写操作首先是对日志记录文件进行操作，若整个写操作由于某种原因 (如系统掉电) 而中断，系统重启时，会根据日志记录来恢复中断前的写操作，而且这个过程费时极短。目前Ext3文件系统已经非常稳定可靠。它完全兼容Ext2文件系统。用户可以平滑地过渡到一个日志功能健全的文件系统中来。这实际上了也是ext3日志文件系统初始设计的初衷。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;而现在我们使用的Ext4文件系统，较Ext3文件系统又有很多好的特性，最明显的特征是，Ext4支持的最大文件系统容量和单个最大文件大小，详细的区别阿铭不再介绍，这需要你到网上搜一下以丰富你的知识点。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux文件系统在windows中是不能识别的，但是在linux系统中你可以挂载的windows的文件系统，linux目前支持MS-DOS，VFAT，FAT，BSD等格式，如果你使用的是Redhat或者CentOS，那么请不要妄图挂载NTFS格式的分区到linux下，因为它不支持NTFS。虽然有些版本的linux支持NTFS，但不建议使用，因为目前的技术还不成熟。但有时，的确会有这方面 的需求，你可以安装ntfs-3g软件包来解决这个问题。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Ext3文件系统为早期版本Redhat/CentOS默认使用的文件系统，目前Ext4为默认文件系统，除了Ext3/Ext4文件系统外，有些linux发行版例如SuSE默认的文件系统为reiserFS, Ext3 独特的优点就是易于转换，很容易在 Ext2 和 Ext3 之间相互转换，而具有良好的兼容性，其它优点 ReiserFS 都有，而且还比它做得更好。如高效的磁盘空间利用和独特的搜寻方式都是Ext3 所不具备的，速度上它也不能和 ReiserFS相媲美，在实际使用过程中，reiserFS 也更加安全高效，据说反删除功能也不错。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ReiserFS 的优势在于，它是基于 B*Tree 快速平衡树这种高效算法的文件系统，例如在处理小于 1k 的文件比 Ext文件系统快10倍。再一个就是ReiserFS空间浪费较少，它不会对一些小文件分配 inode，而是打包存放在同一个磁盘块 (簇) 中，Ext是把它们单独存放在不同的簇上，如簇大小为 4k，那么 2 个 100 字节的文件会占用 2 个簇，ReiserFS则只占用一个。当然ReiserFS也有缺点，就是每升级一个版本，都要将磁盘重新格式化一次。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/55/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/54/">54</a><a class="page-number" href="/page/55/">55</a><span class="page-number current">56</span><a class="page-number" href="/page/57/">57</a><a class="page-number" href="/page/58/">58</a><span class="space">&hellip;</span><a class="page-number" href="/page/63/">63</a><a class="extend next" rel="next" href="/page/57/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2017 失落的乐章
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    

<script>
	var yiliaConfig = {
		fancybox: ,
		mathjax: ,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



  </div>
</body>
</html>