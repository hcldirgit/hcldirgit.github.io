<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>失落的乐章</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="失落的乐章的Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="失落的乐章">
<meta property="og:url" content="https://hcldirgit.github.io/page/57/index.html">
<meta property="og:site_name" content="失落的乐章">
<meta property="og:description" content="失落的乐章的Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="失落的乐章">
<meta name="twitter:description" content="失落的乐章的Blog">
  
    <link rel="alternative" href="/atom.xml" title="失落的乐章" type="application/atom+xml">
  
  
    <link rel="icon" href="https://hcldirgit.github.io/images/0.png">
  
  <link rel="stylesheet" href="/css/style.css">
  
  
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85415703-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://hcldirgit.github.io/images/0.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">失落的乐章</a></h1>
		</hgroup>

		
		<p class="header-subtitle">技术面前，永远都是学生。</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Ansible/" style="font-size: 10.42px;">Ansible</a> <a href="/tags/Apache/" style="font-size: 18.33px;">Apache</a> <a href="/tags/Cacti/" style="font-size: 11.67px;">Cacti</a> <a href="/tags/DNS/" style="font-size: 13.33px;">DNS</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/FTP/" style="font-size: 11.25px;">FTP</a> <a href="/tags/Git/" style="font-size: 10.83px;">Git</a> <a href="/tags/HA集群/" style="font-size: 11.67px;">HA集群</a> <a href="/tags/Hadoop/" style="font-size: 12.5px;">Hadoop</a> <a href="/tags/Jenkins/" style="font-size: 10.42px;">Jenkins</a> <a href="/tags/LAMP/" style="font-size: 19.58px;">LAMP</a> <a href="/tags/LNMP/" style="font-size: 17.08px;">LNMP</a> <a href="/tags/LVS/" style="font-size: 16.67px;">LVS</a> <a href="/tags/Linux/" style="font-size: 19.17px;">Linux</a> <a href="/tags/Linux命令/" style="font-size: 20px;">Linux命令</a> <a href="/tags/Linux安全/" style="font-size: 14.17px;">Linux安全</a> <a href="/tags/Memcached/" style="font-size: 11.25px;">Memcached</a> <a href="/tags/MongoDB/" style="font-size: 15.42px;">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 17.5px;">MySQL</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/Nagios/" style="font-size: 11.67px;">Nagios</a> <a href="/tags/Nginx/" style="font-size: 17.92px;">Nginx</a> <a href="/tags/OpenStack/" style="font-size: 11.25px;">OpenStack</a> <a href="/tags/Php/" style="font-size: 14.58px;">Php</a> <a href="/tags/Puppet/" style="font-size: 11.25px;">Puppet</a> <a href="/tags/Python/" style="font-size: 14.58px;">Python</a> <a href="/tags/Redis/" style="font-size: 16.25px;">Redis</a> <a href="/tags/Resin/" style="font-size: 10px;">Resin</a> <a href="/tags/Saltstack/" style="font-size: 10px;">Saltstack</a> <a href="/tags/Samba/" style="font-size: 12.08px;">Samba</a> <a href="/tags/Squid/" style="font-size: 14.58px;">Squid</a> <a href="/tags/Tomcat/" style="font-size: 13.75px;">Tomcat</a> <a href="/tags/Zabbix/" style="font-size: 15.83px;">Zabbix</a> <a href="/tags/haproxy/" style="font-size: 12.5px;">haproxy</a> <a href="/tags/keepalived/" style="font-size: 12.92px;">keepalived</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/shell练习/" style="font-size: 18.75px;">shell练习</a> <a href="/tags/正则表达式/" style="font-size: 12.92px;">正则表达式</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">失落的乐章</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://hcldirgit.github.io/images/0.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">失落的乐章</h1>
			</hgroup>
			
			<p class="header-subtitle">技术面前，永远都是学生。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-1. Linux 基础/59. iptables中的DNAT、SNAT和MASQUERADE" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/59. iptables中的DNAT、SNAT和MASQUERADE/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.280Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/59. iptables中的DNAT、SNAT和MASQUERADE/">
        iptables中的DNAT、SNAT、和MASQUERADE
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DNAT（Destination Network Address Translation,目的地址转换) 通常被叫做目的映谢。而SNAT（Source Network Address Translation，源地址转换）通常被叫做源映谢。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这是在设置Linux网关或者防火墙时经常要用来的两种方式。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;首先，要了解一下IP包的结构，如下图所示：</p>
<p><img src="https://github.com/hcldirgit/image/blob/master/iptables%E4%B8%ADDNAT%E3%80%81SNAT%E5%92%8CMASQUERADE/01.png?raw=true" alt=""></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在任何一个IP数据包中，都会有Source IP Address与Destination IP Address这两个字段，数据包所经过的路由器也是根据这两个字段是判定数据包是由什么地方发过来的，它要将数据包发到什么地方去。而iptables的DNAT与SNAT就是根据这个原理，对Source IP Address与Destination IP Address进行修改。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;然后，再看看数据包在iptables中要经过的链（chain）：</p>
<p><img src="https://github.com/hcldirgit/image/blob/master/iptables%E4%B8%ADDNAT%E3%80%81SNAT%E5%92%8CMASQUERADE/02.png?raw=true" alt=""></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;图中正菱形的区域是对数据包进行判定转发的地方。在这里，系统会根据IP数据包中的destination ip address中的IP地址对数据包进行分发。如果destination ip adress是本机地址，数据将会被转交给INPUT链。如果不是本机地址，则交给FORWARD链检测。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这也就是说，要做的DNAT要在进入这个菱形转发区域之前，也就是在PREROUTING链中做，比如要把访问202.103.96.112的访问转发到192.168.0.112上：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">iptables -t nat -A PREROUTING -d 202.103.96.112 -j DNAT --to-destination 192.168.0.112</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这个转换过程当中，其实就是将已经达到这台Linux网关（防火墙）上的数据包上的destination ip address从202.103.96.112修改为192.168.0.112然后交给系统路由进行转发。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;而SNAT自然是要在数据包流出这台机器之前的最后一个链也就是POSTROUTING链来进行操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -j SNAT --to-source 58.20.51.66</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这个语句就是告诉系统把即将要流出本机的数据的source ip address修改成为58.20.51.66。这样，数据包在达到目的机器以后，目的机器会将包返回到58.20.51.66也就是本机。如果不做这个操作，那么你的数据包在传递的过程中，reply的包肯定会丢失。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;假如当前系统用的是ADSL/3G/4G动态拨号方式，那么每次拨号，出口IP都会改变，SNAT就会有局限性。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -o eth0 -j MASQUERADE</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;重点在那个『 MASQUERADE 』！这个设定值就是『IP伪装成为封包出去(-o)的那块装置上的IP』！不管现在eth0的出口获得了怎样的动态ip，MASQUERADE会自动读取eth0现在的ip地址然后做SNAT出去，这样就实现了很好的动态SNAT地址转换。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/40.Linux源码包安装" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/40.Linux源码包安装/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.279Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/40.Linux源码包安装/">
        Linux源码包安装
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在linux下面安装一个源码包是最常用的，在日常的管理工作中，大部分软件都是通过源码安装的。安装一个源码包，是需要自己把源代码编译成二进制的可执行文件。如果读得懂这些源代码，那么就可以去修改这些源代码自定义功能，然后再去编译成想要的。使用源码包的好处除了可以自定义修改源代码外还可以定制相关的功能，因为源码包在编译的时候是可以附加额外的选项的。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;源码包的编译用到了linux系统里的编译器，常见的源码包一般都是用C语言开发的，这也是因为C语言为linux上最标准的程序语言。Linux上的C语言编译器叫做gcc，利用它就可以把C语言变成可执行的二进制文件。所以如果你的机器上没有安装gcc就没有办法去编译源码。你可以使用 yum install -y gcc 来完成安装。</p>
<h2 id="安装一个源码包，通常需要三个步骤："><a href="#安装一个源码包，通常需要三个步骤：" class="headerlink" title="安装一个源码包，通常需要三个步骤："></a>安装一个源码包，通常需要三个步骤：</h2><h3 id="configure"><a href="#configure" class="headerlink" title="./configure"></a>./configure</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在这一步可以定制功能，加上相应的选项即可，具有有什么选项可以通过 ./configure –help 命令来查看。在这一步会自动检测你的linux系统与相关的套件是否有编译该源码包时需要的库，因为一旦缺少某个库就不能完成编译。只有检测通过后才会生成一个Makefile文件。</p>
<h3 id="make"><a href="#make" class="headerlink" title="make"></a>make</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;使用这个命令会根据Makefile文件中预设的参数进行编译，这一步其实就是gcc在工作了。</p>
<h3 id="make-install"><a href="#make-install" class="headerlink" title="make install"></a>make install</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;安装步骤，生成相关的软件存放目录和配置文件的过程。</p>
<h2 id="Apache源码安装实例"><a href="#Apache源码安装实例" class="headerlink" title="Apache源码安装实例"></a>Apache源码安装实例</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;上面的3步并不是所有的源码包软件都一样的，也就是说源码包的安装并非具有一定的标准安装步骤。这就需要拿到源码包解压后，然后进入到目录找相关的帮助文档，通常会以INSTALL或者README为文件名。所以一定要去看一下。</p>
<h3 id="1-下载一个源码包"><a href="#1-下载一个源码包" class="headerlink" title="1.下载一个源码包"></a>1.下载一个源码包</h3><p>下载源码包一定要去官方站点去下载，不要在网上随便下载，那样很不安全。因为下载到的源码包很有可能是被人修改过的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost src]<span class="comment"># cd /usr/local/src/</span></div><div class="line">[root@localhost src]<span class="comment"># wget http://mirrors.hust.edu.cn/apache/httpd/httpd-2.2.27.tar.bz2</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;下载地址为apache官方网站上提供的一个镜像，下载速度还可以。在下载之前，进入到了 “/usr/local/src” 目录，这是因为习惯把源码包都放到这个目录下，这样做的好处是，方便自己和其他管理员维护，所以以后下载的源码包都统一放到这个目录下吧。</p>
<h3 id="2-解压源码包"><a href="#2-解压源码包" class="headerlink" title="2.解压源码包"></a>2.解压源码包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost src]<span class="comment"># tar jxvf httpd-2.2.27.tar.bz2</span></div></pre></td></tr></table></figure>
<h3 id="3-配置相关的选项，并生成Makefile"><a href="#3-配置相关的选项，并生成Makefile" class="headerlink" title="3.配置相关的选项，并生成Makefile"></a>3.配置相关的选项，并生成Makefile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">[root@localhost src]<span class="comment"># cd httpd-2.2.27</span></div><div class="line">[root@localhost httpd-2.2.27]<span class="comment"># ./configure --help |less</span></div><div class="line">`configure<span class="string">' configures this package to adapt to many kinds of systems.</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">Usage: ./configure [OPTION]... [VAR=VALUE]...</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">To assign environment variables (e.g., CC, CFLAGS...), specify them as</span></div><div class="line"><span class="string">VAR=VALUE.  See below for descriptions of some of the useful variables.</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">Defaults for the options are specified in brackets.</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">Configuration:</span></div><div class="line"><span class="string">  -h, --help              display this help and exit</span></div><div class="line"><span class="string">      --help=short        display options specific to this package</span></div><div class="line"><span class="string">      --help=recursive    display the short help of all the included packages</span></div><div class="line"><span class="string">  -V, --version           display version information and exit</span></div><div class="line"><span class="string">  -q, --quiet, --silent   do not print `checking ...'</span> messages</div><div class="line">      --cache-file=FILE   cache <span class="built_in">test</span> results <span class="keyword">in</span> FILE [disabled]</div><div class="line">  -C, --config-cache      <span class="built_in">alias</span> <span class="keyword">for</span> `--cache-file=config.cache<span class="string">'</span></div><div class="line"><span class="string">  -n, --no-create         do not create output files</span></div><div class="line"><span class="string">      --srcdir=DIR        find the sources in DIR [configure dir or `..'</span>]</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;使用 ./configure –help 命令查看可以使用的选项。一般常用的有 –prefix=PREFIX 这个选项的意思是定义软件包安装到哪里。一个小小的建议，通常源码包都是安装在/usr/local/目录下的。比如，把apache安装在/usr/local/apache2下，那么这里就应该这样写 –prefix=/usr/local/apache2 其他还有好多选项，如果有耐心可以挨个去看一看都有什么作用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">[root@localhost httpd-2.2.27]<span class="comment"># ./configure --prefix=/usr/local/apache2</span></div><div class="line">checking <span class="keyword">for</span> chosen layout... Apache</div><div class="line">checking <span class="keyword">for</span> working mkdir -p... yes</div><div class="line">checking build system <span class="built_in">type</span>... i686-pc-linux-gnu</div><div class="line">checking host system <span class="built_in">type</span>... i686-pc-linux-gnu</div><div class="line">checking target system <span class="built_in">type</span>... i686-pc-linux-gnu</div><div class="line"></div><div class="line">Configuring Apache Portable Runtime library ...</div><div class="line"></div><div class="line">checking <span class="keyword">for</span> APR... reconfig</div><div class="line">configuring package <span class="keyword">in</span> srclib/apr now</div><div class="line">checking build system <span class="built_in">type</span>... i686-pc-linux-gnu</div><div class="line">checking host system <span class="built_in">type</span>... i686-pc-linux-gnu</div><div class="line">checking target system <span class="built_in">type</span>... i686-pc-linux-gnu</div><div class="line">Configuring APR library</div><div class="line">Platform: i686-pc-linux-gnu</div><div class="line">checking <span class="keyword">for</span> working mkdir -p... yes</div><div class="line">APR Version: 1.4.6</div><div class="line">checking <span class="keyword">for</span> chosen layout... apr</div><div class="line">checking <span class="keyword">for</span> gcc... no</div><div class="line">checking <span class="keyword">for</span> cc... no</div><div class="line">checking <span class="keyword">for</span> cl.exe... no</div><div class="line">configure: error: <span class="keyword">in</span> `/usr/<span class="built_in">local</span>/src/httpd-2.2.27/srclib/apr<span class="string">':</span></div><div class="line"><span class="string">configure: error: no acceptable C compiler found in $PATH</span></div><div class="line"><span class="string">See `config.log'</span> <span class="keyword">for</span> more details</div><div class="line">configure failed <span class="keyword">for</span> srclib/apr</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;不幸的是，一开始就报错了，因为没有gcc编译器，需要先安装一下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost httpd-2.2.27]<span class="comment"># yum install -y gcc</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;由于gcc依赖的包很多，所以安装时间会长一些。安装完后，再继续上面的步骤。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost httpd-2.2.27]<span class="comment"># ./configure --prefix=/usr/local/apache2</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;验证这一步是否成功的命令是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost httpd-2.2.27]<span class="comment"># echo $?</span></div><div class="line">0</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;返回值如果是 “0” 则执行成功，否则就是没有成功。此时就成功生成 Makefile 了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost httpd-2.2.27]<span class="comment"># ls -l Makefile</span></div><div class="line">-rw-r--r-- 1 root root 8954 5月  13 12:02 Makefile</div></pre></td></tr></table></figure>
<h3 id="4-进行编译"><a href="#4-进行编译" class="headerlink" title="4.进行编译"></a>4.进行编译</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost httpd-2.2.27]<span class="comment"># make</span></div><div class="line">-bash: make: <span class="built_in">command</span> not found</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;又发生错误了，提示 “make” 命令没有发现，解决办法是安装make工具。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost httpd-2.2.27]<span class="comment"># yum install -y make</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;继续make</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost httpd-2.2.27]<span class="comment"># make</span></div><div class="line">Making all <span class="keyword">in</span> srclib</div><div class="line">make[1]: Entering directory `/usr/<span class="built_in">local</span>/src/httpd-2.2.27/srclib<span class="string">'</span></div><div class="line"><span class="string">Making all in apr</span></div><div class="line"><span class="string">make[2]: Entering directory `/usr/local/src/httpd-2.2.27/srclib/apr'</span></div><div class="line">make[3]: Entering directory `/usr/<span class="built_in">local</span>/src/httpd-2.2.27/srclib/apr<span class="string">'</span></div><div class="line"><span class="string">/bin/sh /usr/local/src/httpd-2.2.27/srclib/apr/libtool --silent --mode=compile gcc -g -O2 -pthread   -DHAVE_CONFIG_H -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE   -I./include -I/usr/local/src/httpd-2.2.27/srclib/apr/include/arch/unix -I./include/arch/unix -I/usr/local/src/httpd-2.2.27/srclib/apr/include/arch/unix -I/usr/local/src/httpd-2.2.27/srclib/apr/include  -o passwd/apr_getpass.lo -c passwd/apr_getpass.c &amp;&amp; touch passwd/apr_getpass.lo</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;编译的时候，就会出现类似这么多乱七八糟的信息，编译的时间比较长，CPU使用率会很高，这是因为CPU高速计算，编译完后，再使用 echo $? 验证一下是否正常成功。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost httpd-2.2.27]<span class="comment"># echo $?</span></div><div class="line">0</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果是0的话，就可以执行最后一步了。</p>
<h3 id="5-安装"><a href="#5-安装" class="headerlink" title="5.安装"></a>5.安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost httpd-2.2.27]<span class="comment"># make install</span></div><div class="line">Making install <span class="keyword">in</span> srclib</div><div class="line">make[1]: Entering directory `/usr/<span class="built_in">local</span>/src/httpd-2.2.27/srclib<span class="string">'</span></div><div class="line"><span class="string">Making install in apr</span></div><div class="line"><span class="string">make[2]: Entering directory `/usr/local/src/httpd-2.2.27/srclib/apr'</span></div><div class="line">make[3]: Entering directory `/usr/<span class="built_in">local</span>/src/httpd-2.2.27/srclib/apr<span class="string">'</span></div><div class="line"><span class="string">make[3]: Nothing to be done for `local-all'</span>.</div><div class="line">make[3]: Leaving directory `/usr/<span class="built_in">local</span>/src/httpd-2.2.27/srclib/apr<span class="string">'</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;当然也可以使用 echo $? 看看有没有正确安装，执行完这一步，则会在 “/usr/local/apache2” 目录下增加了很多目录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost httpd-2.2.27]<span class="comment"># ls /usr/local/apache2/</span></div><div class="line">bin    cgi-bin  error   icons    lib   man     modules</div><div class="line">build  conf     htdocs  include  logs  manual</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;到此，apache源码的安装就完成了</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-1. Linux 基础/30. vim编辑器里面一些不为人知的操作" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/1. Linux 基础/30. vim编辑器里面一些不为人知的操作/" class="article-date">
  	<time datetime="2017-09-02T17:55:11.278Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/1. Linux 基础/30. vim编辑器里面一些不为人知的操作/">
        vim编辑器里面一些不为人知的操作
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-vim编辑器的替换模式与可视模式"><a href="#1-vim编辑器的替换模式与可视模式" class="headerlink" title="1.vim编辑器的替换模式与可视模式"></a>1.vim编辑器的替换模式与可视模式</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下按键盘上的<code>r</code>和<code>R</code>进入替换模式。如果按小r那么这时候就进入了替换模式，你下一个输入的字符会把你当前光标所在处的字符替换，然后自动退出替换模式。如果你按的是大R那么你下面输入的所有字符会把后面的字符依次替换，直到按退出替换模式。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下按键盘上的<code>v</code>和<code>V</code>进入可视模式。如果是按小v那么这时候就时入了视图模式，这时候你移动光标会把你光标所在处到光标结尾处的所有字符选中，这时候可以进行复制，删除等操作。如果是按大V同样也是进入了视图模式，这时候移动光标会把光标所在行到光标结尾的行的所有内容选中，也可以进行复制，删除等操作。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>注意</strong>：使用在一般模式使用“ctrl+v”组合键可以进入块操作模式</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在这个模式下和可视模式差不多，但是选择的内容不同，大家可实际操作看看</p>
<h2 id="2-删除从光标所在处到行尾字符"><a href="#2-删除从光标所在处到行尾字符" class="headerlink" title="2.删除从光标所在处到行尾字符"></a>2.删除从光标所在处到行尾字符</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入大写“<code>Ｄ</code>”或者输入“<code>d$</code>”</p>
<h2 id="3-删除从光标所在处到行首字符"><a href="#3-删除从光标所在处到行首字符" class="headerlink" title="3.删除从光标所在处到行首字符"></a>3.删除从光标所在处到行首字符</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入大写“<code>d^</code>”</p>
<h2 id="4-删除从光标所在行到文件末尾行"><a href="#4-删除从光标所在行到文件末尾行" class="headerlink" title="4.删除从光标所在行到文件末尾行"></a>4.删除从光标所在行到文件末尾行</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入大写“<code>dG</code>”</p>
<h2 id="5-删除指定范围内所有行"><a href="#5-删除指定范围内所有行" class="headerlink" title="5.删除指定范围内所有行"></a>5.删除指定范围内所有行</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：删除10到15行的所有内容<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入“:10,15d”回车</p>
<h2 id="6-把正在编辑的文件另存为新文件"><a href="#6-把正在编辑的文件另存为新文件" class="headerlink" title="6.把正在编辑的文件另存为新文件"></a>6.把正在编辑的文件另存为新文件</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：把正在编辑的文件另存为到“/root/”下面并保存为1.txt<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入“<code>:w /root/1.txt</code>”</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：把正在编辑的文件的第10行到第15行另存为1.txt并保存到root目录下在一般模式下输入“<code>:10,15 w /root/1.txt</code>”</p>
<h2 id="7-把其它文件的内容导入到正在编辑的文件的光标所在处"><a href="#7-把其它文件的内容导入到正在编辑的文件的光标所在处" class="headerlink" title="7.把其它文件的内容导入到正在编辑的文件的光标所在处"></a>7.把其它文件的内容导入到正在编辑的文件的光标所在处</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：把“/root/1.txt” 文件的内容，导入到下在编辑的文件的第10行下面<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;首先在一般模式下按“<code>10G</code>”把光标定位到第10行<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;然后按“<code>o</code>”小写，当前行的下面另起一行，并进入插入模式<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;最后按键盘上的返回到一般模式，再输入“<code>:r /root/1.txt</code>”回车</p>
<h2 id="8-正在编辑文件时，不退出文件仍可以运行linux命令"><a href="#8-正在编辑文件时，不退出文件仍可以运行linux命令" class="headerlink" title="8.正在编辑文件时，不退出文件仍可以运行linux命令"></a>8.正在编辑文件时，不退出文件仍可以运行linux命令</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：我下在编辑一个文件，但这时候我想查看“/root/1.txt” 文件的内容，但是我不想退出我正在编辑的文件，那么我们可以这样<br>在编辑模式下输入“<code>:! cat /root/1.txt</code>”</p>
<h2 id="9-把命令的执行结果导入到正在编辑的文件的光标所在处"><a href="#9-把命令的执行结果导入到正在编辑的文件的光标所在处" class="headerlink" title="9.把命令的执行结果导入到正在编辑的文件的光标所在处"></a>9.把命令的执行结果导入到正在编辑的文件的光标所在处</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这题我们可以结合上面两题，在一般模式下输入“<code>:r ! cat /root/1.txt</code>”</p>
<h2 id="10-查找替换的功能使用"><a href="#10-查找替换的功能使用" class="headerlink" title="10.查找替换的功能使用"></a>10.查找替换的功能使用</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：在10到15行的行首增加“#”<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入“<code>:10,15s/^/#/</code>”</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：在10到15行的行首去掉“#”<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入“<code>:10,15s/^#//</code>”</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：在10到15行的行首增加“//”<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入“<code>:10,15s/^/\/\//</code>”或者“<code>:10,15s@^@//@</code>”或者“<code>:10,15s#^#//#</code>”</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>注意</strong>：在上面所有命令的最后面都可以加g或者c一起配合使用，g的意思是行中出现的所有指定字符都替换，但是如果加了g那么前面就不能出现位置定义字符，反之前面出现的位置定义字符，那么后面就不可以出现g。在后面加c可以跟用户交互，在查找到符合命令的字符提示用户是否替换，需要用户确认，否则不需要确认</p>
<h2 id="11-把输入的指定字符替换为指定的字符"><a href="#11-把输入的指定字符替换为指定的字符" class="headerlink" title="11.把输入的指定字符替换为指定的字符"></a>11.把输入的指定字符替换为指定的字符</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：在编辑一个文档的时候，我要频繁的输入“abcdefghijklmnopqrstuvwxyz”这样的连续字符串，这时候我想只输入一个或者一串指定字符就可以替换为刚才的字符，比如我指定输入“aming”系统就会自动把“aming”替换成“abcdefghijklmnopqrstuvwxyz”<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入“<code>:ab aming abcdefghijklmnopqrstuvwxyz</code>”然后回车，再进入编辑模式，当你输入“aming”的时候就会发现自动替换成了“abcdefghijklmnopqrstuvwxyz”</p>
<h2 id="12-快捷键的定义"><a href="#12-快捷键的定义" class="headerlink" title="12.快捷键的定义"></a>12.快捷键的定义</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：我想在一般模式下按键盘上的ctrl+b快捷键，会自动在光标所在行的行首插入“#”号，然后自动退出到一般模式<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入“<code>:map ctrl+v ctrl+b I #</code>”然后回车，这时候在一般模式按键盘上的ctrl+b的时候就会在光标所在的行首插入“#”号了</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>注意</strong>：命令中<code>ctrl+v</code>和<code>ctrl+b</code>是键盘上的组合键，不是输入进去的字符，是需要按的组合键，其中第一个ctrl+v就照按，第二个ctrl+b是要定义的快捷键，根据自己需要的设置按。然后“I”的意思就是一般模式下的“I”进入插入模式并将光标移动到行首，然后接着输入“#”号，后面“”的意思是退出编辑模式</p>
<h2 id="13-同进编辑两个文件或者"><a href="#13-同进编辑两个文件或者" class="headerlink" title="13.同进编辑两个文件或者"></a>13.同进编辑两个文件或者</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：我现正在编辑１.txt文件，然后我想再打开root目录下的2.txt同时编辑，并把窗口上下水平分隔，一起显示<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入“<code>:new /root/2.txt</code>”</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例：我现正在编辑１.txt文件，然后我想再打开root目录下的2.txt同时编辑，并把窗口左右垂直分隔，一起显示<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入“<code>:vsplit /root/2.txt</code>”</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>注意</strong>：在一般模式下按“<code>ctrl+w</code>”组合键，再按左右，或者上下方向键，可以在不同窗口之间切换如果在一般模式下输入“<code>:only</code>”那么只保留当前正在编辑的窗口，其它全关闭</p>
<h2 id="15-在vim查找关键字时不区分大小写"><a href="#15-在vim查找关键字时不区分大小写" class="headerlink" title="15.在vim查找关键字时不区分大小写"></a>15.在vim查找关键字时不区分大小写</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入“<code>:set ic</code>”</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果想取消就输入“<code>:set noic</code>”</p>
<h2 id="16-如何把文件设置成只读文件，只有强制保存时才能保存"><a href="#16-如何把文件设置成只读文件，只有强制保存时才能保存" class="headerlink" title="16.如何把文件设置成只读文件，只有强制保存时才能保存"></a>16.如何把文件设置成只读文件，只有强制保存时才能保存</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入“<code>:set readonly</code>”</p>
<h2 id="17-把文件恢复到打开时的状态"><a href="#17-把文件恢复到打开时的状态" class="headerlink" title="17.把文件恢复到打开时的状态"></a>17.把文件恢复到打开时的状态</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在一般模式下输入“<code>:e!</code>”</p>
<h2 id="18-配置文件的使用"><a href="#18-配置文件的使用" class="headerlink" title="18.配置文件的使用"></a>18.配置文件的使用</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;以上那么多操作，像设置忽略大小写，设定快捷键，设定自动替换，等一些操作，当电脑重启后就没有了。这时候我们可以把这些命令写入配置文件，这样电脑重启后还是可以使用，我们有两种方法</p>
<ul>
<li>第一种：所有用户都统一<br>修改“<code>/etc/vimrc</code>”文件，在末尾加入需要设置的命令，就是我红色标注的部分</li>
<li>第二种：只对当前用户<br>修改用户家目录下的“.vimrc”文件，注意有个点，这是隐藏文件，一般用户家下没有，需要自己手工创建</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Shell 练习/48. shell 练习-判断用户是否登录中" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/01/Shell 练习/48. shell 练习-判断用户是否登录中/" class="article-date">
  	<time datetime="2017-09-01T08:08:26.490Z" itemprop="datePublished">2017-09-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/01/Shell 练习/48. shell 练习-判断用户是否登录中/">
        shell 练习-判断用户是否登录中
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>编写一个名为ifuser的程序，它执行时带用户名作为命令行参数，判断该用户是否已经在系统中登录，并给出相关信息。</p>
</li>
<li><p>编写一个名为menu的程序，实现简单的弹出式菜单功能，用户能根据显示的菜单项从键盘选择执行对应的命令。</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="built_in">read</span> -p <span class="string">"Please input the username: "</span> user</div><div class="line"><span class="keyword">if</span> who | grep -qw <span class="variable">$user</span></div><div class="line"><span class="keyword">then</span></div><div class="line">    <span class="built_in">echo</span> <span class="variable">$user</span> is online.</div><div class="line"><span class="keyword">else</span></div><div class="line">    <span class="built_in">echo</span> <span class="variable">$user</span> not online.</div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="keyword">function</span> message()</div><div class="line">&#123;</div><div class="line">    <span class="built_in">echo</span> <span class="string">"0. w"</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"1. ls"</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"2.quit"</span></div><div class="line">    <span class="built_in">read</span> -p <span class="string">"Please input parameter: "</span> Par</div><div class="line">&#125;</div><div class="line">message</div><div class="line"><span class="keyword">while</span> [ <span class="variable">$Par</span> -ne <span class="string">'2'</span> ] ; <span class="keyword">do</span></div><div class="line">    <span class="keyword">case</span> <span class="variable">$Par</span> <span class="keyword">in</span></div><div class="line">    0)</div><div class="line">        w</div><div class="line">        ;;</div><div class="line">    1)</div><div class="line">        ls</div><div class="line">        ;;</div><div class="line">    2)</div><div class="line">        <span class="built_in">exit</span></div><div class="line">        ;;</div><div class="line">    *)</div><div class="line">        <span class="built_in">echo</span> <span class="string">"Unkown command"</span></div><div class="line">        ;;</div><div class="line">  <span class="keyword">esac</span></div><div class="line">  message</div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell练习/">shell练习</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Shell 练习/47. shell 练习-判断某个文件是否存在" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/01/Shell 练习/47. shell 练习-判断某个文件是否存在/" class="article-date">
  	<time datetime="2017-09-01T08:08:26.489Z" itemprop="datePublished">2017-09-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/01/Shell 练习/47. shell 练习-判断某个文件是否存在/">
        shell 练习-判断某个文件是否存在
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>编写一个名为iffile程序，它执行时判断/bin目录下date文件是否存在？</p>
</li>
<li><p>编写一个名为greet的问候程序，它执行时能根据系统当前的时间向用户输出问候信息。设从半夜到中午为早晨，中午到下午六点为下午，下午六点到半夜为晚上。</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="keyword">if</span> [ -f /bin/date  ] </div><div class="line"><span class="keyword">then</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"/bin/date file exist."</span></div><div class="line"><span class="keyword">else</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"/bin/date not exist."</span></div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">h=`date +%H`</div><div class="line"><span class="keyword">if</span> [ <span class="variable">$h</span> -ge 0 ] &amp;&amp; [ <span class="variable">$h</span> -lt 12 ]</div><div class="line"><span class="keyword">then</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"Good morning."</span></div><div class="line"><span class="keyword">elif</span> [ <span class="variable">$h</span> -ge 12 ] &amp;&amp; [ <span class="variable">$h</span> -lt 18 ]</div><div class="line"><span class="keyword">then</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"Good afternoon."</span></div><div class="line"><span class="keyword">else</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"Good evening."</span></div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell练习/">shell练习</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Shell 练习/45. shell 练习-检查错误" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/31/Shell 练习/45. shell 练习-检查错误/" class="article-date">
  	<time datetime="2017-08-30T16:07:07.570Z" itemprop="datePublished">2017-08-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/31/Shell 练习/45. shell 练习-检查错误/">
        shell 练习-检查错误
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>写一个shell脚本，检查指定的shell脚本是否有语法错误，若有错误，首先显示错误信息，然后提示用户输入q或者Q退出脚本，输入其他内容则直接用vim打开该shell脚本。</p>
<p>提醒： 检查shell脚本有没有语法错误的命令是  sh -n   xxx.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">sh -n <span class="variable">$1</span> 2&gt;/tmp/err</div><div class="line"><span class="keyword">if</span> [ $? -eq <span class="string">"0"</span> ]</div><div class="line"><span class="keyword">then</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"The script is OK."</span></div><div class="line"><span class="keyword">else</span></div><div class="line">    cat /tmp/err</div><div class="line">    <span class="built_in">read</span> -p <span class="string">"Please inpupt Q/q to exit, or others to edit it by vim. "</span> n</div><div class="line">    <span class="keyword">if</span> [ -z <span class="variable">$n</span> ]</div><div class="line">    <span class="keyword">then</span></div><div class="line">        vim <span class="variable">$1</span></div><div class="line">        <span class="built_in">exit</span></div><div class="line">    <span class="keyword">fi</span></div><div class="line">    <span class="keyword">if</span> [ <span class="variable">$n</span> == <span class="string">"q"</span> -o <span class="variable">$n</span> == <span class="string">"Q"</span> ]</div><div class="line">    <span class="keyword">then</span></div><div class="line">        <span class="built_in">exit</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">        vim <span class="variable">$1</span></div><div class="line">        <span class="built_in">exit</span></div><div class="line">    <span class="keyword">fi</span></div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell练习/">shell练习</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Shell 练习/46. shell 练习-格式化输出数字串" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/31/Shell 练习/46. shell 练习-格式化输出数字串/" class="article-date">
  	<time datetime="2017-08-30T16:07:07.570Z" itemprop="datePublished">2017-08-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/31/Shell 练习/46. shell 练习-格式化输出数字串/">
        shell 练习-格式化输出数字串
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>输入一串随机数字，然后按千分位输出。</p>
<p>比如输入数字串为“123456789”，输出为123,456,789</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="built_in">read</span> -p <span class="string">"输入一串数字："</span> num</div><div class="line">v=`<span class="built_in">echo</span> <span class="variable">$num</span>|sed <span class="string">'s/[0-9]//g'</span>`</div><div class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$v</span>"</span> ]</div><div class="line"><span class="keyword">then</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"请输入纯数字."</span></div><div class="line">    <span class="built_in">exit</span></div><div class="line"><span class="keyword">fi</span></div><div class="line">length=<span class="variable">$&#123;#num&#125;</span></div><div class="line">len=0</div><div class="line">sum=<span class="string">''</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 <span class="variable">$length</span>)</div><div class="line"><span class="keyword">do</span></div><div class="line">        len=$[<span class="variable">$len</span>+1]</div><div class="line">        <span class="keyword">if</span> [[ <span class="variable">$len</span> == 3 ]]</div><div class="line">        <span class="keyword">then</span></div><div class="line">                sum=<span class="string">','</span><span class="variable">$&#123;num:$[0-$i]:1&#125;</span><span class="variable">$sum</span></div><div class="line">                len=0</div><div class="line">        <span class="keyword">else</span></div><div class="line">                sum=<span class="variable">$&#123;num:$[0-$i]:1&#125;</span><span class="variable">$sum</span></div><div class="line">        <span class="keyword">fi</span></div><div class="line"><span class="keyword">done</span></div><div class="line"><span class="keyword">if</span> [[ -n $(<span class="built_in">echo</span> <span class="variable">$sum</span> | grep <span class="string">'^,'</span> ) ]]</div><div class="line"><span class="keyword">then</span></div><div class="line">        <span class="built_in">echo</span> <span class="variable">$&#123;sum:1&#125;</span></div><div class="line"><span class="keyword">else</span></div><div class="line">        <span class="built_in">echo</span> <span class="variable">$sum</span></div><div class="line"><span class="keyword">fi</span></div><div class="line">上面这个答案比较复杂，下面再来一个sed的</div><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="built_in">read</span> -p <span class="string">"输入一串数字："</span> num</div><div class="line">v=`<span class="built_in">echo</span> <span class="variable">$num</span>|sed <span class="string">'s/[0-9]//g'</span>`</div><div class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$v</span>"</span> ]</div><div class="line"><span class="keyword">then</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"请输入纯数字."</span></div><div class="line">    <span class="built_in">exit</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"><span class="built_in">echo</span> <span class="variable">$num</span>|sed -r <span class="string">'&#123;:number;s/([0-9]+)([0-9]&#123;3&#125;)/\1,\2/;t number&#125;'</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell练习/">shell练习</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Shell 练习/44. shell 练习-日志归档" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/31/Shell 练习/44. shell 练习-日志归档/" class="article-date">
  	<time datetime="2017-08-30T16:07:07.568Z" itemprop="datePublished">2017-08-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/31/Shell 练习/44. shell 练习-日志归档/">
        shell 练习-日志归档
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>类似于日志切割，系统有个logrotate程序，可以完成归档。但现在我们要自己写一个shell脚本实现归档。 </p>
<p>举例： 假如服务的输出日志是1.log，我要求每天归档一个，1.log第二天就变成1.log.1，第三天1.log.2, 第四天 1.log.3  一直到1.log.5</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="keyword">function</span> e_df()</div><div class="line">&#123;</div><div class="line">    [ -f <span class="variable">$1</span> ] &amp;&amp; rm -f <span class="variable">$1</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq 5 -1 2`</div><div class="line"><span class="keyword">do</span></div><div class="line">    i2=$[<span class="variable">$i</span>-1]</div><div class="line">    e_df /data/1.log.<span class="variable">$i</span></div><div class="line">    <span class="keyword">if</span> [ -f /data/1.log.<span class="variable">$i2</span> ]</div><div class="line">    <span class="keyword">then</span></div><div class="line">        mv /data/1.log.<span class="variable">$i2</span> /data/1.log.<span class="variable">$i</span></div><div class="line">    <span class="keyword">fi</span></div><div class="line"><span class="keyword">done</span></div><div class="line"></div><div class="line">e_df /data/1.log.1</div><div class="line">mv /data/1.log  /data/1.log.1</div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell练习/">shell练习</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Shell 练习/43. shell 练习-打印只有一个数字的行" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/31/Shell 练习/43. shell 练习-打印只有一个数字的行/" class="article-date">
  	<time datetime="2017-08-30T16:07:07.568Z" itemprop="datePublished">2017-08-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/31/Shell 练习/43. shell 练习-打印只有一个数字的行/">
        shell 练习-打印只有一个数字的行
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>如题，把一个文本文档中只有一个数字的行给打印出来。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">f=/etc/passwd</div><div class="line">line=`wc -l <span class="variable">$f</span>|awk <span class="string">'&#123;print $1&#125;'</span>`</div><div class="line"><span class="keyword">for</span> l <span class="keyword">in</span> `seq 1 <span class="variable">$line</span>`; <span class="keyword">do</span></div><div class="line">     n=`sed -n <span class="string">"<span class="variable">$l</span>"</span>p <span class="variable">$f</span>|grep -o <span class="string">'[0-9]'</span>|wc -l`;</div><div class="line">     <span class="keyword">if</span> [ <span class="variable">$n</span> -eq 1 ]; <span class="keyword">then</span></div><div class="line">        sed -n <span class="string">"<span class="variable">$l</span>"</span>p <span class="variable">$f</span></div><div class="line">     <span class="keyword">fi</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell练习/">shell练习</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Shell 练习/42. shell 练习-抽签脚本" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/31/Shell 练习/42. shell 练习-抽签脚本/" class="article-date">
  	<time datetime="2017-08-30T16:07:07.567Z" itemprop="datePublished">2017-08-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/31/Shell 练习/42. shell 练习-抽签脚本/">
        shell 练习-抽签脚本
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>写一个脚本执行后，输入名字，产生随机数01-99之间的数字。</li>
<li>如果相同的名字重复输入，抓到的数字还是第一次抓取的结果，</li>
<li>前面已经抓到的数字，下次不能在出现相同数字。</li>
<li>第一个输入名字后，屏幕输出信息，并将名字和数字记录到文件里，程序不能退出</li>
</ol>
<p>继续等待别的学生输入。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="keyword">while</span> :</div><div class="line"><span class="keyword">do</span></div><div class="line"><span class="built_in">read</span> -p  <span class="string">"Please input a name:"</span> name</div><div class="line">  <span class="keyword">if</span> [ -f /work/<span class="built_in">test</span>/1.log ];<span class="keyword">then</span></div><div class="line">     bb=`cat /work/<span class="built_in">test</span>/1.log | awk -F: <span class="string">'&#123;print $1&#125;'</span> | grep <span class="string">"<span class="variable">$name</span>"</span>`</div><div class="line">     <span class="keyword">if</span> [ <span class="string">"<span class="variable">$bb</span>"</span> != <span class="string">"<span class="variable">$name</span>"</span> ];<span class="keyword">then</span>  <span class="comment">#名字不重复情况下</span></div><div class="line">        aa=`<span class="built_in">echo</span> <span class="variable">$RANDOM</span> | awk -F <span class="string">""</span> <span class="string">'&#123;print $2 $3&#125;'</span>`</div><div class="line">         <span class="keyword">while</span> :</div><div class="line">          <span class="keyword">do</span></div><div class="line">       dd=`cat  /work/<span class="built_in">test</span>/1.log |  awk -F: <span class="string">'&#123;print $2&#125;'</span>  | grep <span class="string">"<span class="variable">$aa</span>"</span>`</div><div class="line">          <span class="keyword">if</span> [ <span class="string">"<span class="variable">$aa</span>"</span>  ==  <span class="string">"<span class="variable">$dd</span>"</span> ];<span class="keyword">then</span>   <span class="comment">#数字已经存在情况下</span></div><div class="line">            <span class="built_in">echo</span> <span class="string">"数字已存在."</span></div><div class="line">            aa=`<span class="built_in">echo</span> <span class="variable">$RANDOM</span> | awk -F <span class="string">""</span> <span class="string">'&#123;print $2 $3&#125;'</span>`</div><div class="line">           <span class="keyword">else</span></div><div class="line">            <span class="built_in">break</span></div><div class="line">          <span class="keyword">fi</span></div><div class="line">          <span class="keyword">done</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$name</span>:<span class="variable">$aa</span>"</span> | tee -a /work/<span class="built_in">test</span>/1.log</div><div class="line">     <span class="keyword">else</span></div><div class="line">     aa=`cat /work/<span class="built_in">test</span>/1.log |  grep <span class="string">"<span class="variable">$name</span>"</span> | awk -F: <span class="string">'&#123;print $2&#125;'</span>` <span class="comment">#名字重复</span></div><div class="line">       <span class="built_in">echo</span> <span class="variable">$aa</span></div><div class="line">       <span class="built_in">echo</span> <span class="string">"重复名字."</span></div><div class="line">     <span class="keyword">fi</span></div><div class="line">  <span class="keyword">else</span></div><div class="line">      aa=`<span class="built_in">echo</span> <span class="variable">$RANDOM</span> | awk -F <span class="string">""</span> <span class="string">'&#123;print $2 $3&#125;'</span>`</div><div class="line">      <span class="built_in">echo</span> <span class="string">"<span class="variable">$name</span>:<span class="variable">$aa</span>"</span> | tee -a  /work/<span class="built_in">test</span>/1.log</div><div class="line">  <span class="keyword">fi</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell练习/">shell练习</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/56/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/55/">55</a><a class="page-number" href="/page/56/">56</a><span class="page-number current">57</span><a class="page-number" href="/page/58/">58</a><a class="page-number" href="/page/59/">59</a><span class="space">&hellip;</span><a class="page-number" href="/page/63/">63</a><a class="extend next" rel="next" href="/page/58/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2017 失落的乐章
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    

<script>
	var yiliaConfig = {
		fancybox: ,
		mathjax: ,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



  </div>
</body>
</html>