<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>失落的乐章</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="失落的乐章的Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="失落的乐章">
<meta property="og:url" content="https://hcldirgit.github.io/page/43/index.html">
<meta property="og:site_name" content="失落的乐章">
<meta property="og:description" content="失落的乐章的Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="失落的乐章">
<meta name="twitter:description" content="失落的乐章的Blog">
  
    <link rel="alternative" href="/atom.xml" title="失落的乐章" type="application/atom+xml">
  
  
    <link rel="icon" href="https://github.com/hcldirgit/image/blob/master/0.png?raw=true">
  
  <link rel="stylesheet" href="/css/style.css">
  
  
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85415703-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://github.com/hcldirgit/image/blob/master/0.png?raw=true" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">失落的乐章</a></h1>
		</hgroup>

		
		<p class="header-subtitle">技术面前，永远都是学生。</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags">静心阅读</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Ansible/" style="font-size: 10.42px;">Ansible</a> <a href="/tags/Apache/" style="font-size: 18.33px;">Apache</a> <a href="/tags/Cacti/" style="font-size: 11.67px;">Cacti</a> <a href="/tags/DNS/" style="font-size: 13.33px;">DNS</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/FTP/" style="font-size: 11.25px;">FTP</a> <a href="/tags/Git/" style="font-size: 10.83px;">Git</a> <a href="/tags/HA集群/" style="font-size: 11.67px;">HA集群</a> <a href="/tags/Hadoop/" style="font-size: 12.5px;">Hadoop</a> <a href="/tags/Jenkins/" style="font-size: 10.42px;">Jenkins</a> <a href="/tags/LAMP/" style="font-size: 19.58px;">LAMP</a> <a href="/tags/LNMP/" style="font-size: 17.08px;">LNMP</a> <a href="/tags/LVS/" style="font-size: 16.67px;">LVS</a> <a href="/tags/Linux/" style="font-size: 19.17px;">Linux</a> <a href="/tags/Linux命令/" style="font-size: 20px;">Linux命令</a> <a href="/tags/Linux安全/" style="font-size: 14.17px;">Linux安全</a> <a href="/tags/Memcached/" style="font-size: 11.25px;">Memcached</a> <a href="/tags/MongoDB/" style="font-size: 15.42px;">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 17.5px;">MySQL</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/Nagios/" style="font-size: 11.67px;">Nagios</a> <a href="/tags/Nginx/" style="font-size: 17.92px;">Nginx</a> <a href="/tags/OpenStack/" style="font-size: 11.25px;">OpenStack</a> <a href="/tags/Php/" style="font-size: 14.58px;">Php</a> <a href="/tags/Puppet/" style="font-size: 11.25px;">Puppet</a> <a href="/tags/Python/" style="font-size: 14.58px;">Python</a> <a href="/tags/Redis/" style="font-size: 16.25px;">Redis</a> <a href="/tags/Resin/" style="font-size: 10px;">Resin</a> <a href="/tags/Saltstack/" style="font-size: 10px;">Saltstack</a> <a href="/tags/Samba/" style="font-size: 12.08px;">Samba</a> <a href="/tags/Squid/" style="font-size: 14.58px;">Squid</a> <a href="/tags/Tomcat/" style="font-size: 13.75px;">Tomcat</a> <a href="/tags/Zabbix/" style="font-size: 15.83px;">Zabbix</a> <a href="/tags/haproxy/" style="font-size: 12.5px;">haproxy</a> <a href="/tags/keepalived/" style="font-size: 12.92px;">keepalived</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/shell练习/" style="font-size: 18.75px;">shell练习</a> <a href="/tags/正则表达式/" style="font-size: 12.92px;">正则表达式</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">失落的乐章</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://github.com/hcldirgit/image/blob/master/0.png?raw=true" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">失落的乐章</h1>
			</hgroup>
			
			<p class="header-subtitle">技术面前，永远都是学生。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags">静心阅读</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-2. Linux 命令/80. Linux 命令- tshark" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/80. Linux 命令- tshark/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.294Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/80. Linux 命令- tshark/">
        Linux 命令- tshark
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在Linux下，当我们需要抓取网络数据包分析时，通常是使用tcpdump抓取网络raw数据包存到一个文件，然后下载到本地使用wireshark界面网络分析工具进行网络包分析。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;最近才发现，原来wireshark也提供有Linux命令行工具-tshark。tshark不仅有抓包的功能，还带了解析各种协议的能力。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tshark是wireshark安装目录下命令行工具</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;使用tshark可以通过自动化方式调用wireshark</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;默认机器上是没有安装这个工具的。使用yum安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install -y wireshark</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;也可以到<a href="http://www.wireshark.org" target="_blank" rel="external">官网</a>下载源码，<a href="http://www.qtasp.cn/wiresharkcharpt/buildingwireshark.html" target="_blank" rel="external">具体安装方法</a></p>
<h2 id="命令参数"><a href="#命令参数" class="headerlink" title="命令参数"></a>命令参数</h2><h3 id="1-抓包接口类"><a href="#1-抓包接口类" class="headerlink" title="1. 抓包接口类"></a>1. 抓包接口类</h3><ul>
<li>-i 设置抓包的网络接口，不设置则默认为第一个非自环接口。</li>
<li>-D 列出当前存在的网络接口。在不了解OS所控制的网络设备时，一般先用“tshark -D”查看网络接口的编号以供-i参数使用。</li>
<li>-f 设定抓包过滤表达式（capture filter expression）。抓包过滤表达式的写法雷同于tcpdump，可参考tcpdump man page的有关部分。</li>
<li>-s 设置每个抓包的大小，默认为65535，多于这个大小的数据将不会被程序记入内存、写入文件。（这个参数相当于tcpdump的-s，tcpdump默认抓包的大小仅为68）</li>
<li>-p 设置网络接口以非混合模式工作，即只关心和本机有关的流量。</li>
<li>-B 设置内核缓冲区大小，仅对windows有效。</li>
<li>-y 设置抓包的数据链路层协议，不设置则默认为-L找到的第一个协议，局域网一般是EN10MB等。</li>
<li>-L 列出本机支持的数据链路层协议，供-y参数使用。  </li>
</ul>
<h3 id="2-抓包停止条件"><a href="#2-抓包停止条件" class="headerlink" title="2. 抓包停止条件"></a>2. 抓包停止条件</h3><ul>
<li>-c 抓取的packet数，在处理一定数量的packet后，停止抓取，程序退出。</li>
<li>-a 设置tshark抓包停止向文件书写的条件，事实上是tshark在正常启动之后停止工作并返回的条件。条件写为test:value的形式，如“-a duration:5”表示tshark启动后在5秒内抓包然后停止；“-a filesize:10”表示tshark在输出文件达到10kB后停止；“-a files:n”表示tshark在写满n个文件后停止。（windows版的tshark0.99.3用参数“-a files:n”不起作用——会有无数多个文件生成。由于-b参数有自己的files参数，所谓“和-b的其它参数结合使用”无从说起。这也许是一个bug，或tshark的man page的书写有误。）</li>
</ul>
<h3 id="3-文件输出控制"><a href="#3-文件输出控制" class="headerlink" title="3. 文件输出控制"></a>3. 文件输出控制</h3><ul>
<li>-b 设置ring buffer文件参数。ring buffer的文件名由-w参数决定。-b参数采用test:value的形式书写。“-b duration:5”表示每5秒写下一个ring buffer文件；“-b filesize:5”表示每达到5kB写下一个ring buffer文件；“-b files:7”表示ring buffer文件最多7个，周而复始地使用，如果这个参数不设定，tshark会将磁盘写满为止。</li>
</ul>
<h3 id="4-文件输入"><a href="#4-文件输入" class="headerlink" title="4. 文件输入"></a>4. 文件输入</h3><ul>
<li>-r 设置tshark分析的输入文件。tshark既可以抓取分析即时的网络流量，又可以分析dump在文件中的数据。-r不能是命名管道和标准输入。</li>
</ul>
<h3 id="5-处理类"><a href="#5-处理类" class="headerlink" title="5. 处理类"></a>5. 处理类</h3><ul>
<li>-R 设置读取（显示）过滤表达式（read filter expression）。不符合此表达式的流量同样不会被写入文件。注意，读取（显示）过滤表达式的语法和底层相关的抓包过滤表达式语法不相同，它的语法表达要丰富得多，请参考<a href="http://www.ethereal.com/docs/dfref/和http://www.ethereal.com/docs/man-pages/ethereal-filter.4.html。类似于抓包过滤表达式，在命令行使用时最好将它们quote起来。" target="_blank" rel="external">http://www.ethereal.com/docs/dfref/和http://www.ethereal.com/docs/man-pages/ethereal-filter.4.html。类似于抓包过滤表达式，在命令行使用时最好将它们quote起来。</a></li>
<li>-n 禁止所有地址名字解析（默认为允许所有）。</li>
<li>-N 启用某一层的地址名字解析。“m”代表MAC层，“n”代表网络层，“t”代表传输层，“C”代表当前异步DNS查找。如果-n和-N参数同时存在，-n将被忽略。如果-n和-N参数都不写，则默认打开所有地址名字解析。</li>
<li>-d 将指定的数据按有关协议解包输出。如要将tcp 8888端口的流量按http解包，应该写为“-d tcp.port==8888,http”。注意选择子和解包协议之间不能留空格。</li>
</ul>
<h3 id="6-输出类"><a href="#6-输出类" class="headerlink" title="6. 输出类"></a>6. 输出类</h3><ul>
<li>-w 设置raw数据的输出文件。这个参数不设置，tshark将会把解码结果输出到stdout。“-w-”表示把raw输出到stdout。如果要把解码结果输出到文件，使用重定向“&gt;”而不要-w参数。</li>
<li>-F 设置输出raw数据的格式，默认为libpcap。“tshark -F”会列出所有支持的raw格式。</li>
<li>-V 设置将解码结果的细节输出，否则解码结果仅显示一个packet一行的summary。</li>
<li>-x 设置在解码输出结果中，每个packet后面以HEX dump的方式显示具体数据。</li>
<li>-T 设置解码结果输出的格式，包括text,ps,psml和pdml，默认为text。</li>
<li>-t 设置解码结果的时间格式。“ad”表示带日期的绝对时间，“a”表示不带日期的绝对时间，“r”表示从第一个包到现在的相对时间，“d”表示两个相邻包之间的增量时间（delta）。</li>
<li>-S 在向raw文件输出的同时，将解码结果打印到控制台。</li>
<li>-l 在处理每个包时即时刷新输出。</li>
<li>-X 扩展项。</li>
<li>-q 设置安静的stdout输出（例如做统计时）</li>
<li>-z 设置统计参数。</li>
</ul>
<h3 id="7-其它"><a href="#7-其它" class="headerlink" title="7. 其它"></a>7. 其它</h3><ul>
<li>-h 显示命令行帮助。</li>
<li>-v 显示tshark的版本信息。</li>
<li>-o 重载选项。</li>
</ul>
<h2 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h2><h3 id="实例1：显示访问http请求的域名以及URI"><a href="#实例1：显示访问http请求的域名以及URI" class="headerlink" title="实例1：显示访问http请求的域名以及URI"></a>实例1：显示访问http请求的域名以及URI</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tshark -n -t a -R http.request -T fields -e <span class="string">"frame.time"</span> -e <span class="string">"ip.src"</span> -e <span class="string">"http.host"</span> -e <span class="string">"http.request.method"</span> -e <span class="string">"http.request.uri"</span></div></pre></td></tr></table></figure>
<h3 id="实例2：抓取mysql的查询"><a href="#实例2：抓取mysql的查询" class="headerlink" title="实例2：抓取mysql的查询"></a>实例2：抓取mysql的查询</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tshark -n -i eth1 -R <span class="string">'mysql.query'</span> -T fields -e <span class="string">"ip.src"</span> -e <span class="string">"mysql.query"</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>另外一种方法</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tshark -i eth1 port 3307 -d tcp.port==3307,mysql -z <span class="string">"proto,colinfo,mysql.query,mysql.query"</span></div></pre></td></tr></table></figure>
<h3 id="实例3：抓取指定类型的mysql查询"><a href="#实例3：抓取指定类型的mysql查询" class="headerlink" title="实例3：抓取指定类型的mysql查询"></a>实例3：抓取指定类型的mysql查询</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tshark -n -i eth1 -R <span class="string">'mysql matches "SELECT|INSERT|DELETE|UPDATE"'</span> -T fields -e <span class="string">"ip.src"</span> -e <span class="string">"mysql.query"</span></div></pre></td></tr></table></figure>
<h3 id="实例4：统计http的状态"><a href="#实例4：统计http的状态" class="headerlink" title="实例4：统计http的状态"></a>实例4：统计http的状态</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tshark -n -q -z http,<span class="built_in">stat</span>, -z http,tree</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>注意</strong>：这个命令，直到ctrl+e才会显示出结果</p>
<h3 id="实例5：tshark增加时间标签"><a href="#实例5：tshark增加时间标签" class="headerlink" title="实例5：tshark增加时间标签"></a>实例5：tshark增加时间标签</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tshark -t ad</div><div class="line">tshark -t a</div></pre></td></tr></table></figure>
<h3 id="实例6：查看当前服务器的web请求"><a href="#实例6：查看当前服务器的web请求" class="headerlink" title="实例6：查看当前服务器的web请求"></a>实例6：查看当前服务器的web请求</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tshark -n -t a -R http.request -T fields -e <span class="string">"frame.time"</span> -e <span class="string">"ip.src"</span> -e <span class="string">"http.host"</span> -e <span class="string">"http.request.method"</span> -e <span class="string">"http.request.uri"</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tshark主要掌握这一个用法即可。这条命令用于web服务器，可以显示下面信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@lnmp ~]<span class="comment"># tshark -n -t a -R http.request -T fields -e "frame.time" -e "ip.src" -e "http.host" -e "http.request.method" -e "http.request.uri"</span></div><div class="line">Running as user <span class="string">"root"</span> and group <span class="string">"root"</span>. This could be dangerous.</div><div class="line">Capturing on eth0</div><div class="line">Jul 13, 2017 22:00:25.129421639 192.168.0.100   prtas.videocc.net       GET     /v1/view?pid=1499954712122X1245558&amp;uid=04ad877579&amp;vid=04ad877579e0b8ab39e6eafe7709cdf6_0&amp;flow=12074276&amp;pd=1&amp;sd=89&amp;ts=1499954802350&amp;sign=3916b818465aa3ffcb7c81773bc8805f&amp;session_id=&amp;param1=&amp;param2=&amp;param3=&amp;param4=&amp;param5=&amp;cts=0&amp;duration=1004&amp;href=http%3A%2F%2Fv.apelearn.com%2Fstudent.php%3Fview_unit%3D897</div><div class="line">Jul 13, 2017 22:00:27.449646478         [FF02::C]:1900  M-SEARCH        *</div><div class="line">Jul 13, 2017 22:00:31.449976172         [FF02::C]:1900  M-SEARCH        *</div><div class="line">Jul 13, 2017 22:00:34.449975277         [FF02::C]:1900  M-SEARCH        *</div><div class="line">Jul 13, 2017 22:00:35.194957223 192.168.0.100   prtas.videocc.net       GET</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这类似于web访问日志，有时候若服务器没有配置访问日志，可以临时使用该命令查看一下当前服务器的web请求。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/15. Linux 命令- tail" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/15. Linux 命令- tail/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.293Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/15. Linux 命令- tail/">
        Linux 命令- tail
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tail 命令从指定点开始将文件写到标准输出.使用tail命令的-f选项可以方便的查阅正在改变的日志文件,tail -f filename会把filename里最尾部的内容显示在屏幕上,并且不但刷新,使你看到最新的文件内容. </p>
<h2 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tail [必要参数] [选择参数] [文件]</div></pre></td></tr></table></figure>
<h2 id="命令参数"><a href="#命令参数" class="headerlink" title="命令参数"></a>命令参数</h2><ul>
<li>-f：循环读取</li>
<li>-q：不现实处理信息</li>
<li>-v：显示详细的处理信心</li>
<li>-c&lt;数目&gt;：显示的字节数</li>
<li>-n&lt;行数&gt;：显示行数</li>
<li>–pid=PID：与 -f 合用，表示在进程 ID ，PID 死掉之后结束</li>
<li>-q ，–quiet ，–silent：从不输出给出文件名的首部</li>
<li>-s ，–sleep-interval=S：与 -f 合用，表示在每次反复的间隔休眠 s 秒</li>
</ul>
<h2 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h2><h3 id="实例1：显示文件末尾内容"><a href="#实例1：显示文件末尾内容" class="headerlink" title="实例1：显示文件末尾内容"></a>实例1：显示文件末尾内容</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tail -n 5 log2014.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost test]# tail -n 5 log2014.log </div><div class="line">2014-09</div><div class="line">2014-10</div><div class="line">2014-11</div><div class="line">2014-12</div><div class="line">==============================</div><div class="line">[root@localhost test]#</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;显示文件最后5行内容</p>
<h3 id="实例2：循环查看文件内容"><a href="#实例2：循环查看文件内容" class="headerlink" title="实例2：循环查看文件内容"></a>实例2：循环查看文件内容</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tail -f test.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# ping 192.168.120.204 &gt; test.log &amp;</div><div class="line">[1] 11891[root@localhost ~]# tail -f test.log </div><div class="line">PING 192.168.120.204 (192.168.120.204) 56(84) bytes of data.</div><div class="line">64 bytes from 192.168.120.204: icmp_seq=1 ttl=64 time=0.038 ms</div><div class="line">64 bytes from 192.168.120.204: icmp_seq=2 ttl=64 time=0.036 ms</div><div class="line">64 bytes from 192.168.120.204: icmp_seq=3 ttl=64 time=0.033 ms</div><div class="line">64 bytes from 192.168.120.204: icmp_seq=4 ttl=64 time=0.027 ms</div><div class="line">64 bytes from 192.168.120.204: icmp_seq=5 ttl=64 time=0.032 ms</div><div class="line">64 bytes from 192.168.120.204: icmp_seq=6 ttl=64 time=0.026 ms</div><div class="line">64 bytes from 192.168.120.204: icmp_seq=7 ttl=64 time=0.030 ms</div><div class="line">64 bytes from 192.168.120.204: icmp_seq=8 ttl=64 time=0.029 ms</div><div class="line">64 bytes from 192.168.120.204: icmp_seq=9 ttl=64 time=0.044 ms</div><div class="line">64 bytes from 192.168.120.204: icmp_seq=10 ttl=64 time=0.033 ms</div><div class="line">64 bytes from 192.168.120.204: icmp_seq=11 ttl=64 time=0.027 ms</div><div class="line">[root@localhost ~]#</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ping 192.168.120.204 &gt; test.log &amp;</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在后台 ping 远程主机。并输出文件到 test.log ；这种做法也使用与一个以上的档案监视。用 Ctrl+c 来终止。</p>
<h3 id="实例3：从第5行开始显示文件"><a href="#实例3：从第5行开始显示文件" class="headerlink" title="实例3：从第5行开始显示文件"></a>实例3：从第5行开始显示文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tail -n +5 log2014.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat log2014.log </span></div><div class="line">2014-01</div><div class="line">2014-02</div><div class="line">2014-03</div><div class="line">2014-04</div><div class="line">2014-05</div><div class="line">2014-06</div><div class="line">2014-07</div><div class="line">2014-08</div><div class="line">2014-09</div><div class="line">2014-10</div><div class="line">2014-11</div><div class="line">2014-12</div><div class="line">==============================</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tail -n +5 log2014.log</span></div><div class="line">2014-05</div><div class="line">2014-06</div><div class="line">2014-07</div><div class="line">2014-08</div><div class="line">2014-09</div><div class="line">2014-10</div><div class="line">2014-11</div><div class="line">2014-12</div><div class="line">==============================</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/59. Linux 命令- ss" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/59. Linux 命令- ss/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.292Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/59. Linux 命令- ss/">
        Linux 命令- ss
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ss是Socket Statistics的缩写。顾名思义，ss命令可以用来获取socket统计信息，它可以显示和netstat类似的内容。但ss的优势在于它能够显示更多更详细的有关TCP和连接状态的信息，而且比netstat更快速更高效。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;当服务器的socket连接数量变得非常大时，无论是使用netstat命令还是直接cat /proc/net/tcp，执行速度都会很慢。可能你不会有切身的感受，但请相信我，当服务器维持的连接达到上万个的时候，使用netstat等于浪费 生命，而用ss才是节省时间。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;天下武功唯快不破。ss快的秘诀在于，它利用到了TCP协议栈中tcp_diag。tcp_diag是一个用于分析统计的模块，可以获得Linux 内核中第一手的信息，这就确保了ss的快捷高效。当然，如果你的系统中没有tcp_diag，ss也可以正常运行，只是效率会变得稍慢。（但仍然比 netstat要快。）</p>
<h2 id="1-命令格式"><a href="#1-命令格式" class="headerlink" title="1.命令格式"></a>1.命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ss [参数]</div><div class="line">ss [参数] [过滤]</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2.命令功能"></a>2.命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ss(Socket Statistics的缩写)命令可以用来获取 socket统计信息，此命令输出的结果类似于 netstat输出的内容，但它能显示更多更详细的 TCP连接状态的信息，且比 netstat 更快速高效。它使用了 TCP协议栈中 tcp_diag（是一个用于分析统计的模块），能直接从获得第一手内核信息，这就使得 ss命令快捷高效。在没有 tcp_diag，ss也可以正常运行。</p>
<h2 id="3-命令参数"><a href="#3-命令参数" class="headerlink" title="3.命令参数"></a>3.命令参数</h2><ul>
<li>-h, –help    帮助信息</li>
<li>-V, –version    程序版本信息</li>
<li>-n, –numeric    不解析服务名称</li>
<li>-r, –resolve        解析主机名</li>
<li>-a, –all    显示所有套接字（sockets）</li>
<li>-l, –listening    显示监听状态的套接字（sockets）</li>
<li>-o, –options        显示计时器信息</li>
<li>-e, –extended       显示详细的套接字（sockets）信息</li>
<li>-m, –memory         显示套接字（socket）的内存使用情况</li>
<li>-p, –processes    显示使用套接字（socket）的进程</li>
<li>-i, –info    显示 TCP内部信息</li>
<li>-s, –summary    显示套接字（socket）使用概况</li>
<li>-4, –ipv4           仅显示IPv4的套接字（sockets）</li>
<li>-6, –ipv6           仅显示IPv6的套接字（sockets）</li>
<li>-0, –packet            显示 PACKET 套接字（socket）</li>
<li>-t, –tcp    仅显示 TCP套接字（sockets）</li>
<li>-u, –udp    仅显示 UCP套接字（sockets）</li>
<li>-d, –dccp    仅显示 DCCP套接字（sockets）</li>
<li>-w, –raw    仅显示 RAW套接字（sockets）</li>
<li>-x, –unix    仅显示 Unix套接字（sockets）</li>
<li>-f, –family=FAMILY  显示 FAMILY类型的套接字（sockets），FAMILY可选，支持  unix, inet, inet6, link, netlink</li>
<li>-A, –query=QUERY, –socket=QUERY<ul>
<li>QUERY := {all|inet|tcp|udp|raw|unix|packet|netlink}[,QUERY]</li>
</ul>
</li>
<li>-D, –diag=FILE     将原始TCP套接字（sockets）信息转储到文件</li>
<li>-F, –filter=FILE   从文件中都去过滤器信息<ul>
<li>FILTER := [ state TCP-STATE ] [ EXPRESSION ]</li>
</ul>
</li>
</ul>
<h2 id="4-使用实例"><a href="#4-使用实例" class="headerlink" title="4.使用实例"></a>4.使用实例</h2><h3 id="实例1：显示TCP连接"><a href="#实例1：显示TCP连接" class="headerlink" title="实例1：显示TCP连接"></a>实例1：显示TCP连接</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ss -t -a</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ss -t -a</span></div><div class="line">State      Recv-Q Send-Q                                Local Address:Port                                    Peer Address:Port   </div><div class="line">LISTEN     0      0                                         127.0.0.1:smux                                               *:*       </div><div class="line">LISTEN     0      0                                                 *:3690                                               *:*       </div><div class="line">LISTEN     0      0                                                 *:ssh                                                *:*       </div><div class="line">ESTAB      0      0                                   192.168.120.204:ssh                                        10.2.0.68:49368   </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例2：显示-Sockets-摘要"><a href="#实例2：显示-Sockets-摘要" class="headerlink" title="实例2：显示 Sockets 摘要"></a>实例2：显示 Sockets 摘要</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ss -s</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ss -s</span></div><div class="line">Total: 34 (kernel 48)</div><div class="line">TCP:   4 (estab 1, closed 0, orphaned 0, synrecv 0, timewait 0/0), ports 3</div><div class="line"></div><div class="line">Transport Total     IP        IPv6</div><div class="line">*         48        -         -        </div><div class="line">RAW       0         0         0        </div><div class="line">UDP       5         5         0        </div><div class="line">TCP       4         4         0        </div><div class="line">INET      9         9         0        </div><div class="line">FRAG      0         0         0        </div><div class="line"></div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;列出当前的established, closed, orphaned and waiting TCP sockets</p>
<h3 id="实例3：列出所有打开的网络连接端口"><a href="#实例3：列出所有打开的网络连接端口" class="headerlink" title="实例3：列出所有打开的网络连接端口"></a>实例3：列出所有打开的网络连接端口</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ss -l</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ss -l</span></div><div class="line">Recv-Q Send-Q                                     Local Address:Port                                         Peer Address:Port   </div><div class="line">0      0                                              127.0.0.1:smux                                                    *:*       </div><div class="line">0      0                                                      *:3690                                                    *:*       </div><div class="line">0      0                                                      *:ssh                                                     *:*       </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例4：查看进程使用的socket"><a href="#实例4：查看进程使用的socket" class="headerlink" title="实例4：查看进程使用的socket"></a>实例4：查看进程使用的socket</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ss -pl</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ss -pl</span></div><div class="line">Recv-Q Send-Q                                     Local Address:Port                                         Peer Address:Port   </div><div class="line">0      0                                              127.0.0.1:smux                                                    *:*        users:((<span class="string">"snmpd"</span>,2716,8))</div><div class="line">0      0                                                      *:3690                                                    *:*        users:((<span class="string">"svnserve"</span>,3590,3))</div><div class="line">0      0                                                      *:ssh                                                     *:*        users:((<span class="string">"sshd"</span>,2735,3))</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例5：找出打开套接字-端口应用程序"><a href="#实例5：找出打开套接字-端口应用程序" class="headerlink" title="实例5：找出打开套接字/端口应用程序"></a>实例5：找出打开套接字/端口应用程序</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ss -lp | grep 3306</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ss -lp|grep 1935</span></div><div class="line">0      0                            *:1935                          *:*        users:((<span class="string">"fmsedge"</span>,2913,18))</div><div class="line">0      0                    127.0.0.1:19350                         *:*        users:((<span class="string">"fmsedge"</span>,2913,17))</div><div class="line">[root@localhost ~]<span class="comment"># ss -lp|grep 3306</span></div><div class="line">0      0                            *:3306                          *:*        users:((<span class="string">"mysqld"</span>,2871,10))</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例6：显示所有UDP-Sockets"><a href="#实例6：显示所有UDP-Sockets" class="headerlink" title="实例6：显示所有UDP Sockets"></a>实例6：显示所有UDP Sockets</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ss -u -a</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ss -u -a</span></div><div class="line">State      Recv-Q Send-Q                                Local Address:Port                                    Peer Address:Port   </div><div class="line">UNCONN     0      0                                         127.0.0.1:syslog                                             *:*       </div><div class="line">UNCONN     0      0                                                 *:snmp                                               *:*       </div><div class="line">ESTAB      0      0                                   192.168.120.203:39641                                  10.58.119.119:domain </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例7：显示所有状态为established的SMTP连接"><a href="#实例7：显示所有状态为established的SMTP连接" class="headerlink" title="实例7：显示所有状态为established的SMTP连接"></a>实例7：显示所有状态为established的SMTP连接</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ss -o state established <span class="string">'( dport = :smtp or sport = :smtp )'</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ss -o state established '( dport = :smtp or sport = :smtp )' </span></div><div class="line">Recv-Q Send-Q                                     Local Address:Port                                         Peer Address:Port   </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例8：显示所有状态为Established的HTTP连接"><a href="#实例8：显示所有状态为Established的HTTP连接" class="headerlink" title="实例8：显示所有状态为Established的HTTP连接"></a>实例8：显示所有状态为Established的HTTP连接</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ss -o state established <span class="string">'( dport = :http or sport = :http )'</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ss -o state established '( dport = :http or sport = :http )' </span></div><div class="line">Recv-Q Send-Q                                     Local Address:Port                                         Peer Address:Port   </div><div class="line">0      0                                              75.126.153.214:2164                                        192.168.10.42:http    </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例9：列举出处于-FIN-WAIT-1状态的源端口为-80或者-443，目标网络为-193-233-7-24所有-tcp套接字"><a href="#实例9：列举出处于-FIN-WAIT-1状态的源端口为-80或者-443，目标网络为-193-233-7-24所有-tcp套接字" class="headerlink" title="实例9：列举出处于 FIN-WAIT-1状态的源端口为 80或者 443，目标网络为 193.233.7/24所有 tcp套接字"></a>实例9：列举出处于 FIN-WAIT-1状态的源端口为 80或者 443，目标网络为 193.233.7/24所有 tcp套接字</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ss -o state fin-wait-1 <span class="string">'( sport = :http or sport = :https )'</span> dst 193.233.7/24</div></pre></td></tr></table></figure>
<h3 id="实例10：用TCP-状态过滤Sockets"><a href="#实例10：用TCP-状态过滤Sockets" class="headerlink" title="实例10：用TCP 状态过滤Sockets:"></a>实例10：用TCP 状态过滤Sockets:</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ss -4 state FILTER-NAME-HERE </div><div class="line">ss -6 state FILTER-NAME-HERE</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment">#ss -4 state closing </span></div><div class="line">Recv-Q Send-Q                                                  Local Address:Port                                                      Peer Address:Port </div><div class="line">1      11094                                                  75.126.153.214:http                                                      192.168.10.42:4669</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FILTER-NAME-HERE 可以代表以下任何一个：</p>
<ul>
<li>established      </li>
<li>syn-sent      </li>
<li>syn-recv      </li>
<li>fin-wait-1      </li>
<li>fin-wait-2      </li>
<li>time-wait      </li>
<li>closed      </li>
<li>close-wait      </li>
<li>last-ack      </li>
<li>listen      </li>
<li>closing      </li>
</ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;all : 所有以上状态</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;connected : 除了listen and closed的所有状态</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;synchronized :所有已连接的状态除了syn-sent</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;bucket : 显示状态为maintained as minisockets,如：time-wait和syn-recv.</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;big : 和bucket相反.</p>
<h3 id="实例11：匹配远程地址和端口号"><a href="#实例11：匹配远程地址和端口号" class="headerlink" title="实例11：匹配远程地址和端口号"></a>实例11：匹配远程地址和端口号</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ss dst ADDRESS_PATTERN</div><div class="line">ss dst 192.168.1.5</div><div class="line">ss dst 192.168.119.113:http </div><div class="line">ss dst 192.168.119.113:smtp </div><div class="line">ss dst 192.168.119.113:443</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ss dst 192.168.119.113</span></div><div class="line">State      Recv-Q Send-Q                                Local Address:Port                                    Peer Address:Port   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16014                                192.168.119.113:20229   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16014                                192.168.119.113:61056   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16014                                192.168.119.113:61623   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16014                                192.168.119.113:60924   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16050                                192.168.119.113:43701   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16073                                192.168.119.113:32930   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16073                                192.168.119.113:49318   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16014                                192.168.119.113:3844    </div><div class="line">[root@localhost ~]<span class="comment"># ss dst 192.168.119.113:http</span></div><div class="line">State      Recv-Q Send-Q                                Local Address:Port                                    Peer Address:Port   </div><div class="line">[root@localhost ~]<span class="comment"># ss dst 192.168.119.113:3844</span></div><div class="line">State      Recv-Q Send-Q                                Local Address:Port                                    Peer Address:Port   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16014                                192.168.119.113:3844    </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例12：匹配本地地址和端口号"><a href="#实例12：匹配本地地址和端口号" class="headerlink" title="实例12：匹配本地地址和端口号"></a>实例12：匹配本地地址和端口号</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ss src ADDRESS_PATTERN</div><div class="line">ss src 192.168.119.103</div><div class="line">ss src 192.168.119.103:http</div><div class="line">ss src 192.168.119.103:80</div><div class="line">ss src 192.168.119.103:smtp</div><div class="line">ss src 192.168.119.103:25</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ss src 192.168.119.103:16021</span></div><div class="line">State      Recv-Q Send-Q                                Local Address:Port                                    Peer Address:Port   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                192.168.119.201:63054   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                192.168.119.201:62894   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                192.168.119.201:63055   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                192.168.119.201:2274    </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                192.168.119.201:44784   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                192.168.119.201:7233    </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                192.168.119.103:58660   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                192.168.119.201:44822   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                     10.2.1.206:56737   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                     10.2.1.206:57487   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                     10.2.1.206:56736   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                     10.2.1.206:64652   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                     10.2.1.206:56586   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                     10.2.1.206:64653   </div><div class="line">ESTAB      0      0                                   192.168.119.103:16021                                     10.2.1.206:56587   </div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例13：将本地或者远程端口和一个数比较"><a href="#实例13：将本地或者远程端口和一个数比较" class="headerlink" title="实例13：将本地或者远程端口和一个数比较"></a>实例13：将本地或者远程端口和一个数比较</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ss dport OP PORT </div><div class="line">ss sport OP PORT</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ss  sport = :http </span></div><div class="line">[root@localhost ~]<span class="comment"># ss  dport = :http </span></div><div class="line">[root@localhost ~]<span class="comment"># ss  dport \&gt; :1024 </span></div><div class="line">[root@localhost ~]<span class="comment"># ss  sport \&gt; :1024 </span></div><div class="line">[root@localhost ~]<span class="comment"># ss sport \&lt; :32000 </span></div><div class="line">[root@localhost ~]<span class="comment"># ss  sport eq :22 </span></div><div class="line">[root@localhost ~]<span class="comment"># ss  dport != :22 </span></div><div class="line">[root@localhost ~]<span class="comment"># ss  state connected sport = :http </span></div><div class="line">[root@localhost ~]<span class="comment"># ss \( sport = :http or sport = :https \) </span></div><div class="line">[root@localhost ~]<span class="comment"># ss -o state fin-wait-1 \( sport = :http or sport = :https \) dst 192.168.1/24</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ss dport OP PORT 远程端口和一个数比较；ss sport OP PORT 本地端口和一个数比较。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>OP 可以代表以下任意一个:</strong> </p>
<ul>
<li>&lt;= or le : 小于或等于端口号</li>
<li><blockquote>
<p>= or ge : 大于或等于端口号</p>
</blockquote>
</li>
<li>== or eq : 等于端口号</li>
<li>!= or ne : 不等于端口号</li>
<li>&lt; or lt : 小于端口号</li>
<li><blockquote>
<p>or gt : 大于端口号</p>
</blockquote>
</li>
</ul>
<h3 id="实例14：ss-和-netstat-效率对比"><a href="#实例14：ss-和-netstat-效率对比" class="headerlink" title="实例14：ss 和 netstat 效率对比"></a>实例14：ss 和 netstat 效率对比</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">time netstat -at</div><div class="line">time ss</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># time ss   </span></div><div class="line">real    0m0.739s</div><div class="line">user    0m0.019s</div><div class="line">sys     0m0.013s</div><div class="line">[root@localhost ~]<span class="comment"># </span></div><div class="line">[root@localhost ~]<span class="comment"># time netstat -at</span></div><div class="line">real    2m45.907s</div><div class="line">user    0m0.063s</div><div class="line">sys     0m0.067s</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用time 命令分别获取通过netstat和ss命令获取程序和概要占用资源所使用的时间。在服务器连接数比较多的时候，netstat的效率完全没法和ss比。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/75. Linux 磁盘管理" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/75. Linux 磁盘管理/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.291Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/75. Linux 磁盘管理/">
        Linux 磁盘管理
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux磁盘管理好坏管理直接关系到整个系统的性能问题。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux磁盘管理常用三个命令为df、du和fdisk。</p>
<ul>
<li>df：列出文件系统的整体磁盘使用量</li>
<li>du：检查磁盘空间使用量</li>
<li>fdisk：用于磁盘分区</li>
</ul>
<h2 id="df"><a href="#df" class="headerlink" title="df"></a>df</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;df命令参数功能：检查文件系统的磁盘空间占用情况。可以利用该命令来获取硬盘被占用了多少空间，目前还剩下多少空间等信息。</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df [-ahikHTm] [目录或文件名]</div></pre></td></tr></table></figure>
<h3 id="选项与参数："><a href="#选项与参数：" class="headerlink" title="选项与参数："></a>选项与参数：</h3><ul>
<li>-a ：列出所有的文件系统，包括系统特有的 /proc 等文件系统；</li>
<li>-k ：以 KBytes 的容量显示各文件系统；</li>
<li>-m ：以 MBytes 的容量显示各文件系统；</li>
<li>-h ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；</li>
<li>-H ：以 M=1000K 取代 M=1024K 的进位方式；</li>
<li>-T ：显示文件系统类型, 连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；</li>
<li>-i ：不用硬盘容量，而以 inode 的数量来显示</li>
</ul>
<h3 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h3><h4 id="实例1：将系统内所有的文件系统列出来！"><a href="#实例1：将系统内所有的文件系统列出来！" class="headerlink" title="实例1：将系统内所有的文件系统列出来！"></a>实例1：将系统内所有的文件系统列出来！</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># df</span></div><div class="line">Filesystem      1K-blocks      Used Available Use% Mounted on</div><div class="line">/dev/hdc2         9920624   3823112   5585444  41% /</div><div class="line">/dev/hdc3         4956316    141376   4559108   4% /home</div><div class="line">/dev/hdc1          101086     11126     84741  12% /boot</div><div class="line">tmpfs              371332         0    371332   0% /dev/shm</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在 Linux 底下如果 df 没有加任何选项，那么默认会将系统内所有的 (不含特殊内存内的文件系统与 swap) 都以 1 Kbytes 的容量来列出来！</p>
<h4 id="实例2-将容量结果以易读的容量格式显示出来"><a href="#实例2-将容量结果以易读的容量格式显示出来" class="headerlink" title="实例2:将容量结果以易读的容量格式显示出来"></a>实例2:将容量结果以易读的容量格式显示出来</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># df -h</span></div><div class="line">Filesystem            Size  Used Avail Use% Mounted on</div><div class="line">/dev/hdc2             9.5G  3.7G  5.4G  41% /</div><div class="line">/dev/hdc3             4.8G  139M  4.4G   4% /home</div><div class="line">/dev/hdc1              99M   11M   83M  12% /boot</div><div class="line">tmpfs                 363M     0  363M   0% /dev/shm</div></pre></td></tr></table></figure>
<h4 id="实例3-将系统内的所有特殊文件格式及名称都列出来"><a href="#实例3-将系统内的所有特殊文件格式及名称都列出来" class="headerlink" title="实例3:将系统内的所有特殊文件格式及名称都列出来"></a>实例3:将系统内的所有特殊文件格式及名称都列出来</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># df -aT</span></div><div class="line">Filesystem    Type 1K-blocks    Used Available Use% Mounted on</div><div class="line">/dev/hdc2     ext3   9920624 3823112   5585444  41% /</div><div class="line">proc          proc         0       0         0   -  /proc</div><div class="line">sysfs        sysfs         0       0         0   -  /sys</div><div class="line">devpts      devpts         0       0         0   -  /dev/pts</div><div class="line">/dev/hdc3     ext3   4956316  141376   4559108   4% /home</div><div class="line">/dev/hdc1     ext3    101086   11126     84741  12% /boot</div><div class="line">tmpfs        tmpfs    371332       0    371332   0% /dev/shm</div><div class="line">none   binfmt_misc         0       0         0   -  /proc/sys/fs/binfmt_misc</div><div class="line">sunrpc  rpc_pipefs         0       0         0   -  /var/lib/nfs/rpc_pipefs</div></pre></td></tr></table></figure>
<h4 id="实例4-将-etc-底下的可用的磁盘容量以易读的容量格式显示"><a href="#实例4-将-etc-底下的可用的磁盘容量以易读的容量格式显示" class="headerlink" title="实例4:将 /etc 底下的可用的磁盘容量以易读的容量格式显示"></a>实例4:将 /etc 底下的可用的磁盘容量以易读的容量格式显示</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># df -h /etc</span></div><div class="line">Filesystem            Size  Used Avail Use% Mounted on</div><div class="line">/dev/hdc2             9.5G  3.7G  5.4G  41% /</div></pre></td></tr></table></figure>
<h2 id="du"><a href="#du" class="headerlink" title="du"></a>du</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux du命令也是查看使用空间的，但是与df命令不同的是Linux du命令是对文件和目录磁盘使用的空间的查看，还是和df命令有一些区别的，这里介绍Linux du命令。</p>
<h3 id="语法：-1"><a href="#语法：-1" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du [-ahskm] 文件或目录名称</div></pre></td></tr></table></figure>
<h3 id="选项与参数：-1"><a href="#选项与参数：-1" class="headerlink" title="选项与参数："></a>选项与参数：</h3><ul>
<li>-a ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。</li>
<li>-h ：以人们较易读的容量格式 (G/M) 显示；</li>
<li>-s ：列出总量而已，而不列出每个各别的目录占用容量；</li>
<li>-S ：不包括子目录下的总计，与 -s 有点差别。</li>
<li>-k ：以 KBytes 列出容量显示；</li>
<li>-m ：以 MBytes 列出容量显示；</li>
</ul>
<h3 id="实例1-列出目前目录下的所有文件容量"><a href="#实例1-列出目前目录下的所有文件容量" class="headerlink" title="实例1:列出目前目录下的所有文件容量"></a>实例1:列出目前目录下的所有文件容量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># du</span></div><div class="line">8       ./test4     &lt;==每个目录都会列出来</div><div class="line">8       ./test2</div><div class="line">....中间省略....</div><div class="line">12      ./.gconfd   &lt;==包括隐藏文件的目录</div><div class="line">220     .           &lt;==这个目录(.)所占用的总量</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;直接输入 du 没有加任何选项时，则 du 会分析当前所在目录的文件与目录所占用的硬盘空间。</p>
<h3 id="实例2-将文件的容量也列出来"><a href="#实例2-将文件的容量也列出来" class="headerlink" title="实例2:将文件的容量也列出来"></a>实例2:将文件的容量也列出来</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># du -a</span></div><div class="line">12      ./install.log.syslog   &lt;==有文件的列表了</div><div class="line">8       ./.bash_logout</div><div class="line">8       ./test4</div><div class="line">8       ./test2</div><div class="line">....中间省略....</div><div class="line">12      ./.gconfd</div><div class="line">220     .</div></pre></td></tr></table></figure>
<h3 id="实例-3检查根目录底下每个目录所占用的容量"><a href="#实例-3检查根目录底下每个目录所占用的容量" class="headerlink" title="实例:3检查根目录底下每个目录所占用的容量"></a>实例:3检查根目录底下每个目录所占用的容量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># du -sm /*</span></div><div class="line">7       /bin</div><div class="line">6       /boot</div><div class="line">.....中间省略....</div><div class="line">0       /proc</div><div class="line">.....中间省略....</div><div class="line">1       /tmp</div><div class="line">3859    /usr     &lt;==系统初期最大就是他了啦！</div><div class="line">77      /var</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;通配符 * 来代表每个目录。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;与 df 不一样的是，du 这个命令其实会直接到文件系统内去搜寻所有的文件数据。</p>
<h2 id="fdisk"><a href="#fdisk" class="headerlink" title="fdisk"></a>fdisk</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;fdisk 是 Linux 的磁盘分区表操作工具。</p>
<h3 id="语法：-2"><a href="#语法：-2" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fdisk [-l] 装置名称</div></pre></td></tr></table></figure>
<h3 id="选项与参数：-2"><a href="#选项与参数：-2" class="headerlink" title="选项与参数："></a>选项与参数：</h3><ul>
<li>-l ：输出后面接的装置所有的分区内容。若仅有 fdisk -l 时， 则系统将会把整个系统内能够搜寻到的装置的分区均列出来。</li>
</ul>
<h3 id="实例1-列出所有分区信息"><a href="#实例1-列出所有分区信息" class="headerlink" title="实例1:列出所有分区信息"></a>实例1:列出所有分区信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[root@AY120919111755c246621 tmp]<span class="comment"># fdisk -l</span></div><div class="line"></div><div class="line">Disk /dev/xvda: 21.5 GB, 21474836480 bytes</div><div class="line">255 heads, 63 sectors/track, 2610 cylinders</div><div class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</div><div class="line">Sector size (logical/physical): 512 bytes / 512 bytes</div><div class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</div><div class="line">Disk identifier: 0x00000000</div><div class="line"></div><div class="line">    Device Boot      Start         End      Blocks   Id  System</div><div class="line">/dev/xvda1   *           1        2550    20480000   83  Linux</div><div class="line">/dev/xvda2            2550        2611      490496   82  Linux swap / Solaris</div><div class="line"></div><div class="line">Disk /dev/xvdb: 21.5 GB, 21474836480 bytes</div><div class="line">255 heads, 63 sectors/track, 2610 cylinders</div><div class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</div><div class="line">Sector size (logical/physical): 512 bytes / 512 bytes</div><div class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</div><div class="line">Disk identifier: 0x56f40944</div><div class="line"></div><div class="line">    Device Boot      Start         End      Blocks   Id  System</div><div class="line">/dev/xvdb2               1        2610    20964793+  83  Linux</div></pre></td></tr></table></figure>
<h3 id="实例2-找出你系统中的根目录所在磁盘，并查阅该硬盘内的相关信息"><a href="#实例2-找出你系统中的根目录所在磁盘，并查阅该硬盘内的相关信息" class="headerlink" title="实例2:找出你系统中的根目录所在磁盘，并查阅该硬盘内的相关信息"></a>实例2:找出你系统中的根目录所在磁盘，并查阅该硬盘内的相关信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># df /            &lt;==注意：重点在找出磁盘文件名而已</span></div><div class="line">Filesystem           1K-blocks      Used Available Use% Mounted on</div><div class="line">/dev/hdc2              9920624   3823168   5585388  41% /</div><div class="line"></div><div class="line">[root@www ~]<span class="comment"># fdisk /dev/hdc  &lt;==仔细看，不要加上数字喔！</span></div><div class="line">The number of cylinders <span class="keyword">for</span> this disk is <span class="built_in">set</span> to 5005.</div><div class="line">There is nothing wrong with that, but this is larger than 1024,</div><div class="line">and could <span class="keyword">in</span> certain setups cause problems with:</div><div class="line">1) software that runs at boot time (e.g., old versions of LILO)</div><div class="line">2) booting and partitioning software from other OSs</div><div class="line">   (e.g., DOS FDISK, OS/2 FDISK)</div><div class="line"></div><div class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>):     &lt;==等待你的输入！</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;输入 m 后，就会看到底下这些命令介绍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): m   &lt;== 输入 m 后，就会看到底下这些命令介绍</div><div class="line">Command action</div><div class="line">   a   toggle a bootable flag</div><div class="line">   b   edit bsd disklabel</div><div class="line">   c   toggle the dos compatibility flag</div><div class="line">   d   delete a partition            &lt;==删除一个partition</div><div class="line">   l   list known partition types</div><div class="line">   m   <span class="built_in">print</span> this menu</div><div class="line">   n   add a new partition           &lt;==新增一个partition</div><div class="line">   o   create a new empty DOS partition table</div><div class="line">   p   <span class="built_in">print</span> the partition table     &lt;==在屏幕上显示分割表</div><div class="line">   q   quit without saving changes   &lt;==不储存离开fdisk程序</div><div class="line">   s   create a new empty Sun disklabel</div><div class="line">   t   change a partition<span class="string">'s system id</span></div><div class="line"><span class="string">   u   change display/entry units</span></div><div class="line"><span class="string">   v   verify the partition table</span></div><div class="line"><span class="string">   w   write table to disk and exit  &lt;==将刚刚的动作写入分割表</span></div><div class="line"><span class="string">   x   extra functionality (experts only)</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;离开 fdisk 时按下 q，那么所有的动作都不会生效！相反的， 按下w就是动作生效的意思。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): p  &lt;== 这里可以输出目前磁盘的状态</div><div class="line"></div><div class="line">Disk /dev/hdc: 41.1 GB, 41174138880 bytes        &lt;==这个磁盘的文件名与容量</div><div class="line">255 heads, 63 sectors/track, 5005 cylinders      &lt;==磁头、扇区与磁柱大小</div><div class="line">Units = cylinders of 16065 * 512 = 8225280 bytes &lt;==每个磁柱的大小</div><div class="line"></div><div class="line">   Device Boot      Start         End      Blocks   Id  System</div><div class="line">/dev/hdc1   *           1          13      104391   83  Linux</div><div class="line">/dev/hdc2              14        1288    10241437+  83  Linux</div><div class="line">/dev/hdc3            1289        1925     5116702+  83  Linux</div><div class="line">/dev/hdc4            1926        5005    24740100    5  Extended</div><div class="line">/dev/hdc5            1926        2052     1020096   82  Linux swap / Solaris</div><div class="line"><span class="comment"># 装置文件名 启动区否 开始磁柱    结束磁柱  1K大小容量 磁盘分区槽内的系统</span></div><div class="line"></div><div class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): q</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;想要不储存离开吗？按下 q 就对了！不要随便按 w 啊！</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;使用 p 可以列出目前这颗磁盘的分割表信息，这个信息的上半部在显示整体磁盘的状态。</p>
<h2 id="磁盘格式化"><a href="#磁盘格式化" class="headerlink" title="磁盘格式化"></a>磁盘格式化</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;磁盘分割完毕后自然就是要进行文件系统的格式化，格式化的命令非常的简单，使用 mkfs（make filesystem） 命令。</p>
<h3 id="语法：-3"><a href="#语法：-3" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkfs [-t 文件系统格式] 装置文件名</div></pre></td></tr></table></figure>
<h3 id="选项与参数：-3"><a href="#选项与参数：-3" class="headerlink" title="选项与参数："></a>选项与参数：</h3><ul>
<li>-t ：可以接文件系统格式，例如 ext3, ext2, vfat 等(系统有支持才会生效)</li>
</ul>
<h3 id="实例1-查看-mkfs-支持的文件格式"><a href="#实例1-查看-mkfs-支持的文件格式" class="headerlink" title="实例1:查看 mkfs 支持的文件格式"></a>实例1:查看 mkfs 支持的文件格式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># mkfs[tab][tab]</span></div><div class="line">mkfs         mkfs.cramfs  mkfs.ext2    mkfs.ext3    mkfs.msdos   mkfs.vfat</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;按下两个[tab]，会发现 mkfs 支持的文件格式如上所示。</p>
<h3 id="实例-将分区-dev-hdc6（可指定你自己的分区）-格式化为-ext3-文件系统："><a href="#实例-将分区-dev-hdc6（可指定你自己的分区）-格式化为-ext3-文件系统：" class="headerlink" title="实例:将分区 /dev/hdc6（可指定你自己的分区） 格式化为 ext3 文件系统："></a>实例:将分区 /dev/hdc6（可指定你自己的分区） 格式化为 ext3 文件系统：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># mkfs -t ext3 /dev/hdc6</span></div><div class="line">mke2fs 1.39 (29-May-2006)</div><div class="line">Filesystem label=                &lt;==这里指的是分割槽的名称(label)</div><div class="line">OS <span class="built_in">type</span>: Linux</div><div class="line">Block size=4096 (<span class="built_in">log</span>=2)          &lt;==block 的大小配置为 4K </div><div class="line">Fragment size=4096 (<span class="built_in">log</span>=2)</div><div class="line">251392 inodes, 502023 blocks     &lt;==由此配置决定的inode/block数量</div><div class="line">25101 blocks (5.00%) reserved <span class="keyword">for</span> the super user</div><div class="line">First data block=0</div><div class="line">Maximum filesystem blocks=515899392</div><div class="line">16 block groups</div><div class="line">32768 blocks per group, 32768 fragments per group</div><div class="line">15712 inodes per group</div><div class="line">Superblock backups stored on blocks:</div><div class="line">        32768, 98304, 163840, 229376, 294912</div><div class="line"></div><div class="line">Writing inode tables: <span class="keyword">done</span></div><div class="line">Creating journal (8192 blocks): <span class="keyword">done</span> &lt;==有日志记录</div><div class="line">Writing superblocks and filesystem accounting information: <span class="keyword">done</span></div><div class="line"></div><div class="line">This filesystem will be automatically checked every 34 mounts or</div><div class="line">180 days, whichever comes first.  Use tune2fs -c or -i to override.</div><div class="line"><span class="comment"># 这样就创建起来我们所需要的 Ext3 文件系统了！简单明了！</span></div></pre></td></tr></table></figure>
<h2 id="磁盘检验"><a href="#磁盘检验" class="headerlink" title="磁盘检验"></a>磁盘检验</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;fsck（file system check）用来检查和维护不一致的文件系统。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;若系统掉电或磁盘发生问题，可利用fsck命令对文件系统进行检查。</p>
<h3 id="语法：-4"><a href="#语法：-4" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fsck [-t 文件系统] [-ACay] 装置名称</div></pre></td></tr></table></figure>
<h3 id="选项与参数：-4"><a href="#选项与参数：-4" class="headerlink" title="选项与参数："></a>选项与参数：</h3><ul>
<li>-t : 给定档案系统的型式，若在 /etc/fstab 中已有定义或 kernel 本身已支援的则不需加上此参数</li>
<li>-s : 依序一个一个地执行 fsck 的指令来检查</li>
<li>-A : 对/etc/fstab 中所有列出来的 分区（partition）做检查</li>
<li>-C : 显示完整的检查进度</li>
<li>-d : 打印出 e2fsck 的 debug 结果</li>
<li>-p : 同时有 -A 条件时，同时有多个 fsck 的检查一起执行</li>
<li>-R : 同时有 -A 条件时，省略 / 不检查</li>
<li>-V : 详细显示模式</li>
<li>-a : 如果检查有错则自动修复</li>
<li>-r : 如果检查有错则由使用者回答是否修复</li>
<li>-y : 选项指定检测每个文件是自动输入yes，在不确定那些是不正常的时候，可以执行 # fsck -y 全部检查修复。</li>
</ul>
<h3 id="实例1-查看系统有多少文件系统支持的-fsck-命令："><a href="#实例1-查看系统有多少文件系统支持的-fsck-命令：" class="headerlink" title="实例1:查看系统有多少文件系统支持的 fsck 命令："></a>实例1:查看系统有多少文件系统支持的 fsck 命令：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># fsck[tab][tab]</span></div><div class="line">fsck         fsck.cramfs  fsck.ext2    fsck.ext3    fsck.msdos   fsck.vfat</div></pre></td></tr></table></figure>
<h3 id="实例-强制检测-dev-hdc6-分区"><a href="#实例-强制检测-dev-hdc6-分区" class="headerlink" title="实例:强制检测 /dev/hdc6 分区:"></a>实例:强制检测 /dev/hdc6 分区:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># fsck -C -f -t ext3 /dev/hdc6 </span></div><div class="line">fsck 1.39 (29-May-2006)</div><div class="line">e2fsck 1.39 (29-May-2006)</div><div class="line">Pass 1: Checking inodes, blocks, and sizes</div><div class="line">Pass 2: Checking directory structure</div><div class="line">Pass 3: Checking directory connectivity</div><div class="line">Pass 4: Checking reference counts</div><div class="line">Pass 5: Checking group summary information</div><div class="line">vbird_logical: 11/251968 files (9.1% non-contiguous), 36926/1004046 blocks</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果没有加上 -f 的选项，则由于这个文件系统不曾出现问题，检查的经过非常快速！若加上 -f 强制检查，才会一项一项的显示过程。</p>
<h2 id="磁盘挂载与卸除"><a href="#磁盘挂载与卸除" class="headerlink" title="磁盘挂载与卸除"></a>磁盘挂载与卸除</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux 的磁盘挂载使用 mount 命令，卸载使用 umount 命令。</p>
<h3 id="磁盘挂载语法："><a href="#磁盘挂载语法：" class="headerlink" title="磁盘挂载语法："></a>磁盘挂载语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mount [-t 文件系统] [-L Label名] [-o 额外选项] [-n]  装置文件名  挂载点</div></pre></td></tr></table></figure>
<h3 id="实例1-用默认的方式，将刚刚创建的-dev-hdc6-挂载到-mnt-hdc6-上面！"><a href="#实例1-用默认的方式，将刚刚创建的-dev-hdc6-挂载到-mnt-hdc6-上面！" class="headerlink" title="实例1:用默认的方式，将刚刚创建的 /dev/hdc6 挂载到 /mnt/hdc6 上面！"></a>实例1:用默认的方式，将刚刚创建的 /dev/hdc6 挂载到 /mnt/hdc6 上面！</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># mkdir /mnt/hdc6</span></div><div class="line">[root@www ~]<span class="comment"># mount /dev/hdc6 /mnt/hdc6</span></div><div class="line">[root@www ~]<span class="comment"># df</span></div><div class="line">Filesystem           1K-blocks      Used Available Use% Mounted on</div><div class="line">.....中间省略.....</div><div class="line">/dev/hdc6              1976312     42072   1833836   3% /mnt/hdc6</div></pre></td></tr></table></figure>
<h3 id="磁盘卸载命令-umount-语法："><a href="#磁盘卸载命令-umount-语法：" class="headerlink" title="磁盘卸载命令 umount 语法："></a>磁盘卸载命令 umount 语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">umount [-fn] 装置文件名或挂载点</div></pre></td></tr></table></figure>
<h3 id="选项与参数：-5"><a href="#选项与参数：-5" class="headerlink" title="选项与参数："></a>选项与参数：</h3><ul>
<li>-f ：强制卸除！可用在类似网络文件系统 (NFS) 无法读取到的情况下；</li>
<li>-n ：不升级 /etc/mtab 情况下卸除。</li>
</ul>
<h3 id="卸载-dev-hdc6"><a href="#卸载-dev-hdc6" class="headerlink" title="卸载/dev/hdc6"></a>卸载/dev/hdc6</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># umount /dev/hdc6</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/8. Linux 命令- mv" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/8. Linux 命令- mv/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.290Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/8. Linux 命令- mv/">
        Linux 命令- mv
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;mv命令是move的缩写，可以用来移动文件或者将文件改名（move (rename) files），是Linux系统下常用的命令，经常用来备份文件或者目录。</p>
<h2 id="1．命令格式："><a href="#1．命令格式：" class="headerlink" title="1．命令格式："></a>1．命令格式：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv [选项] [源文件或目录] [目标文件或目录]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能："><a href="#2．命令功能：" class="headerlink" title="2．命令功能："></a>2．命令功能：</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;视mv命令中第二个参数类型的不同（是目标文件还是目标目录），mv命令将文件重命名或将其移至一个新的目录中。当第二个参数类型是文件时，mv命令完成文件重命名，此时，源文件只能有一个（也可以是源目录名），它将所给的源文件或目录重命名为给定的目标文件名。当第二个参数是已存在的目录名称时，源文件或目录参数可以有多个，mv命令将各参数指定的源文件均移至目标目录中。在跨文件系统移动文件时，mv先拷贝，再将原有文件删除，而链至该文件的链接也将丢失。</p>
<h2 id="3．命令参数："><a href="#3．命令参数：" class="headerlink" title="3．命令参数："></a>3．命令参数：</h2><ul>
<li>-b ：若需覆盖文件，则覆盖前先行备份。  </li>
<li>-f ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；</li>
<li>-i ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！</li>
<li>-u ：若目标文件已经存在，且 source 比较新，才会更新(update)  </li>
<li>-t  ： –target-directory=DIRECTORY move all SOURCE arguments into DIRECTORY，即指定mv的目标目录，该选项适用于移动多个源文件到一个目录的情况，此时目标目录在前，源文件在后。     </li>
</ul>
<h2 id="4．命令实例："><a href="#4．命令实例：" class="headerlink" title="4．命令实例："></a>4．命令实例：</h2><h3 id="实例1：文件改名"><a href="#实例1：文件改名" class="headerlink" title="实例1：文件改名"></a>实例1：文件改名</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv test.log test1.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 20drwxr-xr-x 6 root root 4096 10-27 01:58 scf</div><div class="line">drwxrwxrwx 2 root root 4096 10-25 17:46 test3</div><div class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test4</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</div><div class="line">-rw-r--r-- 1 root root   16 10-28 06:04 test.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># mv test.log test1.txt</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 20drwxr-xr-x 6 root root 4096 10-27 01:58 scf</div><div class="line">-rw-r--r-- 1 root root   16 10-28 06:04 test1.txt</div><div class="line">drwxrwxrwx 2 root root 4096 10-25 17:46 test3</div><div class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test4</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;将文件test.log重命名为test1.txt     </p>
<h3 id="实例2：移动文件"><a href="#实例2：移动文件" class="headerlink" title="实例2：移动文件"></a>实例2：移动文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv test1.txt test3</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 20drwxr-xr-x 6 root root 4096 10-27 01:58 scf</div><div class="line">-rw-r--r-- 1 root root   29 10-28 06:05 test1.txt</div><div class="line">drwxrwxrwx 2 root root 4096 10-25 17:46 test3</div><div class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test4</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># mv test1.txt test3</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 16drwxr-xr-x 6 root root 4096 10-27 01:58 scf</div><div class="line">drwxrwxrwx 2 root root 4096 10-28 06:09 test3</div><div class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test4</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test3</span></div><div class="line">[root@localhost test3]<span class="comment"># ll</span></div><div class="line">总计 4</div><div class="line">-rw-r--r-- 1 root root 29 10-28 06:05 test1.txt</div><div class="line">[root@localhost test3]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;将test1.txt文件移到目录test3中    </p>
<h3 id="实例3：将文件log1-txt-log2-txt-log3-txt移动到目录test3中。"><a href="#实例3：将文件log1-txt-log2-txt-log3-txt移动到目录test3中。" class="headerlink" title="实例3：将文件log1.txt,log2.txt,log3.txt移动到目录test3中。"></a>实例3：将文件log1.txt,log2.txt,log3.txt移动到目录test3中。</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mv log1.txt log2.txt log3.txt test3</div><div class="line">mv -t /opt/soft/<span class="built_in">test</span>/test4/ log1.txt log2.txt 	log3.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 28</div><div class="line">-rw-r--r-- 1 root root    8 10-28 06:15 log1.txt</div><div class="line">-rw-r--r-- 1 root root   12 10-28 06:15 log2.txt</div><div class="line">-rw-r--r-- 1 root root   13 10-28 06:16 log3.txt</div><div class="line">drwxrwxrwx 2 root root 4096 10-28 06:09 test3</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># mv log1.txt log2.txt log3.txt test3</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 16drwxrwxrwx 2 root root 4096 10-28 06:18 test3</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test3/</span></div><div class="line">[root@localhost test3]<span class="comment"># ll</span></div><div class="line">总计 16</div><div class="line">-rw-r--r-- 1 root root  8 10-28 06:15 log1.txt</div><div class="line">-rw-r--r-- 1 root root 12 10-28 06:15 log2.txt</div><div class="line">-rw-r--r-- 1 root root 13 10-28 06:16 log3.txt</div><div class="line">-rw-r--r-- 1 root root 29 10-28 06:05 test1.txt</div><div class="line">[root@localhost test3]<span class="comment">#</span></div><div class="line">[root@localhost test3]<span class="comment"># ll</span></div><div class="line">总计 20</div><div class="line">-rw-r--r-- 1 root root    8 10-28 06:15 log1.txt</div><div class="line">-rw-r--r-- 1 root root   12 10-28 06:15 log2.txt</div><div class="line">-rw-r--r-- 1 root root   13 10-28 06:16 log3.txt</div><div class="line">drwxr-xr-x 2 root root 4096 10-28 06:21 logs</div><div class="line">-rw-r--r-- 1 root root   29 10-28 06:05 test1.txt</div><div class="line">[root@localhost test3]<span class="comment"># mv -t /opt/soft/test/test4/ log1.txt log2.txt 	log3.txt </span></div><div class="line">[root@localhost test3]<span class="comment"># cd ..</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test4/</span></div><div class="line">[root@localhost test4]<span class="comment"># ll</span></div><div class="line">总计 12</div><div class="line">-rw-r--r-- 1 root root  8 10-28 06:15 log1.txt</div><div class="line">-rw-r--r-- 1 root root 12 10-28 06:15 log2.txt</div><div class="line">-rw-r--r-- 1 root root 13 10-28 06:16 log3.txt</div><div class="line">[root@localhost test4]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;mv log1.txt log2.txt log3.txt test3 命令将log1.txt ，log2.txt， log3.txt 三个文件移到 test3目录中去，mv -t /opt/soft/test/test4/ log1.txt log2.txt log3.txt 命令又将三个文件移动到test4目录中去      </p>
<h3 id="实例4：将文件file1改名为file2，如果file2已经存在，则询问是否覆盖"><a href="#实例4：将文件file1改名为file2，如果file2已经存在，则询问是否覆盖" class="headerlink" title="实例4：将文件file1改名为file2，如果file2已经存在，则询问是否覆盖"></a>实例4：将文件file1改名为file2，如果file2已经存在，则询问是否覆盖</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv -i log1.txt log2.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@localhost test4]<span class="comment"># ll</span></div><div class="line">总计 12</div><div class="line">-rw-r--r-- 1 root root  8 10-28 06:15 log1.txt</div><div class="line">-rw-r--r-- 1 root root 12 10-28 06:15 log2.txt</div><div class="line">-rw-r--r-- 1 root root 13 10-28 06:16 log3.txt</div><div class="line">[root@localhost test4]<span class="comment"># cat log1.txt </span></div><div class="line">odfdfs</div><div class="line">[root@localhost test4]<span class="comment"># cat log2.txt </span></div><div class="line">ererwerwer</div><div class="line">[root@localhost test4]<span class="comment"># mv -i log1.txt log2.txt </span></div><div class="line">mv：是否覆盖“log2.txt”? y</div><div class="line">[root@localhost test4]<span class="comment"># cat log2.txt </span></div><div class="line">odfdfs</div><div class="line">[root@localhost test4]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例5：将文件file1改名为file2，即使file2存在，也是直接覆盖掉"><a href="#实例5：将文件file1改名为file2，即使file2存在，也是直接覆盖掉" class="headerlink" title="实例5：将文件file1改名为file2，即使file2存在，也是直接覆盖掉"></a>实例5：将文件file1改名为file2，即使file2存在，也是直接覆盖掉</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv -f log3.txt log2.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">[root@localhost test4]<span class="comment"># ll</span></div><div class="line">总计 8</div><div class="line">-rw-r--r-- 1 root root  8 10-28 06:15 log2.txt</div><div class="line">-rw-r--r-- 1 root root 13 10-28 06:16 log3.txt</div><div class="line">[root@localhost test4]<span class="comment"># cat log2.txt </span></div><div class="line">odfdfs</div><div class="line">[root@localhost test4]<span class="comment"># cat log3</span></div><div class="line">cat: log3: 没有那个文件或目录</div><div class="line">[root@localhost test4]<span class="comment"># ll</span></div><div class="line">总计 8</div><div class="line">-rw-r--r-- 1 root root  8 10-28 06:15 log2.txt</div><div class="line">-rw-r--r-- 1 root root 13 10-28 06:16 log3.txt</div><div class="line">[root@localhost test4]<span class="comment"># cat log2.txt </span></div><div class="line">odfdfs</div><div class="line">[root@localhost test4]<span class="comment"># cat log3.txt </span></div><div class="line">dfosdfsdfdss</div><div class="line">[root@localhost test4]<span class="comment"># mv -f log3.txt log2.txt </span></div><div class="line">[root@localhost test4]<span class="comment"># cat log2.txt </span></div><div class="line">dfosdfsdfdss</div><div class="line">[root@localhost test4]<span class="comment"># ll</span></div><div class="line">总计 4</div><div class="line">-rw-r--r-- 1 root root 13 10-28 06:16 log2.txt</div><div class="line">[root@localhost test4]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;log3.txt的内容直接覆盖了log2.txt内容，-f 这是个危险的选项，使用的时候一定要保持头脑清晰，一般情况下最好不用加上它。        </p>
<h3 id="实例6：目录的移动"><a href="#实例6：目录的移动" class="headerlink" title="实例6：目录的移动"></a>实例6：目录的移动</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv dir1 dir2</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">[root@localhost test4]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root 13 10-28 06:16 log2.txt</div><div class="line">[root@localhost test4]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root 13 10-28 06:16 log2.txt</div><div class="line">[root@localhost test4]<span class="comment"># cd ..</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">drwxr-xr-x 6 root root 4096 10-27 01:58 scf</div><div class="line">drwxrwxrwx 3 root root 4096 10-28 06:24 test3</div><div class="line">drwxr-xr-x 2 root root 4096 10-28 06:48 test4</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test3</span></div><div class="line">[root@localhost test3]<span class="comment"># ll</span></div><div class="line">drwxr-xr-x 2 root root 4096 10-28 06:21 logs</div><div class="line">-rw-r--r-- 1 root root   29 10-28 06:05 test1.txt</div><div class="line">[root@localhost test3]<span class="comment"># cd ..</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># mv test4 test3</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">drwxr-xr-x 6 root root 4096 10-27 01:58 scf</div><div class="line">drwxrwxrwx 4 root root 4096 10-28 06:54 test3</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test3/</span></div><div class="line">[root@localhost test3]<span class="comment"># ll</span></div><div class="line">drwxr-xr-x 2 root root 4096 10-28 06:21 logs</div><div class="line">-rw-r--r-- 1 root root   29 10-28 06:05 test1.txt</div><div class="line">drwxr-xr-x 2 root root 4096 10-28 06:48 test4</div><div class="line">[root@localhost test3]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果目录dir2不存在，将目录dir1改名为dir2；否则，将dir1移动到dir2中。  </p>
<h3 id="实例7：移动当前文件夹下的所有文件到上一级目录"><a href="#实例7：移动当前文件夹下的所有文件到上一级目录" class="headerlink" title="实例7：移动当前文件夹下的所有文件到上一级目录"></a>实例7：移动当前文件夹下的所有文件到上一级目录</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv * ../</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[root@localhost test4]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root 25 10-28 07:02 log1.txt</div><div class="line">-rw-r--r-- 1 root root 13 10-28 06:16 log2.txt</div><div class="line">[root@localhost test4]<span class="comment"># mv * ../</span></div><div class="line">[root@localhost test4]<span class="comment"># ll</span></div><div class="line">[root@localhost test4]<span class="comment"># cd ..</span></div><div class="line">[root@localhost test3]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root   25 10-28 07:02 log1.txt</div><div class="line">-rw-r--r-- 1 root root   13 10-28 06:16 log2.txt</div><div class="line">drwxr-xr-x 2 root root 4096 10-28 06:21 logs</div><div class="line">-rw-r--r-- 1 root root   29 10-28 06:05 test1.txt</div><div class="line">drwxr-xr-x 2 root root 4096 10-28 07:02 test4</div></pre></td></tr></table></figure>
<h3 id="实例8：把当前目录的一个子目录里的文件移动到另一个子目录里"><a href="#实例8：把当前目录的一个子目录里的文件移动到另一个子目录里" class="headerlink" title="实例8：把当前目录的一个子目录里的文件移动到另一个子目录里"></a>实例8：把当前目录的一个子目录里的文件移动到另一个子目录里</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv test3/*.txt test5</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong>   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">drwxr-xr-x 6 root root 4096 10-27 01:58 scf</div><div class="line">drwxrwxrwx 4 root root 4096 10-28 07:02 test3</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test3</span></div><div class="line">[root@localhost test3]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root   25 10-28 07:02 log1.txt</div><div class="line">-rw-r--r-- 1 root root   13 10-28 06:16 log2.txt</div><div class="line">drwxr-xr-x 2 root root 4096 10-28 06:21 logs</div><div class="line">-rw-r--r-- 1 root root   29 10-28 06:05 test1.txt</div><div class="line">drwxr-xr-x 2 root root 4096 10-28 07:02 test4</div><div class="line">[root@localhost test3]<span class="comment"># cd ..</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># mv test3/*.txt test5</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test5</span></div><div class="line">[root@localhost test5]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root   25 10-28 07:02 log1.txt</div><div class="line">-rw-r--r-- 1 root root   13 10-28 06:16 log2.txt</div><div class="line">-rw-r--r-- 1 root root   29 10-28 06:05 test1.txt</div><div class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test5-1</div><div class="line">[root@localhost test5]<span class="comment"># 	cd ..</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test3/</span></div><div class="line">[root@localhost test3]<span class="comment"># ll</span></div><div class="line">drwxr-xr-x 2 root root 4096 10-28 06:21 logs</div><div class="line">drwxr-xr-x 2 root root 4096 10-28 07:02 test4</div><div class="line">[root@localhost test3]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例9：文件被覆盖前做简单备份，前面加参数-b"><a href="#实例9：文件被覆盖前做简单备份，前面加参数-b" class="headerlink" title="实例9：文件被覆盖前做简单备份，前面加参数-b"></a>实例9：文件被覆盖前做简单备份，前面加参数-b</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv log1.txt -b log2.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost test5]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root   25 10-28 07:02 log1.txt</div><div class="line">-rw-r--r-- 1 root root   13 10-28 06:16 log2.txt</div><div class="line">-rw-r--r-- 1 root root   29 10-28 06:05 test1.txt</div><div class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test5-1</div><div class="line">[root@localhost test5]<span class="comment"># mv log1.txt -b log2.txt</span></div><div class="line">mv：是否覆盖“log2.txt”? y</div><div class="line">[root@localhost test5]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root   25 10-28 07:02 log2.txt</div><div class="line">-rw-r--r-- 1 root root   13 10-28 06:16 log2.txt~</div><div class="line">-rw-r--r-- 1 root root   29 10-28 06:05 test1.txt</div><div class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test5-1</div><div class="line">[root@localhost test5]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong> </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-b 不接受参数，mv会去读取环境变量VERSION_CONTROL来作为备份策略。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;–backup该选项指定如果目标文件存在时的动作，共有四种备份策略：   </p>
<ol>
<li>CONTROL=none或off : 不备份。    </li>
<li>CONTROL=numbered或t：数字编号的备份    </li>
<li>CONTROL=existing或nil：如果存在以数字编号的备份，则继续编号备份m+1…n：执行mv操作前已存在以数字编号的文件log2.txt.~1~，那么再次执行将产生log2.txt~2~，以次类推。如果之前没有以数字编号的文件，则使用下面讲到的简单备份。      </li>
<li>CONTROL=simple或never：使用简单备份：在被覆盖前进行了简单备份，简单备份只能有一份，再次被覆盖时，简单备份也会被覆盖。</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/10. Linux 命令- cat" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/10. Linux 命令- cat/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.290Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/10. Linux 命令- cat/">
        Linux 命令- cat
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cat命令的用途是连接文件或标准输入并打印。这个命令常用来显示文件内容，或者将几个文件连接起来显示，或者从标准输入读取内容并显示，它常与重定向符号配合使用。 </p>
<h2 id="1．命令格式："><a href="#1．命令格式：" class="headerlink" title="1．命令格式："></a>1．命令格式：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat [选项] [文件]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能："><a href="#2．命令功能：" class="headerlink" title="2．命令功能："></a>2．命令功能：</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>cat主要有三大功能：</strong></p>
<ol>
<li>一次显示整个文件:cat filename</li>
<li>从键盘创建一个文件:cat &gt; filename 只能创建新文件,不能编辑已有文件.</li>
<li>将几个文件合并为一个文件:cat file1 file2 &gt; file</li>
</ol>
<h2 id="3．命令参数："><a href="#3．命令参数：" class="headerlink" title="3．命令参数："></a>3．命令参数：</h2><ul>
<li>-A –show-all 等价于 -vET</li>
<li>-b –number-nonblank 对非空输出行编号</li>
<li>-e  等价于 -vE</li>
<li>-E –show-ends 在每行结束处显示 $</li>
<li>-n –number 对输出的所有行编号,由1开始对所有输出的行数编号</li>
<li>-s –squeeze-blank 有连续两行以上的空白行，就代换为一行的空白行 </li>
<li>-t 与 -vT 等价</li>
<li>-T –show-tabs 将跳格字符显示为 ^I</li>
<li>-u (被忽略)</li>
<li>-v –show-nonprinting 使用 ^ 和 M- 引用，除了 LFD 和 TAB 之外</li>
</ul>
<h2 id="4．使用实例："><a href="#4．使用实例：" class="headerlink" title="4．使用实例："></a>4．使用实例：</h2><h3 id="实例1：把-log2012-log-的文件内容加上行号后输入-log2013-log-这个文件里"><a href="#实例1：把-log2012-log-的文件内容加上行号后输入-log2013-log-这个文件里" class="headerlink" title="实例1：把 log2012.log 的文件内容加上行号后输入 log2013.log 这个文件里"></a>实例1：把 log2012.log 的文件内容加上行号后输入 log2013.log 这个文件里</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat -n log2012.log log2013.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat log2012.log </span></div><div class="line">2012-01</div><div class="line">2012-02</div><div class="line"></div><div class="line"></div><div class="line">======</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat log2013.log </span></div><div class="line">2013-01</div><div class="line">2013-02</div><div class="line"></div><div class="line"></div><div class="line">2013-03</div><div class="line">======</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat -n log2012.log log2013.log </span></div><div class="line">1  2012-01</div><div class="line">2  2012-02</div><div class="line">3</div><div class="line">4</div><div class="line">5  ======</div><div class="line">6  2013-01</div><div class="line">7  2013-02</div><div class="line">8</div><div class="line">9</div><div class="line">10  2013-03</div><div class="line">11  ======</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例2：把-log2012-log-和-log2013-log-的文件内容加上行号（空白行不加）之后将内容附加到-log-log-里。"><a href="#实例2：把-log2012-log-和-log2013-log-的文件内容加上行号（空白行不加）之后将内容附加到-log-log-里。" class="headerlink" title="实例2：把 log2012.log 和 log2013.log 的文件内容加上行号（空白行不加）之后将内容附加到 log.log 里。"></a>实例2：把 log2012.log 和 log2013.log 的文件内容加上行号（空白行不加）之后将内容附加到 log.log 里。</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat -b log2012.log log2013.log log.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat -b log2012.log log2013.log log.log</span></div><div class="line">1  2012-01</div><div class="line">2  2012-02</div><div class="line">3  ======</div><div class="line">4  2013-01</div><div class="line">5  2013-02</div><div class="line">6  2013-03</div><div class="line">7  ======[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例3：把-log2012-log-的文件内容加上行号后输入-log-log-这个文件里"><a href="#实例3：把-log2012-log-的文件内容加上行号后输入-log-log-这个文件里" class="headerlink" title="实例3：把 log2012.log 的文件内容加上行号后输入 log.log 这个文件里"></a>实例3：把 log2012.log 的文件内容加上行号后输入 log.log 这个文件里</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat log.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat log.log </span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat -n log2012.log &gt; log.log</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat -n log.log </span></div><div class="line">1  2012-01</div><div class="line">2  2012-02</div><div class="line">3</div><div class="line">4</div><div class="line">5  ======</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例4：使用here-doc来生成文件"><a href="#实例4：使用here-doc来生成文件" class="headerlink" title="实例4：使用here doc来生成文件"></a>实例4：使用here doc来生成文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat &gt;log.txt &lt;&lt;EOF</span></div><div class="line">&gt; Hello</div><div class="line">&gt; World</div><div class="line">&gt; Linux</div><div class="line">&gt; PWD=$(<span class="built_in">pwd</span>)</div><div class="line">&gt; EOF</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -l log.txt </span></div><div class="line">-rw-r--r-- 1 root root 37 10-28 17:07 log.txt</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat log.txt </span></div><div class="line">Hello</div><div class="line">World</div><div class="line">Linux</div><div class="line">PWD=/opt/soft/<span class="built_in">test</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;注意粗体部分，here doc可以进行字符串替换。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>备注：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>tac (反向列示)</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tac log.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tac log.txt </span></div><div class="line">PWD=/opt/soft/<span class="built_in">test</span></div><div class="line">Linux</div><div class="line">World</div><div class="line">Hello</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tac 是将 cat 反写过来，所以他的功能就跟 cat 相反， cat 是由第一行到最后一行连续显示在萤幕上，而 tac 则是由最后一行到第一行反向在萤幕上显示出来！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/39. Linux 命令- date" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/39. Linux 命令- date/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.289Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/39. Linux 命令- date/">
        Linux 命令- date
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在linux环境中，不管是编程还是其他维护，时间是必不可少的，也经常会用到时间的运算，熟练运用date命令来表示自己想要表示的时间，肯定可以给自己的工作带来诸多方便。</p>
<h2 id="1．命令格式"><a href="#1．命令格式" class="headerlink" title="1．命令格式"></a>1．命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">date [参数]... [+格式]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能"><a href="#2．命令功能" class="headerlink" title="2．命令功能"></a>2．命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;date 可以用来显示或设定系统的日期与时间。</p>
<h2 id="3．命令参数："><a href="#3．命令参数：" class="headerlink" title="3．命令参数："></a>3．命令参数：</h2><h3 id="必要参数"><a href="#必要参数" class="headerlink" title="必要参数:"></a>必要参数:</h3><ul>
<li>%H 小时(以00-23来表示)。 </li>
<li>%I 小时(以01-12来表示)。</li>
<li>%K 小时(以0-23来表示)。</li>
<li>%l 小时(以0-12来表示)。</li>
<li>%M 分钟(以00-59来表示)。 </li>
<li>%P AM或PM。 </li>
<li>%r 时间(含时分秒，小时以12小时AM/PM来表示)。 </li>
<li>%s 总秒数。起算时间为1970-01-01 00:00:00 UTC。</li>
<li>%S 秒(以本地的惯用法来表示)。</li>
<li>%T 时间(含时分秒，小时以24小时制来表示)。</li>
<li>%X 时间(以本地的惯用法来表示)。 </li>
<li>%Z 市区。 </li>
<li>%a 星期的缩写。 </li>
<li>%A 星期的完整名称。 </li>
<li>%b 月份英文名的缩写。 </li>
<li>%B 月份的完整英文名称。 </li>
<li>%c 日期与时间。只输入date指令也会显示同样的结果。 </li>
<li>%d 日期(以01-31来表示)。 </li>
<li>%D 日期(含年月日)。 </li>
<li>%j 该年中的第几天。 </li>
<li>%m 月份(以01-12来表示)。 </li>
<li>%U 该年中的周数。 </li>
<li>%w 该周的天数，0代表周日，1代表周一，异词类推。</li>
<li>%x 日期(以本地的惯用法来表示)。 </li>
<li>%y 年份(以00-99来表示)。 </li>
<li>%Y 年份(以四位数来表示)。 </li>
<li>%n 在显示时，插入新的一行。 </li>
<li>%t 在显示时，插入tab。 </li>
<li>MM 月份(必要) </li>
<li>DD 日期(必要) </li>
<li>hh 小时(必要) </li>
<li>mm 分钟(必要)</li>
<li>ss 秒(选择性) </li>
</ul>
<h3 id="选择参数"><a href="#选择参数" class="headerlink" title="选择参数:"></a>选择参数:</h3><ul>
<li>-d&lt;字符串&gt; 　显示字符串所指的日期与时间。字符串前后必须加上双引号。 </li>
<li>-s&lt;字符串&gt; 　根据字符串来设置日期与时间。字符串前后必须加上双引号。 </li>
<li>-u 　显示GMT。 </li>
<li>–help 　在线帮助。 </li>
<li>–version 　显示版本信息 </li>
</ul>
<h2 id="4．使用说明"><a href="#4．使用说明" class="headerlink" title="4．使用说明"></a>4．使用说明</h2><h3 id="1-在显示方面，使用者可以设定欲显示的格式，格式设定为一个加号后接数个标记，其中可用的标记列表如下-打印出-："><a href="#1-在显示方面，使用者可以设定欲显示的格式，格式设定为一个加号后接数个标记，其中可用的标记列表如下-打印出-：" class="headerlink" title="1.在显示方面，使用者可以设定欲显示的格式，格式设定为一个加号后接数个标记，其中可用的标记列表如下: % :  打印出 %："></a>1.在显示方面，使用者可以设定欲显示的格式，格式设定为一个加号后接数个标记，其中可用的标记列表如下: % :  打印出 %：</h3><ul>
<li><p>%n : 下一行</p>
</li>
<li><p>%t : 跳格</p>
</li>
<li><p>%H : 小时(00..23)</p>
</li>
<li><p>%I : 小时(01..12)</p>
</li>
<li><p>%k : 小时(0..23)</p>
</li>
<li><p>%l : 小时(1..12)</p>
</li>
<li><p>%M : 分钟(00..59)</p>
</li>
<li><p>%p : 显示本地 AM 或 PM</p>
</li>
<li><p>%r : 直接显示时间 (12 小时制，格式为 hh:mm:ss [AP]M)</p>
</li>
<li><p>%s : 从 1970 年 1 月 1 日 00:00:00 UTC 到目前为止的秒数</p>
</li>
<li><p>%S : 秒(00..61)</p>
</li>
<li><p>%T : 直接显示时间 (24 小时制)</p>
</li>
<li><p>%X : 相当于 %H:%M:%S</p>
</li>
<li><p>%Z : 显示时区 %a : 星期几 (Sun..Sat)</p>
</li>
<li><p>%A : 星期几 (Sunday..Saturday)</p>
</li>
<li><p>%b : 月份 (Jan..Dec)</p>
</li>
<li><p>%B : 月份 (January..December)</p>
</li>
<li><p>;%c : 直接显示日期与时间</p>
</li>
<li><p>%d : 日 (01..31)</p>
</li>
<li><p>%D : 直接显示日期 (mm/dd/yy)</p>
</li>
<li><p>%h : 同 %b</p>
</li>
<li><p>%j : 一年中的第几天 (001..366)</p>
</li>
<li><p>%m : 月份 (01..12)</p>
</li>
<li><p>%U : 一年中的第几周 (00..53) (以 Sunday 为一周的第一天的情形)</p>
</li>
<li><p>%w : 一周中的第几天 (0..6)</p>
</li>
<li><p>%W : 一年中的第几周 (00..53) (以 Monday 为一周的第一天的情形)</p>
</li>
<li><p>%x : 直接显示日期 (mm/dd/yy)</p>
</li>
<li><p>%y : 年份的最后两位数字 (00.99)</p>
</li>
<li><p>%Y : 完整年份 (0000..9999)</p>
</li>
</ul>
<h3 id="2-在设定时间方面："><a href="#2-在设定时间方面：" class="headerlink" title="2.在设定时间方面："></a>2.在设定时间方面：</h3><ul>
<li><p>date -s //设置当前时间，只有root权限才能设置，其他只能查看。</p>
</li>
<li><p>date -s 20080523 //设置成20080523，这样会把具体时间设置成空00:00:00</p>
</li>
<li><p>date -s 01:01:01 //设置具体时间，不会对日期做更改</p>
</li>
<li><p>date -s “01:01:01 2008-05-23″ //这样可以设置全部时间</p>
</li>
<li><p>date -s “01:01:01 20080523″ //这样可以设置全部时间</p>
</li>
<li><p>date -s “2008-05-23 01:01:01″ //这样可以设置全部时间</p>
</li>
<li><p>date -s “20080523 01:01:01″ //这样可以设置全部时间</p>
</li>
</ul>
<h3 id="3-加减："><a href="#3-加减：" class="headerlink" title="3.加减："></a>3.加减：</h3><ul>
<li><p>date +%Y%m%d         //显示前天年月日</p>
</li>
<li><p>date +%Y%m%d –date=”+1 day”  //显示前一天的日期</p>
</li>
<li><p>date +%Y%m%d –date=”-1 day”  //显示后一天的日期</p>
</li>
<li><p>date +%Y%m%d –date=”-1 month”  //显示上一月的日期</p>
</li>
<li><p>date +%Y%m%d –date=”+1 month”  //显示下一月的日期</p>
</li>
<li><p>;date +%Y%m%d –date=”-1 year”  //显示前一年的日期</p>
</li>
<li><p>date +%Y%m%d –date=”+1 year”  //显示下一年的日期</p>
</li>
</ul>
<h2 id="5．使用实例"><a href="#5．使用实例" class="headerlink" title="5．使用实例"></a>5．使用实例</h2><h3 id="实例1：显示当前时间"><a href="#实例1：显示当前时间" class="headerlink" title="实例1：显示当前时间"></a>实例1：显示当前时间</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">date</div><div class="line">date <span class="string">'+%c'</span></div><div class="line">date <span class="string">'+%D'</span></div><div class="line">date <span class="string">'+%x'</span></div><div class="line">date <span class="string">'+%T'</span></div><div class="line">date <span class="string">'+%X'</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># date</span></div><div class="line">2012年 12月 08日 星期六 08:31:35 CST</div><div class="line">[root@localhost ~]<span class="comment"># date '+%c'</span></div><div class="line">2012年12月08日 星期六 08时34分44秒</div><div class="line">[root@localhost ~]<span class="comment"># date '+%D'</span></div><div class="line">12/08/12[root@localhost ~]<span class="comment"># date '+%x'</span></div><div class="line">2012年12月08日</div><div class="line">[root@localhost ~]<span class="comment"># date '+%T'</span></div><div class="line">08:35:36[root@localhost ~]<span class="comment"># date '+%X'</span></div><div class="line">08时35分54秒</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例2：显示日期和设定时间"><a href="#实例2：显示日期和设定时间" class="headerlink" title="实例2：显示日期和设定时间"></a>实例2：显示日期和设定时间</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">date --date 08:42:00</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># date '+%c'</span></div><div class="line">2012年12月08日 星期六 08时41分37秒</div><div class="line">[root@localhost ~]<span class="comment"># date --date 08:42:00</span></div><div class="line">2012年 12月 08日 星期六 08:42:00 CST</div><div class="line">[root@localhost ~]<span class="comment"># date '+%c' --date 08:45:00</span></div><div class="line">2012年12月08日 星期六 08时45分00秒</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例3：date-d参数使用"><a href="#实例3：date-d参数使用" class="headerlink" title="实例3：date -d参数使用"></a>实例3：date -d参数使用</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># date -d "nov 22"</span></div><div class="line">2012年 11月 22日 星期四 00:00:00 CST</div><div class="line">[root@localhost ~]<span class="comment"># date -d '2 weeks'</span></div><div class="line">2012年 12月 22日 星期六 08:50:21 CST</div><div class="line">[root@localhost ~]<span class="comment"># date -d 'next monday'</span></div><div class="line">2012年 12月 10日 星期一 00:00:00 CST</div><div class="line">[root@localhost ~]<span class="comment">#  date -d next-day +%Y%m%d</span></div><div class="line">20121209[root@localhost ~]<span class="comment"># date -d tomorrow +%Y%m%d</span></div><div class="line">20121209[root@localhost ~]<span class="comment"># date -d last-day +%Y%m%d</span></div><div class="line">20121207[root@localhost ~]<span class="comment"># date -d yesterday +%Y%m%d</span></div><div class="line">20121207[root@localhost ~]<span class="comment"># date -d last-month +%Y%m</span></div><div class="line">201211[root@localhost ~]<span class="comment"># date -d next-month +%Y%m</span></div><div class="line">201301[root@localhost ~]<span class="comment"># date -d '30 days ago' </span></div><div class="line">2012年 11月 08日 星期四 08:51:37 CST</div><div class="line">[root@localhost ~]<span class="comment"># date -d '-100 days' </span></div><div class="line">2012年 08月 30日 星期四 08:52:03 CST</div><div class="line">[root@localhost ~]<span class="comment">#  date -d 'dec 14 -2 weeks'</span></div><div class="line">2012年 11月 30日 星期五 00:00:00 CST</div><div class="line">[root@localhost ~]<span class="comment"># date -d '50 days'</span></div><div class="line">2013年 01月 27日 星期日 08:52:27 CST</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;date 命令的另一个扩展是 -d 选项，该选项非常有用。使用这个功能强大的选项，通过将日期作为引号括起来的参数提供，您可以快速地查明一个特定的日期。-d 选项还可以告诉您，相对于当前日期若干天的究竟是哪一天，从现在开始的若干天或若干星期以后，或者以前（过去）。通过将这个相对偏移使用引号括起来，作为 -d 选项的参数，就可以完成这项任务。</p>
<h4 id="具体说明如下："><a href="#具体说明如下：" class="headerlink" title="具体说明如下："></a>具体说明如下：</h4><ul>
<li><p>date -d “nov 22”  今年的 11 月 22 日是星期三</p>
</li>
<li><p>date -d ‘2 weeks’ 2周后的日期</p>
</li>
<li><p>date -d ‘next monday’ (下周一的日期)</p>
</li>
<li><p>date -d next-day +%Y%m%d（明天的日期）或者：date -d tomorrow +%Y%m%d</p>
</li>
<li><p>date -d last-day +%Y%m%d(昨天的日期) 或者：date -d yesterday +%Y%m%d</p>
</li>
<li><p>date -d last-month +%Y%m(上个月是几月)</p>
</li>
<li><p>date -d next-month +%Y%m(下个月是几月)</p>
</li>
<li><p>使用 ago 指令，您可以得到过去的日期：</p>
</li>
<li><p>date -d ‘30 days ago’ （30天前的日期）</p>
</li>
<li><p>使用负数以得到相反的日期：</p>
</li>
<li><p>date -d ‘dec 14 -2 weeks’ （相对:dec 14这个日期的两周前的日期）</p>
</li>
<li><p>date -d ‘-100 days’ (100天以前的日期)</p>
</li>
<li><p>date -d ‘50 days’(50天后的日期)</p>
</li>
</ul>
<h3 id="实例4：显示月份和日数"><a href="#实例4：显示月份和日数" class="headerlink" title="实例4：显示月份和日数"></a>实例4：显示月份和日数</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">date  <span class="string">'+%B %d'</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># date  '+%B %d' </span></div><div class="line">十二月 08[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例5：显示时间后跳行，再显示目前日期"><a href="#实例5：显示时间后跳行，再显示目前日期" class="headerlink" title="实例5：显示时间后跳行，再显示目前日期"></a>实例5：显示时间后跳行，再显示目前日期</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">date <span class="string">'+%T%n%D'</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># date '+%T%n%D'</span></div><div class="line">09:00:30</div><div class="line">12/08/12</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/64. Linux 命令- cut" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/64. Linux 命令- cut/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.288Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/64. Linux 命令- cut/">
        Linux 命令- cut
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cut命令用来显示行中的指定部分，删除文件中指定字段。cut经常用来显示文件的内容，类似于下的type命令。</p>
<h2 id="1-命令格式"><a href="#1-命令格式" class="headerlink" title="1. 命令格式"></a>1. 命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cut [参数] [file]</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2. 命令功能"></a>2. 命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cut 命令从文件的每一行剪切字节、字符和字段并将这些字节、字符和字段写至标准输出。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果不指定 File 参数，cut 命令将读取标准输入。必须指定 -b、-c 或 -f 标志之一。</p>
<h2 id="3-命令参数"><a href="#3-命令参数" class="headerlink" title="3. 命令参数"></a>3. 命令参数</h2><ul>
<li>-b：仅显示行中指定直接范围的内容；</li>
<li>-c：仅显示行中指定范围的字符；</li>
<li>-d：指定字段的分隔符，默认的字段分隔符为“TAB”；</li>
<li>-f：显示指定字段的内容；</li>
<li>-n：与“-b”选项连用，不分割多字节字符；</li>
<li>–complement：补足被选择的字节、字符或字段； </li>
<li>–out-delimiter=&lt;字段分隔符&gt;：指定输出内容是的字段分割符；</li>
<li>–help：显示指令的帮助信息</li>
<li>–version：显示指令的版本信息。</li>
</ul>
<h2 id="4-使用实例"><a href="#4-使用实例" class="headerlink" title="4. 使用实例"></a>4. 使用实例</h2><h3 id="实例1：截取文件其中一个字符"><a href="#实例1：截取文件其中一个字符" class="headerlink" title="实例1：截取文件其中一个字符"></a>实例1：截取文件其中一个字符</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cut -c2 /etc/passwd</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cut -c2 /etc/passwd</span></div><div class="line">o</div><div class="line">i</div><div class="line">a</div><div class="line">d</div><div class="line">p</div><div class="line">y</div><div class="line">h</div><div class="line">a</div><div class="line">a</div><div class="line">p</div><div class="line">a</div><div class="line">t</div><div class="line">o</div><div class="line">y</div><div class="line">y</div><div class="line">b</div><div class="line">o</div><div class="line">s</div><div class="line">o</div><div class="line">s</div><div class="line">h</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;提取第2个字符</p>
<h3 id="实例2：截取文件多个字符"><a href="#实例2：截取文件多个字符" class="headerlink" title="实例2：截取文件多个字符"></a>实例2：截取文件多个字符</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cut -c2-5,10 /etc/passwd</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cut -c2-5,10 /etc/passwd</span></div><div class="line">oot:0</div><div class="line"><span class="keyword">in</span>:x:</div><div class="line">aemo2</div><div class="line">dm:x:</div><div class="line">p:x:l</div><div class="line">ync:0</div><div class="line">hutdx</div><div class="line">alt:0</div><div class="line">ail:1</div><div class="line">perax</div><div class="line">ames2</div><div class="line">tp:x5</div><div class="line">obod9</div><div class="line">ysteu</div><div class="line">ystee</div><div class="line">bus::</div><div class="line">olki:</div><div class="line">ss:x5</div><div class="line">ostf:</div><div class="line">shd::</div><div class="line">hron9</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;提取第2、第3、第4、第5和第10个字符</p>
<h3 id="实例3：提取前4个字符"><a href="#实例3：提取前4个字符" class="headerlink" title="实例3：提取前4个字符"></a>实例3：提取前4个字符</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cut -c-4 /etc/passwd</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cut -c-4 /etc/passwd</span></div><div class="line">root</div><div class="line">bin:</div><div class="line">daem</div><div class="line">adm:</div><div class="line">lp:x</div><div class="line">sync</div><div class="line">shut</div><div class="line">halt</div><div class="line">mail</div><div class="line">oper</div><div class="line">game</div><div class="line">ftp:</div><div class="line">nobo</div><div class="line">syst</div><div class="line">syst</div><div class="line">dbus</div><div class="line">polk</div><div class="line">tss:</div><div class="line">post</div><div class="line">sshd</div><div class="line">chro</div></pre></td></tr></table></figure>
<h3 id="实例4：打印从第10个字符开始到结尾"><a href="#实例4：打印从第10个字符开始到结尾" class="headerlink" title="实例4：打印从第10个字符开始到结尾"></a>实例4：打印从第10个字符开始到结尾</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cut -c10- /etc/passwd</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cut -c5- /etc/passwd</span></div><div class="line">:x:0:0:root:/root:/bin/bash</div><div class="line">x:1:1:bin:/bin:/sbin/nologin</div><div class="line">on:x:2:2:daemon:/sbin:/sbin/nologin</div><div class="line">x:3:4:adm:/var/adm:/sbin/nologin</div><div class="line">:4:7:lp:/var/spool/lpd:/sbin/nologin</div><div class="line">:x:5:0:sync:/sbin:/bin/sync</div><div class="line">down:x:6:0:shutdown:/sbin:/sbin/shutdown</div><div class="line">:x:7:0:halt:/sbin:/sbin/halt</div><div class="line">:x:8:12:mail:/var/spool/mail:/sbin/nologin</div><div class="line">ator:x:11:0:operator:/root:/sbin/nologin</div><div class="line">s:x:12:100:games:/usr/games:/sbin/nologin</div><div class="line">x:14:50:FTP User:/var/ftp:/sbin/nologin</div><div class="line">dy:x:99:99:Nobody:/:/sbin/nologin</div><div class="line">emd-bus-proxy:x:999:997:systemd Bus Proxy:/:/sbin/nologin</div><div class="line">emd-network:x:192:192:systemd Network Management:/:/sbin/nologin</div><div class="line">:x:81:81:System message bus:/:/sbin/nologin</div><div class="line">itd:x:998:996:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</div><div class="line">x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin</div><div class="line">fix:x:89:89::/var/spool/postfix:/sbin/nologin</div><div class="line">:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</div><div class="line">ny:x:997:995::/var/lib/chrony:/sbin/nologin</div></pre></td></tr></table></figure>
<h3 id="实例5：用-f-提取指定字段，-d-指定分隔符"><a href="#实例5：用-f-提取指定字段，-d-指定分隔符" class="headerlink" title="实例5：用 -f 提取指定字段，-d 指定分隔符"></a>实例5：用 -f 提取指定字段，-d 指定分隔符</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cut -f1 -d<span class="string">" "</span> test.txt</div><div class="line">cut -f2,3 -d<span class="string">" "</span> test.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cat test.txt</span></div><div class="line">No Name Mark Percent</div><div class="line">01 tom 69 91</div><div class="line">02 jack 71 87</div><div class="line">03 alex 68 98</div><div class="line">[root@localhost ~]<span class="comment"># cut -f1 -d" " test.txt</span></div><div class="line">No</div><div class="line">01</div><div class="line">02</div><div class="line">03</div><div class="line">[root@localhost ~]<span class="comment"># cut -f2,3 -d" " test.txt</span></div><div class="line">Name Mark</div><div class="line">tom 69</div><div class="line">jack 71</div><div class="line">alex 68</div></pre></td></tr></table></figure>
<h3 id="实例6：使用-–complement-提取指定字段之外的列"><a href="#实例6：使用-–complement-提取指定字段之外的列" class="headerlink" title="实例6：使用 –complement 提取指定字段之外的列"></a>实例6：使用 –complement 提取指定字段之外的列</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cut -f2 -d<span class="string">" "</span> --complement test.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cat test.txt                 </span></div><div class="line">No Name Mark Percent</div><div class="line">01 tom 69 91</div><div class="line">02 jack 71 87</div><div class="line">03 alex 68 98</div><div class="line">[root@localhost ~]<span class="comment"># cut -f2 -d" " --complement test.txt</span></div><div class="line">No Mark Percent</div><div class="line">01 69 91</div><div class="line">02 71 87</div><div class="line">03 68 98</div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/17. Linux 命令- whereis" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/17. Linux 命令- whereis/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.288Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/17. Linux 命令- whereis/">
        Linux 命令- whereis
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;whereis命令只能用于程序名的搜索，而且只搜索二进制文件（参数-b）、man说明文件（参数-m）和源代码文件（参数-s）。如果省略参数，则返回所有信息。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;和find相比，whereis查找的速度非常快，这是因为linux系统会将 系统内的所有文件都记录在一个数据库文件中，当使用whereis和下面即将介绍的locate时，会从数据库中查找数据，而不是像find命令那样，通 过遍历硬盘来查找，效率自然会很高。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;但是该数据库文件并不是实时更新，默认情况下时一星期更新一次，因此，我们在用whereis和locate 查找文件时，有时会找到已经被删除的数据，或者刚刚建立文件，却无法查找到，原因就是因为数据库文件没有被更新。</p>
<h2 id="1-命令格式"><a href="#1-命令格式" class="headerlink" title="1.命令格式"></a>1.命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">whereis [-bmsu] [BMS 目录名 -f ] 文件名</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2.命令功能"></a>2.命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;whereis 命令是定位可执行文件、源代码文件、帮助文件在文件系统中的位置。这些文件的属性应属于原始代码，二进制文件，或是帮助文件。whereis 程序还具有搜索源代码、指定备用搜索路径和搜索不寻常项的能力。</p>
<h2 id="3-命令参数"><a href="#3-命令参数" class="headerlink" title="3.命令参数"></a>3.命令参数</h2><ul>
<li>-b   定位可执行文件。</li>
<li>-m   定位帮助文件。</li>
<li>-s   定位源代码文件。</li>
<li>-u   搜索默认路径下除可执行文件、源代码文件、帮助文件以外的其它文件。</li>
<li>-B   指定搜索可执行文件的路径。</li>
<li>-M   指定搜索帮助文件的路径。</li>
<li>-S   指定搜索源代码文件的路径。</li>
</ul>
<h2 id="4-使用实例"><a href="#4-使用实例" class="headerlink" title="4.使用实例"></a>4.使用实例</h2><h3 id="实例1：将和-文件相关的文件都查找出来"><a href="#实例1：将和-文件相关的文件都查找出来" class="headerlink" title="实例1：将和 ** 文件相关的文件都查找出来"></a>实例1：将和 ** 文件相关的文件都查找出来</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">whereis svn</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># whereis tomcat</span></div><div class="line">tomcat:</div><div class="line">[root@localhost ~]<span class="comment"># whereis svn</span></div><div class="line">svn: /usr/bin/svn /usr/<span class="built_in">local</span>/svn /usr/share/man/man1/svn.1.gz</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tomcat 没安装，找不出来，svn 安装找出了很多相关文件</p>
<h3 id="实例2：只将二进制文件查找出来"><a href="#实例2：只将二进制文件查找出来" class="headerlink" title="实例2：只将二进制文件查找出来"></a>实例2：只将二进制文件查找出来</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">whereis -b svn</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># whereis -b svn</span></div><div class="line">svn: /usr/bin/svn /usr/<span class="built_in">local</span>/svn</div><div class="line">[root@localhost ~]<span class="comment"># whereis -m svn</span></div><div class="line">svn: /usr/share/man/man1/svn.1.gz</div><div class="line">[root@localhost ~]<span class="comment"># whereis -s svn</span></div><div class="line">svn:</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code>whereis -m svn</code> 查出说明文档路径，<code>whereis -s svn</code> 找 source 源文件。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/5. Linux 命令-rmdir" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/5. Linux 命令-rmdir/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.287Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/5. Linux 命令-rmdir/">
        Linux 命令- rmdir
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rmdir是常用的命令，该命令的功能是删除空目录，一个目录被删除之前必须是空的。（注意，rm - r dir命令可代替rmdir，但是有很大危险性。）删除某目录时也必须具有对父目录的写权限。     </p>
<h2 id="1．命令格式："><a href="#1．命令格式：" class="headerlink" title="1．命令格式："></a>1．命令格式：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rmdir [选项] [目录]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能："><a href="#2．命令功能：" class="headerlink" title="2．命令功能："></a>2．命令功能：</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;该命令从一个目录中删除一个或多个子目录项，删除某目录时也必须具有对父目录的写权限。</p>
<h2 id="3．命令参数："><a href="#3．命令参数：" class="headerlink" title="3．命令参数："></a>3．命令参数：</h2><ul>
<li><ul>
<li>p 递归删除目录dirname，当子目录删除后其父目录为空时，也一同被删除。如果整个路径被删除或者由于某种原因保留部分路径，则系统在标准输出上显示相应的信息。</li>
</ul>
</li>
<li>-v, –verbose  显示指令执行过程 </li>
</ul>
<h2 id="4．命令实例："><a href="#4．命令实例：" class="headerlink" title="4．命令实例："></a>4．命令实例：</h2><h3 id="实例1：rmdir-不能删除非空目录"><a href="#实例1：rmdir-不能删除非空目录" class="headerlink" title="实例1：rmdir 不能删除非空目录"></a>实例1：rmdir 不能删除非空目录</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rmdir doc</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">[root@localhost scf]<span class="comment"># tree</span></div><div class="line">.</div><div class="line">|-- bin</div><div class="line">|-- doc</div><div class="line">|   |-- info</div><div class="line">|   `-- product</div><div class="line">|-- lib</div><div class="line">|-- logs</div><div class="line">|   |-- info</div><div class="line">|   `-- product</div><div class="line">`-- service</div><div class="line">    `-- deploy</div><div class="line">        |-- info</div><div class="line">        `-- product</div><div class="line"> </div><div class="line">12 directories, 0 files</div><div class="line">[root@localhost scf]<span class="comment"># rmdir doc</span></div><div class="line">rmdir: doc: 目录非空</div><div class="line">[root@localhost scf]<span class="comment"># rmdir doc/info</span></div><div class="line">[root@localhost scf]<span class="comment"># rmdir doc/product</span></div><div class="line">[root@localhost scf]<span class="comment"># tree</span></div><div class="line">.</div><div class="line">|-- bin</div><div class="line">|-- doc</div><div class="line">|-- lib</div><div class="line">|-- logs</div><div class="line">|   |-- info</div><div class="line">|   `-- product</div><div class="line">`-- service</div><div class="line">    `-- deploy</div><div class="line">        |-- info</div><div class="line">        `-- product</div><div class="line"> </div><div class="line">10 directories, 0 files</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rmdir 目录名 命令不能直接删除非空目录</p>
<h3 id="实例2：rmdir-p-当子目录被删除后使它也成为空目录的话，则顺便一并删除"><a href="#实例2：rmdir-p-当子目录被删除后使它也成为空目录的话，则顺便一并删除" class="headerlink" title="实例2：rmdir -p 当子目录被删除后使它也成为空目录的话，则顺便一并删除"></a>实例2：rmdir -p 当子目录被删除后使它也成为空目录的话，则顺便一并删除</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rmdir -p logs</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">[root@localhost scf]<span class="comment"># tree</span></div><div class="line">.</div><div class="line">|-- bin</div><div class="line">|-- doc</div><div class="line">|-- lib</div><div class="line">|-- logs</div><div class="line">|   `-- product</div><div class="line">`-- service</div><div class="line">    `-- deploy</div><div class="line">        |-- info</div><div class="line">        `-- product</div><div class="line"> </div><div class="line">10 directories, 0 files</div><div class="line">[root@localhost scf]<span class="comment"># rmdir -p logs</span></div><div class="line">rmdir: logs: 目录非空</div><div class="line">[root@localhost scf]<span class="comment"># tree</span></div><div class="line">.</div><div class="line">|-- bin</div><div class="line">|-- doc</div><div class="line">|-- lib</div><div class="line">|-- logs</div><div class="line">|   `-- product</div><div class="line">`-- service</div><div class="line">    `-- deploy</div><div class="line">        |-- info</div><div class="line">        `-- product</div><div class="line"> </div><div class="line">9 directories, 0 files</div><div class="line">[root@localhost scf]<span class="comment"># rmdir -p logs/product</span></div><div class="line">[root@localhost scf]<span class="comment"># tree</span></div><div class="line">.</div><div class="line">|-- bin</div><div class="line">|-- doc</div><div class="line">|-- lib</div><div class="line">`-- service</div><div class="line">`-- deploy</div><div class="line">        |-- info</div><div class="line">        `-- product</div><div class="line"> </div><div class="line">7 directories, 0 files</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/42/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/41/">41</a><a class="page-number" href="/page/42/">42</a><span class="page-number current">43</span><a class="page-number" href="/page/44/">44</a><a class="page-number" href="/page/45/">45</a><span class="space">&hellip;</span><a class="page-number" href="/page/63/">63</a><a class="extend next" rel="next" href="/page/44/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2017 失落的乐章
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    

<script>
	var yiliaConfig = {
		fancybox: ,
		mathjax: ,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



  </div>
</body>
</html>