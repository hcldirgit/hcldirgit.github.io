<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>失落的乐章</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="失落的乐章的Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="失落的乐章">
<meta property="og:url" content="https://hcldirgit.github.io/page/48/index.html">
<meta property="og:site_name" content="失落的乐章">
<meta property="og:description" content="失落的乐章的Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="失落的乐章">
<meta name="twitter:description" content="失落的乐章的Blog">
  
    <link rel="alternative" href="/atom.xml" title="失落的乐章" type="application/atom+xml">
  
  
    <link rel="icon" href="https://hcldirgit.github.io/images/0.png">
  
  <link rel="stylesheet" href="/css/style.css">
  
  
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85415703-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://hcldirgit.github.io/images/0.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">失落的乐章</a></h1>
		</hgroup>

		
		<p class="header-subtitle">技术面前，永远都是学生。</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Ansible/" style="font-size: 10.42px;">Ansible</a> <a href="/tags/Apache/" style="font-size: 18.33px;">Apache</a> <a href="/tags/Cacti/" style="font-size: 11.67px;">Cacti</a> <a href="/tags/DNS/" style="font-size: 13.33px;">DNS</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/FTP/" style="font-size: 11.25px;">FTP</a> <a href="/tags/Git/" style="font-size: 10.83px;">Git</a> <a href="/tags/HA集群/" style="font-size: 11.67px;">HA集群</a> <a href="/tags/Hadoop/" style="font-size: 12.5px;">Hadoop</a> <a href="/tags/Jenkins/" style="font-size: 10.42px;">Jenkins</a> <a href="/tags/LAMP/" style="font-size: 19.58px;">LAMP</a> <a href="/tags/LNMP/" style="font-size: 17.08px;">LNMP</a> <a href="/tags/LVS/" style="font-size: 16.67px;">LVS</a> <a href="/tags/Linux/" style="font-size: 19.17px;">Linux</a> <a href="/tags/Linux命令/" style="font-size: 20px;">Linux命令</a> <a href="/tags/Linux安全/" style="font-size: 14.17px;">Linux安全</a> <a href="/tags/Memcached/" style="font-size: 11.25px;">Memcached</a> <a href="/tags/MongoDB/" style="font-size: 15.42px;">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 17.5px;">MySQL</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/Nagios/" style="font-size: 11.67px;">Nagios</a> <a href="/tags/Nginx/" style="font-size: 17.92px;">Nginx</a> <a href="/tags/OpenStack/" style="font-size: 11.25px;">OpenStack</a> <a href="/tags/Php/" style="font-size: 14.58px;">Php</a> <a href="/tags/Puppet/" style="font-size: 11.25px;">Puppet</a> <a href="/tags/Python/" style="font-size: 14.58px;">Python</a> <a href="/tags/Redis/" style="font-size: 16.25px;">Redis</a> <a href="/tags/Resin/" style="font-size: 10px;">Resin</a> <a href="/tags/Saltstack/" style="font-size: 10px;">Saltstack</a> <a href="/tags/Samba/" style="font-size: 12.08px;">Samba</a> <a href="/tags/Squid/" style="font-size: 14.58px;">Squid</a> <a href="/tags/Tomcat/" style="font-size: 13.75px;">Tomcat</a> <a href="/tags/Zabbix/" style="font-size: 15.83px;">Zabbix</a> <a href="/tags/haproxy/" style="font-size: 12.5px;">haproxy</a> <a href="/tags/keepalived/" style="font-size: 12.92px;">keepalived</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/shell练习/" style="font-size: 18.75px;">shell练习</a> <a href="/tags/正则表达式/" style="font-size: 12.92px;">正则表达式</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">失落的乐章</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://hcldirgit.github.io/images/0.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">失落的乐章</h1>
			</hgroup>
			
			<p class="header-subtitle">技术面前，永远都是学生。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-2. Linux 命令/74. Linux 命令- rpm" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/74. Linux 命令- rpm/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.247Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/74. Linux 命令- rpm/">
        Linux 命令- rpm
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rpm命令是RPM软件包的管理工具。RPM是 “Redhat Package Manager” 的缩写，根据名字也能猜到这是Redhat公司开发出来的。RPM 是以一种数据库记录的方式来将需要的套件安装到Linux 主机的一套管理程序。也就是说，linux系统中存在着一个关于RPM的数据库，它记录了安装的包以及包与包之间依赖相关性。RPM包是预先在linux机器上编译好并打包好的文件，安装起来非常快捷。但是也有一些缺点，比如安装的环境必须与编译时的环境一致或者相当；包与包之间存在着相互依赖的情况；卸载包时需要先把依赖的包卸载掉，如果依赖的包是系统所必须的，那就不能卸载这个包，否则会造成系统崩溃。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果光驱中还有系统安装盘的话，可以通过 mount /dev/cdrom /mnt 命令把光驱挂载到/mnt目录下，那么会在/mnt/Packages目录下看到很多.rpm的文件，这就是RPM包了。</p>
<h2 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm [选项] [参数]</div></pre></td></tr></table></figure>
<h2 id="命令选项"><a href="#命令选项" class="headerlink" title="命令选项"></a>命令选项</h2><ul>
<li>-a：查询所有套件； </li>
<li>-b&lt;完成阶段&gt;&lt;套件档&gt;+或-t &lt;完成阶段&gt;&lt;套件档&gt;+：设置包装套件的完成阶段，并指定套件档的文件名称； </li>
<li>-c：只列出组态配置文件，本参数需配合”-l”参数使用； </li>
<li>-d：只列出文本文件，本参数需配合”-l”参数使用； </li>
<li>-e&lt;套件档&gt;或–erase&lt;套件档&gt;：删除指定的套件； </li>
<li>-f&lt;文件&gt;+：查询拥有指定文件的套件；</li>
<li>-h或–hash：套件安装时列出标记； </li>
<li>-i：显示套件的相关信息； </li>
<li>-i&lt;套件档&gt;或–install&lt;套件档&gt;：安装指定的套件档； </li>
<li>-l：显示套件的文件列表； </li>
<li>-p&lt;套件档&gt;+：查询指定的RPM套件档； </li>
<li>-q：使用询问模式，当遇到任何问题时，rpm指令会先询问用户； </li>
<li>-R：显示套件的关联性信息； </li>
<li>-s：显示文件状态，本参数需配合”-l”参数使用； </li>
<li>-U&lt;套件档&gt;或–upgrade&lt;套件档&gt;：升级指定的套件档； </li>
<li>-v：显示指令执行过程； </li>
<li>-vv：详细显示指令执行过程，便于排错。</li>
</ul>
<h2 id="命令参数"><a href="#命令参数" class="headerlink" title="命令参数"></a>命令参数</h2><ul>
<li>软件包：指定要操纵的rpm软件包</li>
</ul>
<h2 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h2><h3 id="实例1：安装一个rpm"><a href="#实例1：安装一个rpm" class="headerlink" title="实例1：安装一个rpm"></a>实例1：安装一个rpm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># rpm -ivh /mnt/Packages/libjpeg-turbo-devel-1.2.1-1.el6.i686.rpm</span></div><div class="line">Preparing... <span class="comment">########################################### [100%]</span></div><div class="line">1:libjpeg-turbo-devel <span class="comment">########################################### [100%]</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;其中libhpeg-turbo-devel-1.2.1-1，el6.i686.rpm 是rpm包的文件名。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;另外在安装一个rpm常用的附带参数：</p>
<ul>
<li><strong>–force</strong>:强制安装，即使覆盖属于其他包的文件也要安装</li>
<li><strong>nodeps</strong>：当要安装的rpm包依赖其他包时，几十其他包没有安装，也要安装这个包</li>
</ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;也就是说 <code>rpm -i --force --nodeps</code> 可以忽略所有依赖关系和文件问题，什么包都能安装上，但这种强制安装的软件包不能保证完全发挥功能。</p>
<h3 id="实例2：升级一个rpm包"><a href="#实例2：升级一个rpm包" class="headerlink" title="实例2：升级一个rpm包"></a>实例2：升级一个rpm包</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -Uvh filename</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;“-U”即升级的意思</p>
<h3 id="实例3：卸载一个rpm包"><a href="#实例3：卸载一个rpm包" class="headerlink" title="实例3：卸载一个rpm包"></a>实例3：卸载一个rpm包</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -e filename</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># rpm -qa |grep libjpeg-turbo-devel</span></div><div class="line">libjpeg-turbo-devel-1.2.1-1.el6.i686</div><div class="line">[root@localhost ~]<span class="comment"># rpm -e libjpeg-turbo-devel</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这里的filename是通过rpm的查询功能所查询到的。卸载时后边跟的filename和安装时的是有区别的，安装时是把一个存在的文件作为参数，而卸载时只需要包名即可。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;有时会出现一些错误或者警告</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">... is needed by ...</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这说明这个软件被其他软件需要，不能随便卸载，可以用 <code>rpm -e --nodeps</code> 强制卸载</p>
<h3 id="实例4：如何安装-src-rpm软件包"><a href="#实例4：如何安装-src-rpm软件包" class="headerlink" title="实例4：如何安装.src.rpm软件包"></a>实例4：如何安装.src.rpm软件包</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;有些rpm包是以 .src.rpm结尾的，这类rpm包是包含了源代码的rpm包，在安装时需要进行编译。这类rpm包有两种方法安装：</p>
<h4 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">rpm -i your-package.src.rpm </div><div class="line"><span class="built_in">cd</span> /usr/src/redhat/SPECS </div><div class="line">rpmbuild -bp your-package.specs <span class="comment">#一个和软件包同名的specs文件 </span></div><div class="line"><span class="built_in">cd</span> /usr/src/redhat/BUILD/your-package/ <span class="comment">#一个和软件包同名的目录 </span></div><div class="line">./configure <span class="comment">#这一步和编译普通的源码软件一样，可以加上参数 </span></div><div class="line">make </div><div class="line">make install</div></pre></td></tr></table></figure>
<h4 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rpm -i you-package.src.rpm </div><div class="line"><span class="built_in">cd</span> /usr/src/redhat/SPECS</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;前两步和方法一相同</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpmbuild -bb your-package.specs   <span class="comment">#一个和软件包同名的specs文件</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这是在 <code>/usr/src/redhat/RPM/i386/</code>（根据提提包的不同，也可能是i686、noarch等等）在这个目录下，有一个新的rpm包，这个是编译好的二进制文件。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;执行 <code>rpm -i new-package.rpm</code>即可安装完成。</p>
<h3 id="实例5：不安装但是获取rpm包中的文件"><a href="#实例5：不安装但是获取rpm包中的文件" class="headerlink" title="实例5：不安装但是获取rpm包中的文件"></a>实例5：不安装但是获取rpm包中的文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;需要使用工具 <code>rpm2cpio</code>和<code>cpio</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rpm2cpio xxx.rpm | cpio -vi</div><div class="line">rpm2cpio xxx.rpm | cpio -idmv</div><div class="line">rpm2cpio xxx.rpm | cpio --extract --make-firectories</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;参数i和extract相同，表示提取文件。v表示显示执行进程，d和make-directory相同，表示根据包中文件原来的路径建立目录，m表示保持文件的更新时间。</p>
<h3 id="实例6：查看与rpm包相关的文件和其他信息"><a href="#实例6：查看与rpm包相关的文件和其他信息" class="headerlink" title="实例6：查看与rpm包相关的文件和其他信息"></a>实例6：查看与rpm包相关的文件和其他信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;假设使用rpm包<code>mysql-3.23.54a-11</code></p>
<h4 id="1-列出系统中所有安装过的rpm包"><a href="#1-列出系统中所有安装过的rpm包" class="headerlink" title="1. 列出系统中所有安装过的rpm包"></a>1. 列出系统中所有安装过的rpm包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -qa</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;查找所有安装过的包含某个字符串sql的rpm包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -qa | grep sql</div></pre></td></tr></table></figure>
<h4 id="2-获得某个rpm包的文件全名"><a href="#2-获得某个rpm包的文件全名" class="headerlink" title="2. 获得某个rpm包的文件全名"></a>2. 获得某个rpm包的文件全名</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -q mysql</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;可以获得系统中安装的mysql软件包全名，从中可以获得当前软件包的版本信息。此例可以得到信息 mysql-3.23.54a-11</p>
<h4 id="3-一个rpm包中的文件的安装路径"><a href="#3-一个rpm包中的文件的安装路径" class="headerlink" title="3. 一个rpm包中的文件的安装路径"></a>3. 一个rpm包中的文件的安装路径</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -ql 包名</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;注意：这里的是不包括 .rpm 后缀的rpm包的名称，也就是说这能使用mysql或者mysql-3.23.54a-11而不是mysql-3.23.54a-11.rpm。如果只是想知道可执行程序放到那里去了，也可以用which</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">which</span> mysql</div></pre></td></tr></table></figure>
<h4 id="4-一个rpm包中包含哪些文件。"><a href="#4-一个rpm包中包含哪些文件。" class="headerlink" title="4. 一个rpm包中包含哪些文件。"></a>4. 一个rpm包中包含哪些文件。</h4><ul>
<li>一个没有安装过的rpm包，使用 </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -qlp ***.rpm</div></pre></td></tr></table></figure>
<ul>
<li>一个已经安装过的rpm包，还可以使用 </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -ql ***.rpm</div></pre></td></tr></table></figure>
<h4 id="5-获取关于一个rpm包的版本，用途等相关信息"><a href="#5-获取关于一个rpm包的版本，用途等相关信息" class="headerlink" title="5. 获取关于一个rpm包的版本，用途等相关信息"></a>5. 获取关于一个rpm包的版本，用途等相关信息</h4><ul>
<li>一个没有安装过的rpm包，使用</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -qip ***.rpm</div></pre></td></tr></table></figure>
<ul>
<li>一个已经安装过的rpm包，还可以使用</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -qi ***.rpm</div></pre></td></tr></table></figure>
<h4 id="6-某个程序是哪个rpm包安装的，或者哪个rpm包包含这个程序"><a href="#6-某个程序是哪个rpm包安装的，或者哪个rpm包包含这个程序" class="headerlink" title="6. 某个程序是哪个rpm包安装的，或者哪个rpm包包含这个程序"></a>6. 某个程序是哪个rpm包安装的，或者哪个rpm包包含这个程序</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rpm -qf `<span class="built_in">which</span> 程序名` <span class="comment">#返回软件包的全名 </span></div><div class="line">rpm -qif `<span class="built_in">which</span> 程序名` <span class="comment">#返回软件包的有关信息 </span></div><div class="line">rpm -qlf `<span class="built_in">which</span> 程序名` <span class="comment">#返回软件包的文件列表</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;注意：这里不是引号，而是`(反引号)，就是键盘左上角那个键。也可以使用 <code>rpm -qilf</code>，同时输出rpm包信息和文件列表</p>
<h4 id="7-某个文件是哪个rpm包安装的，或者哪个rpm包包含这个文件。"><a href="#7-某个文件是哪个rpm包安装的，或者哪个rpm包包含这个文件。" class="headerlink" title="7. 某个文件是哪个rpm包安装的，或者哪个rpm包包含这个文件。"></a>7. 某个文件是哪个rpm包安装的，或者哪个rpm包包含这个文件。</h4><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;注意，前一个问题中的方法，只适用与可执行的程序，而下面的方法，不仅可以用于可执行程序，也可以用于普通的任何文件。前提是知道这个文件名。首先获得这个程序的完整路径，可以用whereis或者which，然后使用rpm -qf例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">whereis ftptop </div><div class="line">ftptop: /usr/bin/ftptop /usr/share/man/man1/ftptop.1.gz </div><div class="line">rpm -qf /usr/bin/ftptop proftpd-1.2.8-1 </div><div class="line">rpm -qf /usr/share/doc/proftpd-1.2.8/rfc/rfc0959.txt proftpd-1.2.8-1</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/76. Linux 命令- blkid" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/76. Linux 命令- blkid/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.246Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/76. Linux 命令- blkid/">
        Linux 命令- blkid
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在日常的运维工作中遇到过这样的情况，一台服务器上新装了两块磁盘，磁盘a（在服务器上显示为sdc）和磁盘b（在服务器上显示为sdd），有一次把这两块磁盘都拔掉了，然后再重新插上，重启机器，结果磁盘编号调换了，a变成了sdd，b变成了sdc（这是因为把磁盘插错了插槽），问题来了。通过上边的学习，你挂载磁盘是通过/dev/hdb1 这样的分区名字来挂载的，如果先前加入到了/etc/fstab 中，结果系统启动后则会挂载错分区。那么怎么样避免这样的情况发生？</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这就用到了UUID，可以通过 blkid 命令获取各分区的UUID:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/dev/sda1: UUID=<span class="string">"a593ff68-2db7-4371-8d8c-d936898e9ac9"</span> TYPE=<span class="string">"ext4"</span></div><div class="line">/dev/sda2: UUID=<span class="string">"ff042a91-b68f-4d64-9759-050c51dc9e8b"</span> TYPE=<span class="string">"swap"</span></div><div class="line">/dev/sda3: UUID=<span class="string">"95297b81-538d-4d96-870a-de90255b74f5"</span> TYPE=<span class="string">"ext4"</span></div><div class="line">/dev/sdb5: LABEL=<span class="string">"TEST"</span> UUID=<span class="string">"c61117ca-9176-4d0b-be4d-1b0f434359a7"</span> TYPE=<span class="string">"ext4"</span></div><div class="line">/dev/sdb6: UUID=<span class="string">"c271cb5a-cb46-42f4-9eb4-d2b1a5028e18"</span> SEC_TYPE=<span class="string">"ext2"</span> TYPE=<span class="string">"ext3"</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这样可以获得全部磁盘分区的UUID，如果格式化的时候指定了 LABEL 则该命令也会显示LABEL值，甚至连文件系统类型也会显示。当然这个命令后面也可以指定哪个分区：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># blkid /dev/sdb5</span></div><div class="line">/dev/sdb5: LABEL=<span class="string">"TEST"</span> UUID=<span class="string">"c61117ca-9176-4d0b-be4d-1b0f434359a7"</span> TYPE=<span class="string">"ext4"</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;获得UUID后，如何使用它呢？</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># umount /newdir</span></div><div class="line">[root@localhost ~]<span class="comment"># mount UUID="c61117ca-9176-4d0b-be4d-1b0f434359a7" /newdir</span></div><div class="line">[root@localhost ~]<span class="comment"># df -h</span></div><div class="line">文件系统              容量  已用  可用 已用%% 挂载点</div><div class="line">/dev/sda3              14G  1.5G   12G  11% /</div><div class="line">tmpfs                 160M     0  160M   0% /dev/shm</div><div class="line">/dev/sda1              97M   27M   66M  29% /boot</div><div class="line">/dev/sdb5             989M   18M  921M   2% /newdir</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;也可以把下面这行写到 /etc/fstab 中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">UUID=c61117ca-9176-4d0b-be4d-1b0f434359a7              /newdir                 ext4    defaults        0 0</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果想让某个分区开机后就自动挂载，有两个办法可以实现：</p>
<ol>
<li>在 /etc/fstab 中添加一行，如上例中那行；</li>
<li>把挂载命令写到 /etc/rc.d/rc.local 文件中去，阿铭会经常把想要开机启动的命令加到这个文件中。系统启动完后会执行这个文件中的命令，所以只要你想开机后运行什么命令统统写入到这个文件下面吧，直接放到最后面即可，阿铭把挂载的命令放到该文件的最后一行了：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cat /etc/rc.d/rc.local</span></div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># This script will be executed *after* all the other init scripts.</span></div><div class="line"><span class="comment"># You can put your own initialization stuff in here if you don't</span></div><div class="line"><span class="comment"># want to do the full Sys V style init stuff.</span></div><div class="line"></div><div class="line">touch /var/lock/subsys/<span class="built_in">local</span></div><div class="line">mount UUID=<span class="string">"c61117ca-9176-4d0b-be4d-1b0f434359a7"</span> /newdir</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;以上两种方法，任选其一，介绍第二种方法其实也是一个小知识，如何让一些操作行为随系统启动而自动执行。另外一个小建议，那就是挂载磁盘分区的时候，尽量使用UUID或者LABEL这两种方法。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/60. Linux 命令- telnet" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/60. Linux 命令- telnet/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.246Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/60. Linux 命令- telnet/">
        Linux 命令- telnet
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;telnet命令通常用来远程登录。telnet程序是基于TELNET协议的远程登录客户端程序。Telnet协议是TCP/IP协议族中的一员，是Internet远程登陆服务的标准协议和主要方式。它为用户提供了在本地计算机上完成远程主机工作的 能力。在终端使用者的电脑上使用telnet程序，用它连接到服务器。终端使用者可以在telnet程序中输入命令，这些命令会在服务器上运行，就像直接在服务器的控制台上输入一样。可以在本地就能控制服务器。要开始一个 telnet会话，必须输入用户名和密码来登录服务器。Telnet是常用的远程控制Web服务器的方法。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;但是，telnet因为采用明文传送报文，安全性不好，很多Linux服务器都不开放telnet服务，而改用更安全的ssh方式了。但仍然有很多别的系统可能采用了telnet方式来提供远程登录，因此弄清楚telnet客户端的使用方式仍是很有必要的。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;telnet命令还可做别的用途，比如确定远程服务的状态，比如确定远程服务器的某个端口是否能访问。</p>
<h2 id="1．命令格式"><a href="#1．命令格式" class="headerlink" title="1．命令格式"></a>1．命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">telnet [参数] [主机]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能"><a href="#2．命令功能" class="headerlink" title="2．命令功能"></a>2．命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;执行telnet指令开启终端机阶段作业，并登入远端主机。</p>
<h2 id="3．命令参数"><a href="#3．命令参数" class="headerlink" title="3．命令参数"></a>3．命令参数</h2><ul>
<li>-8 允许使用8位字符资料，包括输入与输出。</li>
<li>-a 尝试自动登入远端系统。</li>
<li>-b&lt;主机别名&gt; 使用别名指定远端主机名称。</li>
<li>-c 不读取用户专属目录里的.telnetrc文件。</li>
<li>-d 启动排错模式。</li>
<li>-e&lt;脱离字符&gt; 设置脱离字符。</li>
<li>-E 滤除脱离字符。</li>
<li>-f 此参数的效果和指定”-F”参数相同。</li>
<li>-F 使用Kerberos V5认证时，加上此参数可把本地主机的认证数据上传到远端主机。</li>
<li>-k&lt;域名&gt; 使用Kerberos认证时，加上此参数让远端主机采用指定的领域名，而非该主机的域名。</li>
<li>-K 不自动登入远端主机。</li>
<li>-l&lt;用户名称&gt; 指定要登入远端主机的用户名称。</li>
<li>-L 允许输出8位字符资料。</li>
<li>-n&lt;记录文件&gt; 指定文件记录相关信息。</li>
<li>-r 使用类似rlogin指令的用户界面。</li>
<li>-S&lt;服务类型&gt; 设置telnet连线所需的IP TOS信息。</li>
<li>-x 假设主机有支持数据加密的功能，就使用它。</li>
<li>-X&lt;认证形态&gt; 关闭指定的认证形态。</li>
</ul>
<h2 id="4．使用实例"><a href="#4．使用实例" class="headerlink" title="4．使用实例"></a>4．使用实例</h2><h3 id="实例1：远程服务器无法访问"><a href="#实例1：远程服务器无法访问" class="headerlink" title="实例1：远程服务器无法访问"></a>实例1：远程服务器无法访问</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">telnet 192.168.120.206</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># telnet 192.168.120.209</span></div><div class="line">Trying 192.168.120.209...</div><div class="line">telnet: connect to address 192.168.120.209: No route to host</div><div class="line">telnet: Unable to connect to remote host: No route to host</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;处理这种情况方法：</p>
<ol>
<li>确认ip地址是否正确？</li>
<li>确认ip地址对应的主机是否已经开机？</li>
<li>如果主机已经启动，确认路由设置是否设置正确？（使用route命令查看）</li>
<li>如果主机已经启动，确认主机上是否开启了telnet服务？（使用netstat命令查看，TCP的23端口是否有LISTEN状态的行）</li>
<li>如果主机已经启动telnet服务，确认防火墙是否放开了23端口的访问？（使用iptables-save查看）</li>
</ol>
<h2 id="实例2：域名无法解析"><a href="#实例2：域名无法解析" class="headerlink" title="实例2：域名无法解析"></a>实例2：域名无法解析</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">telnet www.baidu.com</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># telnet www.baidu.com</span></div><div class="line">www.baidu.com/telnet: Temporary failure <span class="keyword">in</span> name resolution</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;处理这种情况方法：</p>
<ol>
<li>确认域名是否正确</li>
<li>确认本机的域名解析有关的设置是否正确（/etc/resolv.conf中nameserver的设置是否正确，如果没有，可以使用nameserver 8.8.8.8）</li>
<li>确认防火墙是否放开了UDP53端口的访问（DNS使用UDP协议，端口53，使用iptables-save查看）</li>
</ol>
<h3 id="实例3：拒绝访问"><a href="#实例3：拒绝访问" class="headerlink" title="实例3：拒绝访问"></a>实例3：拒绝访问</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># telnet 192.168.120.206</span></div><div class="line">Trying 192.168.120.206...</div><div class="line">telnet: connect to address 192.168.120.206: Connection refused</div><div class="line">telnet: Unable to connect to remote host: Connection refused</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;处理这种情况：</p>
<ol>
<li>确认ip地址或者主机名是否正确？</li>
<li>确认端口是否正确，是否默认的23端口</li>
</ol>
<h3 id="实例4：启动telnet服务"><a href="#实例4：启动telnet服务" class="headerlink" title="实例4：启动telnet服务"></a>实例4：启动telnet服务</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service xinetd restart</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cd /etc/xinetd.d/</span></div><div class="line">[root@localhost xinetd.d]<span class="comment"># ll</span></div><div class="line">总计 124</div><div class="line">-rw-r--r-- 1 root root 1157 2011-05-31 chargen-dgram</div><div class="line">-rw-r--r-- 1 root root 1159 2011-05-31 chargen-stream</div><div class="line">-rw-r--r-- 1 root root  523 2009-09-04 cvs</div><div class="line">-rw-r--r-- 1 root root 1157 2011-05-31 daytime-dgram</div><div class="line">-rw-r--r-- 1 root root 1159 2011-05-31 daytime-stream</div><div class="line">-rw-r--r-- 1 root root 1157 2011-05-31 discard-dgram</div><div class="line">-rw-r--r-- 1 root root 1159 2011-05-31 discard-stream</div><div class="line">-rw-r--r-- 1 root root 1148 2011-05-31 <span class="built_in">echo</span>-dgram</div><div class="line">-rw-r--r-- 1 root root 1150 2011-05-31 <span class="built_in">echo</span>-stream</div><div class="line">-rw-r--r-- 1 root root  323 2004-09-09 eklogin</div><div class="line">-rw-r--r-- 1 root root  347 2005-09-06 ekrb5-telnet</div><div class="line">-rw-r--r-- 1 root root  326 2004-09-09 gssftp</div><div class="line">-rw-r--r-- 1 root root  310 2004-09-09 klogin</div><div class="line">-rw-r--r-- 1 root root  323 2004-09-09 krb5-telnet</div><div class="line">-rw-r--r-- 1 root root  308 2004-09-09 kshell</div><div class="line">-rw-r--r-- 1 root root  317 2004-09-09 rsync</div><div class="line">-rw-r--r-- 1 root root 1212 2011-05-31 tcpmux-server</div><div class="line">-rw-r--r-- 1 root root 1149 2011-05-31 time-dgram</div><div class="line">-rw-r--r-- 1 root root 1150 2011-05-31 time-stream</div><div class="line">[root@localhost xinetd.d]<span class="comment"># cat krb5-telnet </span></div><div class="line"><span class="comment"># default: off</span></div><div class="line"><span class="comment"># description: The kerberized telnet server accepts normal telnet sessions, \</span></div><div class="line"><span class="comment">#              but can also use Kerberos 5 authentication.</span></div><div class="line">service telnet</div><div class="line">&#123;</div><div class="line">        flags           = REUSE</div><div class="line">        socket_type     = stream        </div><div class="line">        <span class="built_in">wait</span>            = no</div><div class="line">        user            = root</div><div class="line">        server          = /usr/kerberos/sbin/telnetd</div><div class="line">        log_on_failure  += USERID</div><div class="line">        <span class="built_in">disable</span>         = yes</div><div class="line">&#125;</div><div class="line">[root@localhost xinetd.d]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>配置参数，通常的配置如下：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">service telnet </div><div class="line">&#123; </div><div class="line"><span class="built_in">disable</span> = no <span class="comment">#启用 </span></div><div class="line">flags = REUSE <span class="comment">#socket可重用 </span></div><div class="line">socket_type = stream <span class="comment">#连接方式为TCP </span></div><div class="line"><span class="built_in">wait</span> = no <span class="comment">#为每个请求启动一个进程 </span></div><div class="line">user = root <span class="comment">#启动服务的用户为root </span></div><div class="line">server = /usr/sbin/in.telnetd <span class="comment">#要激活的进程 </span></div><div class="line">log_on_failure += USERID <span class="comment">#登录失败时记录登录用户名 </span></div><div class="line">&#125; </div><div class="line">如果要配置允许登录的客户端列表，加入 </div><div class="line">only_from = 192.168.0.2 <span class="comment">#只允许192.168.0.2登录 </span></div><div class="line">如果要配置禁止登录的客户端列表，加入 </div><div class="line">no_access = 192.168.0.&#123;2,3,4&#125; <span class="comment">#禁止192.168.0.2、192.168.0.3、192.168.0.4登录 </span></div><div class="line">如果要设置开放时段，加入 </div><div class="line">access_times = 9:00-12:00 13:00-17:00 <span class="comment"># 每天只有这两个时段开放服务（我们的上班时间：P） </span></div><div class="line">如果你有两个IP地址，一个是私网的IP地址如192.168.0.2，一个是公网的IP地址如218.75.74.83，如果你希望用户只能从私网来登录telnet服务，那么加入 </div><div class="line"><span class="built_in">bind</span> = 192.168.0.2 </div><div class="line">各配置项具体的含义和语法可参考xined配置文件属性说明（man xinetd.conf） </div><div class="line">配置端口，修改services文件：</div><div class="line"><span class="comment"># vi /etc/services </span></div><div class="line">找到以下两句 </div><div class="line">telnet 23/tcp </div><div class="line">telnet 23/udp </div><div class="line">如果前面有<span class="comment">#字符，就去掉它。telnet的默认端口是23，这个端口也是黑客端口扫描的主要对象，因此最好将这个端口修改掉，修改的方法很简单，就是将23这个数字修改掉，改成大一点的数字，比如61123。注意，1024以下的端口号是internet保留的端口号，因此最好不要用，还应该注意不要与其它服务的端口冲突。 </span></div><div class="line">启动服务：</div><div class="line">service xinetd restart</div></pre></td></tr></table></figure>
<h3 id="实例5：正常telnet"><a href="#实例5：正常telnet" class="headerlink" title="实例5：正常telnet"></a>实例5：正常telnet</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">telnet 192.168.120.204</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@andy ~]<span class="comment"># telnet 192.168.120.204</span></div><div class="line">Trying 192.168.120.204...</div><div class="line">Connected to 192.168.120.204 (192.168.120.204).</div><div class="line">Escape character is <span class="string">'^]'</span>.</div><div class="line"></div><div class="line">    localhost (Linux release 2.6.18-274.18.1.el5 <span class="comment">#1 SMP Thu Feb 9 12:45:44 EST 2012) (1)</span></div><div class="line"></div><div class="line">login: root</div><div class="line">Password: </div><div class="line">Login incorrect</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;一般情况下不允许root从远程登录，可以先用普通账号登录，然后再用su -切到root用户。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/47. Linux 命令- free" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/47. Linux 命令- free/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.245Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/47. Linux 命令- free/">
        Linux 命令- free
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;free命令可以显示Linux系统中空闲的、已用的物理内存及swap内存,及被内核使用的buffer。在Linux系统监控的工具中，free命令是最经常使用的命令之一。</p>
<h2 id="1．命令格式"><a href="#1．命令格式" class="headerlink" title="1．命令格式"></a>1．命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">free [参数]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能"><a href="#2．命令功能" class="headerlink" title="2．命令功能"></a>2．命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;free 命令显示系统使用和空闲的内存情况，包括物理内存、交互区内存(swap)和内核缓冲区内存。共享内存将被忽略</p>
<h2 id="3．命令参数"><a href="#3．命令参数" class="headerlink" title="3．命令参数"></a>3．命令参数</h2><ul>
<li>-b 　以Byte为单位显示内存使用情况。 </li>
<li>-k 　以KB为单位显示内存使用情况。 </li>
<li>-m 　以MB为单位显示内存使用情况。</li>
<li>-g   以GB为单位显示内存使用情况。 </li>
<li>-o 　不显示缓冲区调节列。 </li>
<li>-s&lt;间隔秒数&gt; 　持续观察内存使用状况。 </li>
<li>-t 　显示内存总和列。 </li>
<li>-V 　显示版本信息。 </li>
</ul>
<h2 id="4．使用实例"><a href="#4．使用实例" class="headerlink" title="4．使用实例"></a>4．使用实例</h2><h3 id="实例1：显示内存使用情况"><a href="#实例1：显示内存使用情况" class="headerlink" title="实例1：显示内存使用情况"></a>实例1：显示内存使用情况</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">free</div><div class="line">free -g</div><div class="line">free -m</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[root@SF1150 service]<span class="comment"># free</span></div><div class="line">             total       used       free     shared    buffers     cached</div><div class="line">Mem:      32940112   30841684    2098428          0    4545340   11363424</div><div class="line">-/+ buffers/cache:   14932920   18007192</div><div class="line">Swap:     32764556    1944984   30819572</div><div class="line">[root@SF1150 service]<span class="comment"># free -g</span></div><div class="line">             total       used       free     shared    buffers     cached</div><div class="line">Mem:            31         29          2          0          4         10</div><div class="line">-/+ buffers/cache:         14         17</div><div class="line">Swap:           31          1         29</div><div class="line">[root@SF1150 service]<span class="comment"># free -m</span></div><div class="line">             total       used       free     shared    buffers     cached</div><div class="line">Mem:         32168      30119       2048          0       4438      11097</div><div class="line">-/+ buffers/cache:      14583      17584</div><div class="line">Swap:        31996       1899      30097</div></pre></td></tr></table></figure>
<h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><h5 id="下面是对这些数值的解释："><a href="#下面是对这些数值的解释：" class="headerlink" title="下面是对这些数值的解释："></a>下面是对这些数值的解释：</h5><ul>
<li>total:总计物理内存的大小。</li>
<li>used:已使用多大。</li>
<li>free:可用有多少。</li>
<li>Shared:多个进程共享的内存总额。</li>
<li>Buffers/cached:磁盘缓存的大小。</li>
<li>第三行(-/+ buffers/cached):</li>
<li>used:已使用多大。</li>
<li>free:可用有多少。</li>
<li>第四行是交换分区SWAP的，也就是我们通常所说的虚拟内存。</li>
<li>区别：第二行(mem)的used/free与第三行(-/+ buffers/cache) used/free的区别。 这两个的区别在于使用的角度来看，第一行是从OS的角度来看，因为对于OS，buffers/cached 都是属于被使用，所以他的可用内存是2098428KB,已用内存是30841684KB,其中包括，内核（OS）使用+Application(X, oracle,etc)使用的+buffers+cached.</li>
<li>第三行所指的是从应用程序角度来看，对于应用程序来说，buffers/cached 是等于可用的，因为buffer/cached是为了提高文件读取的性能，当应用程序需在用到内存的时候，buffer/cached会很快地被回收。</li>
</ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;所以从应用程序的角度来说，可用内存=系统free memory+buffers+cached。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如本机情况的可用内存为：</p>
<p>18007156=2098428KB+4545340KB+11363424KB</p>
<h5 id="接下来解释什么时候内存会被交换，以及按什么方交换。"><a href="#接下来解释什么时候内存会被交换，以及按什么方交换。" class="headerlink" title="接下来解释什么时候内存会被交换，以及按什么方交换。"></a>接下来解释什么时候内存会被交换，以及按什么方交换。</h5><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;当可用内存少于额定值的时候，就会开会进行交换.如何看额定值：</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat /proc/meminfo</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">[root@SF1150 service]<span class="comment"># cat /proc/meminfo</span></div><div class="line">MemTotal:     32940112 kB</div><div class="line">MemFree:       2096700 kB</div><div class="line">Buffers:       4545340 kB</div><div class="line">Cached:       11364056 kB</div><div class="line">SwapCached:    1896080 kB</div><div class="line">Active:       22739776 kB</div><div class="line">Inactive:      7427836 kB</div><div class="line">HighTotal:           0 kB</div><div class="line">HighFree:            0 kB</div><div class="line">LowTotal:     32940112 kB</div><div class="line">LowFree:       2096700 kB</div><div class="line">SwapTotal:    32764556 kB</div><div class="line">SwapFree:     30819572 kB</div><div class="line">Dirty:             164 kB</div><div class="line">Writeback:           0 kB</div><div class="line">AnonPages:    14153592 kB</div><div class="line">Mapped:          20748 kB</div><div class="line">Slab:           590232 kB</div><div class="line">PageTables:      34200 kB</div><div class="line">NFS_Unstable:        0 kB</div><div class="line">Bounce:              0 kB</div><div class="line">CommitLimit:  49234612 kB</div><div class="line">Committed_AS: 23247544 kB</div><div class="line">VmallocTotal: 34359738367 kB</div><div class="line">VmallocUsed:    278840 kB</div><div class="line">VmallocChunk: 34359459371 kB</div><div class="line">HugePages_Total:     0HugePages_Free:      0HugePages_Rsvd:      0Hugepagesize:     2048 kB</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;交换将通过三个途径来减少系统中使用的物理页面的个数：　 </p>
<ol>
<li>减少缓冲与页面cache的大小， </li>
<li>将系统V类型的内存页面交换出去，　 </li>
<li>换出或者丢弃页面。(Application 占用的内存页，也就是物理内存不足）。 </li>
</ol>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;事实上，少量地使用swap是不是影响到系统性能的。</p>
<h5 id="那buffers和cached都是缓存，两者有什么区别呢？"><a href="#那buffers和cached都是缓存，两者有什么区别呢？" class="headerlink" title="那buffers和cached都是缓存，两者有什么区别呢？"></a>那buffers和cached都是缓存，两者有什么区别呢？</h5><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;为了提高磁盘存取效率, Linux做了一些精心的设计, 除了对dentry进行缓存(用于VFS,加速文件路径名到inode的转换), 还采取了两种主要Cache方式：Buffer Cache和Page Cache。前者针对磁盘块的读写，后者针对文件inode的读写。这些Cache有效缩短了 I/O系统调用(比如read,write,getdents)的时间。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;磁盘的操作有逻辑级（文件系统）和物理级（磁盘块），这两种Cache就是分别缓存逻辑和物理级数据的。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Page cache实际上是针对文件系统的，是文件的缓存，在文件层面上的数据会缓存到page cache。文件的逻辑层需要映射到实际的物理磁盘，这种映射关系由文件系统来完成。当page cache的数据需要刷新时，page cache中的数据交给buffer cache，因为Buffer Cache就是缓存磁盘块的。但是这种处理在2.6版本的内核之后就变的很简单了，没有真正意义上的cache操作。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Buffer cache是针对磁盘块的缓存，也就是在没有文件系统的情况下，直接对磁盘进行操作的数据会缓存到buffer cache中，例如，文件系统的元数据都会缓存到buffer cache中。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;简单说来，page cache用来缓存文件数据，buffer cache用来缓存磁盘数据。在有文件系统的情况下，对文件操作，那么数据会缓存到page cache，如果直接采用dd等工具对磁盘进行读写，那么数据会缓存到buffer cache。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;所以我们看linux,只要不用swap的交换空间,就不用担心自己的内存太少.如果常常swap用很多,可能你就要考虑加物理内存了.这也是linux看内存是否够用的标准.</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果是应用服务器的话，一般只看第二行，+buffers/cache,即对应用程序来说free的内存太少了，也是该考虑优化程序或加内存了。</p>
<h3 id="实例2：以总和的形式显示内存的使用信息"><a href="#实例2：以总和的形式显示内存的使用信息" class="headerlink" title="实例2：以总和的形式显示内存的使用信息"></a>实例2：以总和的形式显示内存的使用信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">free -t</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@SF1150 service]<span class="comment">#  free -t </span></div><div class="line">             total       used       free     shared    buffers     cached</div><div class="line">Mem:      32940112   30845024    2095088          0    4545340   11364324</div><div class="line">-/+ buffers/cache:   14935360   18004752Swap:     32764556    1944984   30819572Total:    65704668   32790008   32914660[root@SF1150 service]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例3：周期性的查询内存使用信息"><a href="#实例3：周期性的查询内存使用信息" class="headerlink" title="实例3：周期性的查询内存使用信息"></a>实例3：周期性的查询内存使用信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">free -s 10</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@SF1150 service]<span class="comment">#  free -s 10</span></div><div class="line">             total       used       free     shared    buffers     cached</div><div class="line">Mem:      32940112   30844528    2095584          0    4545340   11364380</div><div class="line">-/+ buffers/cache:   14934808   18005304Swap:     32764556    1944984   30819572</div><div class="line">             total       used       free     shared    buffers     cached</div><div class="line">Mem:      32940112   30843932    2096180          0    4545340   11364388</div><div class="line">-/+ buffers/cache:   14934204   18005908Swap:     32764556    1944984   30819572</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;每10s 执行一次命令</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/33. Linux 命令-bz2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/33. Linux 命令-bz2/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.244Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/33. Linux 命令-bz2/">
        Linux 命令- bz2
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;bzip2 命令与 gzip 类似。bzip2 同样也不能压缩目录。</p>
<h2 id="1-命令格式"><a href="#1-命令格式" class="headerlink" title="1.命令格式"></a>1.命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bzip2 [参数] [文件]</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2.命令功能"></a>2.命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;bzip2采用新的压缩演算法，压缩效果比传统的LZ77/LZ78压缩演算法来得好。若没有加上任何参数，bzip2压缩完文件后会产生.bz2的压缩文件，并删除原始的文件。</p>
<h2 id="3-命令参数"><a href="#3-命令参数" class="headerlink" title="3.命令参数"></a>3.命令参数</h2><ul>
<li>-c或–stdout 　将压缩与解压缩的结果送到标准输出。</li>
<li>-d或–decompress 　执行解压缩。</li>
<li>-f或–force 　bzip2在压缩或解压缩时，若输出文件与现有文件同名，预设不会覆盖现有文件。若要覆盖，请使用此参数。 </li>
<li>-h或–help 　显示帮助。 </li>
<li>-k或–keep 　bzip2在压缩或解压缩后，会删除原始的文件。若要保留原始文件，请使用此参数。 </li>
<li>-s或–small 　降低程序执行时内存的使用量。</li>
<li>-t或–test 测试.bz2压缩文件的完整性。</li>
<li>-v或–verbose 　压缩或解压缩文件时，显示详细的信息。 </li>
<li>-z或–compress 　强制执行压缩。</li>
<li>-L,–license,</li>
<li>-V或–version 　显示版本信息。 </li>
<li>–repetitive-best 　若文件中有重复出现的资料时，可利用此参数提高压缩效果。 </li>
<li>–repetitive-fast 　若文件中有重复出现的资料时，可利用此参数加快执行速度。 </li>
<li>-压缩等级 　压缩时的区块大小。</li>
</ul>
<h2 id="4-使用实例"><a href="#4-使用实例" class="headerlink" title="4.使用实例"></a>4.使用实例</h2><h3 id="实例1：使用-bzip2-压缩一个文件"><a href="#实例1：使用-bzip2-压缩一个文件" class="headerlink" title="实例1：使用 bzip2 压缩一个文件"></a>实例1：使用 bzip2 压缩一个文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bzip test.txt.bz2</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cd test</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># bzip2 test.txt</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls</span></div><div class="line">test.txt.bz2</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># bzip2 -d test.txt.bz2</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># bzip2 -z test.txt</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls</span></div><div class="line">test.txt.bz2</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;压缩时，可以加 -z 参数，也可以不家加，都可以压缩文件，-d 则为解压的选项。</p>
<h3 id="实例2：bzip2-解压一个文件"><a href="#实例2：bzip2-解压一个文件" class="headerlink" title="实例2：bzip2 解压一个文件"></a>实例2：bzip2 解压一个文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># bzip2 -d test.txt.bz2</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># bzip2 test.tar</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># bzip2 -vd test.tar.bz2</span></div><div class="line">test.tar.bz2: <span class="keyword">done</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls</span></div><div class="line"><span class="built_in">test</span> test.tar test.txt</div></pre></td></tr></table></figure>
<h3 id="实例3：通过-bzcat-命令可以直接读压缩文件信息"><a href="#实例3：通过-bzcat-命令可以直接读压缩文件信息" class="headerlink" title="实例3：通过 bzcat 命令可以直接读压缩文件信息"></a>实例3：通过 bzcat 命令可以直接读压缩文件信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bzcat test.txt.bz2</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls</span></div><div class="line"><span class="built_in">test</span> test.tar.bz2 test.txt.bz2</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># bzcat test.txt.bz2</span></div><div class="line"><span class="built_in">test</span></div><div class="line">test2</div><div class="line">test12</div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/57. Linux 命令- traceroute" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/57. Linux 命令- traceroute/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.243Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/57. Linux 命令- traceroute/">
        Linux 命令- traceroute
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;通过traceroute我们可以知道信息从你的计算机到互联网另一端的主机是走的什么路径。当然每次数据包由某一同样的出发点（source）到达某一同样的目的地(destination)走的路径可能会不一样，但基本上来说大部分时候所走的路由是相同的。linux系统中，我们称之为traceroute,在MS Windows中为tracert。 traceroute通过发送小的数据包到目的设备直到其返回，来测量其需要多长时间。一条路径上的每个设备traceroute要测3次。输出结果中包括每次测试的时间(ms)和设备的名称（如有的话）及其IP地址。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在大多数情况下，我们会在linux主机系统下，直接执行命令行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">traceroute hostname</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;而在Windows系统下是执行tracert的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tracert hostname</div></pre></td></tr></table></figure>
<h2 id="1-命令格式"><a href="#1-命令格式" class="headerlink" title="1.命令格式"></a>1.命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">traceroute [参数] [主机]</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2.命令功能"></a>2.命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traceroute指令让你追踪网络数据包的路由途径，预设数据包大小是40Bytes，用户可另行设置。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;具体参数格式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">traceroute [-dFlnrvx][-f&lt;存活数值&gt;][-g&lt;网关&gt;...][-i&lt;网络界面&gt;][-m&lt;存活数值&gt;][-p&lt;通信端口&gt;][-s&lt;来源地址&gt;][-t&lt;服务类型&gt;][-w&lt;超时秒数&gt;][主机名称或IP地址][数据包大小]</div></pre></td></tr></table></figure>
<h2 id="3-命令参数"><a href="#3-命令参数" class="headerlink" title="3.命令参数"></a>3.命令参数</h2><ul>
<li>-d 使用Socket层级的排错功能。</li>
<li>-f 设置第一个检测数据包的存活数值TTL的大小。</li>
<li>-F 设置勿离断位。</li>
<li>-g 设置来源路由网关，最多可设置8个。</li>
<li>-i 使用指定的网络界面送出数据包。</li>
<li>-I 使用ICMP回应取代UDP资料信息。</li>
<li>-m 设置检测数据包的最大存活数值TTL的大小。</li>
<li>-n 直接使用IP地址而非主机名称。</li>
<li>-p 设置UDP传输协议的通信端口。</li>
<li>-r 忽略普通的Routing Table，直接将数据包送到远端主机上。</li>
<li>-s 设置本地主机送出数据包的IP地址。</li>
<li>-t 设置检测数据包的TOS数值。</li>
<li>-v 详细显示指令的执行过程。</li>
<li>-w 设置等待远端主机回报的时间。</li>
<li>-x 开启或关闭数据包的正确性检验。</li>
</ul>
<h2 id="4-使用实例"><a href="#4-使用实例" class="headerlink" title="4.使用实例"></a>4.使用实例</h2><h3 id="实例1：traceroute-用法简单、最常用的用法"><a href="#实例1：traceroute-用法简单、最常用的用法" class="headerlink" title="实例1：traceroute 用法简单、最常用的用法"></a>实例1：traceroute 用法简单、最常用的用法</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">traceroute www.baidu.com</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# traceroute www.baidu.com</div><div class="line">traceroute to www.baidu.com (61.135.169.125), 30 hops max, 40 byte packets</div><div class="line"> 1  192.168.74.2 (192.168.74.2)  2.606 ms  2.771 ms  2.950 ms</div><div class="line"> 2  211.151.56.57 (211.151.56.57)  0.596 ms  0.598 ms  0.591 ms</div><div class="line"> 3  211.151.227.206 (211.151.227.206)  0.546 ms  0.544 ms  0.538 ms</div><div class="line"> 4  210.77.139.145 (210.77.139.145)  0.710 ms  0.748 ms  0.801 ms</div><div class="line"> 5  202.106.42.101 (202.106.42.101)  6.759 ms  6.945 ms  7.107 ms</div><div class="line"> 6  61.148.154.97 (61.148.154.97)  718.908 ms * bt-228-025.bta.net.cn (202.106.228.25)  5.177 ms</div><div class="line"> 7  124.65.58.213 (124.65.58.213)  4.343 ms  4.336 ms  4.367 ms</div><div class="line"> 8  202.106.35.190 (202.106.35.190)  1.795 ms 61.148.156.138 (61.148.156.138)  1.899 ms  1.951 ms</div><div class="line"> 9  * * *</div><div class="line">30  * * *</div><div class="line">[root@localhost ~]#</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;记录按序列号从1开始，每个纪录就是一跳 ，每跳表示一个网关，我们看到每行有三个时间，单位是 ms，其实就是-q的默认参数。探测数据包向每个网关发送三个数据包后，网关响应后返回的时间；如果您用 traceroute -q 4 www.58.com ，表示向每个网关发送4个数据包。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;有时我们traceroute 一台主机时，会看到有一些行是以星号表示的。出现这样的情况，可能是防火墙封掉了ICMP的返回信息，所以我们得不到什么相关的数据包返回数据。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;有时我们在某一网关处延时比较长，有可能是某台网关比较阻塞，也可能是物理设备本身的原因。当然如果某台DNS出现问题时，不能解析主机名、域名时，也会 有延时长的现象；您可以加-n 参数来避免DNS解析，以IP格式输出数据。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果在局域网中的不同网段之间，我们可以通过traceroute 来排查问题所在，是主机的问题还是网关的问题。如果我们通过远程来访问某台服务器遇到问题时，我们用到traceroute 追踪数据包所经过的网关，提交IDC服务商，也有助于解决问题；但目前看来在国内解决这样的问题是比较困难的，就是我们发现问题所在，IDC服务商也不可能帮助我们解决。</p>
<h3 id="实例2：跳数设置"><a href="#实例2：跳数设置" class="headerlink" title="实例2：跳数设置"></a>实例2：跳数设置</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">traceroute -m 10 www.baidu.com</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># traceroute -m 10 www.baidu.com</span></div><div class="line">traceroute to www.baidu.com (61.135.169.105), 10 hops max, 40 byte packets</div><div class="line"> 1  192.168.74.2 (192.168.74.2)  1.534 ms  1.775 ms  1.961 ms</div><div class="line"> 2  211.151.56.1 (211.151.56.1)  0.508 ms  0.514 ms  0.507 ms</div><div class="line"> 3  211.151.227.206 (211.151.227.206)  0.571 ms  0.558 ms  0.550 ms</div><div class="line"> 4  210.77.139.145 (210.77.139.145)  0.708 ms  0.729 ms  0.785 ms</div><div class="line"> 5  202.106.42.101 (202.106.42.101)  7.978 ms  8.155 ms  8.311 ms</div><div class="line"> 6  bt-228-037.bta.net.cn (202.106.228.37)  772.460 ms bt-228-025.bta.net.cn (202.106.228.25)  2.152 ms 61.148.154.97 (61.148.154.97)  772.107 ms</div><div class="line"> 7  124.65.58.221 (124.65.58.221)  4.875 ms 61.148.146.29 (61.148.146.29)  2.124 ms 124.65.58.221 (124.65.58.221)  4.854 ms</div><div class="line"> 8  123.126.6.198 (123.126.6.198)  2.944 ms 61.148.156.6 (61.148.156.6)  3.505 ms 123.126.6.198 (123.126.6.198)  2.885 ms</div><div class="line"> 9  * * *</div><div class="line">10  * * *</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例3：显示IP地址，不查主机名"><a href="#实例3：显示IP地址，不查主机名" class="headerlink" title="实例3：显示IP地址，不查主机名"></a>实例3：显示IP地址，不查主机名</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">traceroute -n www.baidu.com</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># traceroute -n www.baidu.com</span></div><div class="line">traceroute to www.baidu.com (61.135.169.125), 30 hops max, 40 byte packets</div><div class="line"> 1  211.151.74.2  5.430 ms  5.636 ms  5.802 ms</div><div class="line"> 2  211.151.56.57  0.627 ms  0.625 ms  0.617 ms</div><div class="line"> 3  211.151.227.206  0.575 ms  0.584 ms  0.576 ms</div><div class="line"> 4  210.77.139.145  0.703 ms  0.754 ms  0.806 ms</div><div class="line"> 5  202.106.42.101  23.683 ms  23.869 ms  23.998 ms</div><div class="line"> 6  202.106.228.37  247.101 ms * *</div><div class="line"> 7  61.148.146.29  5.256 ms 124.65.58.213  4.386 ms  4.373 ms</div><div class="line"> 8  202.106.35.190  1.610 ms 61.148.156.138  1.786 ms 61.148.3.34  2.089 ms</div><div class="line"> 9  * * *</div><div class="line">30  * * *</div><div class="line">[root@localhost ~]<span class="comment"># traceroute www.baidu.com</span></div><div class="line">traceroute to www.baidu.com (61.135.169.125), 30 hops max, 40 byte packets</div><div class="line"> 1  211.151.74.2 (211.151.74.2)  4.671 ms  4.865 ms  5.055 ms</div><div class="line"> 2  211.151.56.57 (211.151.56.57)  0.619 ms  0.618 ms  0.612 ms</div><div class="line"> 3  211.151.227.206 (211.151.227.206)  0.620 ms  0.642 ms  0.636 ms</div><div class="line"> 4  210.77.139.145 (210.77.139.145)  0.720 ms  0.772 ms  0.816 ms</div><div class="line"> 5  202.106.42.101 (202.106.42.101)  7.667 ms  7.910 ms  8.012 ms</div><div class="line"> 6  bt-228-025.bta.net.cn (202.106.228.25)  2.965 ms  2.440 ms 61.148.154.97 (61.148.154.97)  431.337 ms</div><div class="line"> 7  124.65.58.213 (124.65.58.213)  5.134 ms  5.124 ms  5.044 ms</div><div class="line"> 8  202.106.35.190 (202.106.35.190)  1.917 ms  2.052 ms  2.059 ms</div><div class="line"> 9  * * *</div><div class="line">30  * * *</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例4：探测包使用的基本UDP端口设置6888"><a href="#实例4：探测包使用的基本UDP端口设置6888" class="headerlink" title="实例4：探测包使用的基本UDP端口设置6888"></a>实例4：探测包使用的基本UDP端口设置6888</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">traceroute -p 6888 www.baidu.com</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># traceroute -p 6888 www.baidu.com</span></div><div class="line">traceroute to www.baidu.com (220.181.111.147), 30 hops max, 40 byte packets</div><div class="line"> 1  211.151.74.2 (211.151.74.2)  4.927 ms  5.121 ms  5.298 ms</div><div class="line"> 2  211.151.56.1 (211.151.56.1)  0.500 ms  0.499 ms  0.509 ms</div><div class="line"> 3  211.151.224.90 (211.151.224.90)  0.637 ms  0.631 ms  0.641 ms</div><div class="line"> 4  * * *</div><div class="line"> 5  220.181.70.98 (220.181.70.98)  5.050 ms  5.313 ms  5.596 ms</div><div class="line"> 6  220.181.17.94 (220.181.17.94)  1.665 ms !X * *</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例5：把探测包的个数设置为值4"><a href="#实例5：把探测包的个数设置为值4" class="headerlink" title="实例5：把探测包的个数设置为值4"></a>实例5：把探测包的个数设置为值4</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">traceroute -q 4 www.baidu.com</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># traceroute -q 4 www.baidu.com</span></div><div class="line">traceroute to www.baidu.com (61.135.169.125), 30 hops max, 40 byte packets</div><div class="line"> 1  211.151.74.2 (211.151.74.2)  40.633 ms  40.819 ms  41.004 ms  41.188 ms</div><div class="line"> 2  211.151.56.57 (211.151.56.57)  0.637 ms  0.633 ms  0.627 ms  0.619 ms</div><div class="line"> 3  211.151.227.206 (211.151.227.206)  0.505 ms  0.580 ms  0.571 ms  0.569 ms</div><div class="line"> 4  210.77.139.145 (210.77.139.145)  0.753 ms  0.800 ms  0.853 ms  0.904 ms</div><div class="line"> 5  202.106.42.101 (202.106.42.101)  7.449 ms  7.543 ms  7.738 ms  7.893 ms</div><div class="line"> 6  61.148.154.97 (61.148.154.97)  316.817 ms bt-228-025.bta.net.cn (202.106.228.25)  3.695 ms  3.672 ms *</div><div class="line"> 7  124.65.58.213 (124.65.58.213)  3.056 ms  2.993 ms  2.960 ms 61.148.146.29 (61.148.146.29)  2.837 ms</div><div class="line"> 8  61.148.3.34 (61.148.3.34)  2.179 ms  2.295 ms  2.442 ms 202.106.35.190 (202.106.35.190)  7.136 ms</div><div class="line"> 9  * * * *</div><div class="line">30  * * * *</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例6：绕过正常的路由表，直接发送到网络相连的主机"><a href="#实例6：绕过正常的路由表，直接发送到网络相连的主机" class="headerlink" title="实例6：绕过正常的路由表，直接发送到网络相连的主机"></a>实例6：绕过正常的路由表，直接发送到网络相连的主机</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">traceroute -r www.baidu.com</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># traceroute -r www.baidu.com</span></div><div class="line">traceroute to www.baidu.com (61.135.169.125), 30 hops max, 40 byte packets</div><div class="line">connect: 网络不可达</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例7：把对外发探测包的等待响应时间设置为3秒"><a href="#实例7：把对外发探测包的等待响应时间设置为3秒" class="headerlink" title="实例7：把对外发探测包的等待响应时间设置为3秒"></a>实例7：把对外发探测包的等待响应时间设置为3秒</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">traceroute -w 3 www.baidu.com</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># traceroute -w 3 www.baidu.com</span></div><div class="line">traceroute to www.baidu.com (61.135.169.105), 30 hops max, 40 byte packets</div><div class="line"> 1  211.151.74.2 (211.151.74.2)  2.306 ms  2.469 ms  2.650 ms</div><div class="line"> 2  211.151.56.1 (211.151.56.1)  0.621 ms  0.613 ms  0.603 ms</div><div class="line"> 3  211.151.227.206 (211.151.227.206)  0.557 ms  0.560 ms  0.552 ms</div><div class="line"> 4  210.77.139.145 (210.77.139.145)  0.708 ms  0.761 ms  0.817 ms</div><div class="line"> 5  202.106.42.101 (202.106.42.101)  7.520 ms  7.774 ms  7.902 ms</div><div class="line"> 6  bt-228-025.bta.net.cn (202.106.228.25)  2.890 ms  2.369 ms 61.148.154.97 (61.148.154.97)  471.961 ms</div><div class="line"> 7  124.65.58.221 (124.65.58.221)  4.490 ms  4.483 ms  4.472 ms</div><div class="line"> 8  123.126.6.198 (123.126.6.198)  2.948 ms 61.148.156.6 (61.148.156.6)  7.688 ms  7.756 ms</div><div class="line"> 9  * * *</div><div class="line">30  * * *</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h2 id="Traceroute的工作原理："><a href="#Traceroute的工作原理：" class="headerlink" title="Traceroute的工作原理："></a>Traceroute的工作原理：</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Traceroute最简单的基本用法是：traceroute hostname</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Traceroute程序的设计是利用ICMP及IP header的TTL（Time To Live）栏位（field）。首先，traceroute送出一个TTL是1的IP datagram（其实，每次送出的为3个40字节的包，包括源地址，目的地址和包发出的时间标签）到目的地，当路径上的第一个路由器（router）收到这个datagram时，它将TTL减1。此时，TTL变为0了，所以该路由器会将此datagram丢掉，并送回一个「ICMP time exceeded」消息（包括发IP包的源地址，IP包的所有内容及路由器的IP地址），traceroute 收到这个消息后，便知道这个路由器存在于这个路径上，接着traceroute 再送出另一个TTL是2 的datagram，发现第2 个路由器…… traceroute 每次将送出的datagram的TTL 加1来发现另一个路由器，这个重复的动作一直持续到某个datagram 抵达目的地。当datagram到达目的地后，该主机并不会送回ICMP time exceeded消息，因为它已是目的地了，那么traceroute如何得知目的地到达了呢？</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Traceroute在送出UDP datagrams到目的地时，它所选择送达的port number 是一个一般应用程序都不会用的号码（30000 以上），所以当此UDP datagram 到达目的地后该主机会送回一个「ICMP port unreachable」的消息，而当traceroute 收到这个消息时，便知道目的地已经到达了。所以traceroute 在Server端也是没有所谓的Daemon 程式。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Traceroute提取发 ICMP TTL到期消息设备的IP地址并作域名解析。每次 ，Traceroute都打印出一系列数据,包括所经过的路由设备的域名及 IP地址,三个包每次来回所花时间。</p>
<h2 id="windows之tracert"><a href="#windows之tracert" class="headerlink" title="windows之tracert:"></a>windows之tracert:</h2><h3 id="格式："><a href="#格式：" class="headerlink" title="格式："></a>格式：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tracert [-d] [-h maximum_hops] [-j host-list] [-w timeout] target_name</div></pre></td></tr></table></figure>
<h3 id="参数说明："><a href="#参数说明：" class="headerlink" title="参数说明："></a>参数说明：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tracert [-d] [-h maximum_hops] [-j computer-list] [-w timeout] target_name</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;该诊断实用程序通过向目的地发送具有不同生存时间 (TL) 的 Internet 控制信息协议 (CMP) 回应报文，以确定至目的地的路由。路径上的每个路由器都要在转发该 ICMP 回应报文之前将其 TTL 值至少减 1，因此 TTL 是有效的跳转计数。当报文的 TTL 值减少到 0 时，路由器向源系统发回 ICMP 超时信息。通过发送 TTL 为 1 的第一个回应报文并且在随后的发送中每次将 TTL 值加 1，直到目标响应或达到最大 TTL 值，Tracert 可以确定路由。通过检查中间路由器发发回的 ICMP 超时 (ime Exceeded) 信息，可以确定路由器。注意，有些路由器“安静”地丢弃生存时间 (TLS) 过期的报文并且对 tracert 无效。</p>
<h4 id="参数："><a href="#参数：" class="headerlink" title="参数："></a>参数：</h4><ul>
<li>-d 指定不对计算机名解析地址。</li>
<li>-h maximum_hops 指定查找目标的跳转的最大数目。</li>
<li>-jcomputer-list 指定在 computer-list 中松散源路由。</li>
<li>-w timeout 等待由 timeout 对每个应答指定的毫秒数。</li>
<li>target_name 目标计算机的名称。</li>
</ul>
<h4 id="实例："><a href="#实例：" class="headerlink" title="实例："></a>实例：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">C:\Users\Administrator&gt;tracert www.58.com</div><div class="line"></div><div class="line">Tracing route to www.58.com [221.187.111.30]</div><div class="line">over a maximum of 30 hops:</div><div class="line"></div><div class="line">  1     1 ms     1 ms     1 ms  10.58.156.1</div><div class="line">  2     1 ms    &lt;1 ms    &lt;1 ms  10.10.10.1</div><div class="line">  3     1 ms     1 ms     1 ms  211.103.193.129</div><div class="line">  4     2 ms     2 ms     2 ms  10.255.109.129</div><div class="line">  5     1 ms     1 ms     3 ms  124.205.98.205</div><div class="line">  6     2 ms     2 ms     2 ms  124.205.98.253</div><div class="line">  7     2 ms     6 ms     1 ms  202.99.1.125</div><div class="line">  8     5 ms     6 ms     5 ms  118.186.0.113</div><div class="line">  9   207 ms     *        *     118.186.0.106</div><div class="line"> 10     8 ms     6 ms    11 ms  124.238.226.201</div><div class="line"> 11     6 ms     7 ms     6 ms  219.148.19.177</div><div class="line"> 12    12 ms    12 ms    16 ms  219.148.18.117</div><div class="line"> 13    14 ms    17 ms    16 ms  219.148.19.125</div><div class="line"> 14    13 ms    13 ms    12 ms  202.97.80.113</div><div class="line"> 15     *        *        *     Request timed out.</div><div class="line"> 16    12 ms    12 ms    17 ms  bj141-147-82.bjtelecom.net [219.141.147.82]</div><div class="line"> 17    13 ms    13 ms    12 ms  202.97.48.2</div><div class="line"> 18     *        *        *     Request timed out.</div><div class="line"> 19    14 ms    14 ms    12 ms  221.187.224.85</div><div class="line"> 20    15 ms    13 ms    12 ms  221.187.104.2</div><div class="line"> 21     *        *        *     Request timed out.</div><div class="line"> 22    15 ms    17 ms    18 ms  221.187.111.30</div><div class="line"></div><div class="line">Trace complete.</div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/41. Linux 命令- grep" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/41. Linux 命令- grep/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.243Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/41. Linux 命令- grep/">
        Linux 命令- grep
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux系统中grep命令是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹 配的行打印出来。grep全称是Global Regular Expression Print，表示全局正则表达式版本，它的使用权限是所有用户。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;grep的工作方式是这样的，它在一个或多个文件中搜索字符串模板。如果模板包括空格，则必须被引用，模板后的所有字符串被看作文件名。搜索的结果被送到标准输出，不影响原文件内容。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;grep可用于shell脚本，因为grep通过返回一个状态值来说明搜索的状态，如果模板搜索成功，则返回0，如果搜索不成功，则返回1，如果搜索的文件不存在，则返回2。我们利用这些返回值就可进行一些自动化的文本处理工作。</p>
<h2 id="1．命令格式"><a href="#1．命令格式" class="headerlink" title="1．命令格式"></a>1．命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grep [option] pattern file</div></pre></td></tr></table></figure>
<h2 id="2．命令功能"><a href="#2．命令功能" class="headerlink" title="2．命令功能"></a>2．命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;用于过滤/搜索的特定字符。可使用正则表达式能多种命令配合使用，使用上十分灵活。</p>
<h2 id="3．命令参数"><a href="#3．命令参数" class="headerlink" title="3．命令参数"></a>3．命令参数</h2><ul>
<li>-a   –text   #不要忽略二进制的数据。</li>
<li>-A&lt;显示行数&gt;   –after-context=&lt;显示行数&gt;   #除了显示符合范本样式的那一列之外，并显示该行之后的内容。</li>
<li>-b   –byte-offset   #在显示符合样式的那一行之前，标示出该行第一个字符的编号。</li>
<li>-B&lt;显示行数&gt;   –before-context=&lt;显示行数&gt;   #除了显示符合样式的那一行之外，并显示该行之前的内容。</li>
<li>-c    –count   #计算符合样式的列数。</li>
<li>-C&lt;显示行数&gt;    –context=&lt;显示行数&gt;或-&lt;显示行数&gt;   #除了显示符合样式的那一行之外，并显示该行之前后的内容。</li>
<li>-d &lt;动作&gt;      –directories=&lt;动作&gt;   #当指定要查找的是目录而非文件时，必须使用这项参数，否则grep指令将回报信息并停止动作。</li>
<li>-e&lt;范本样式&gt;  –regexp=&lt;范本样式&gt;   #指定字符串做为查找文件内容的样式。 </li>
<li>-E      –extended-regexp   #将样式为延伸的普通表示法来使用。   </li>
<li>-f&lt;规则文件&gt;  –file=&lt;规则文件&gt;   #指定规则文件，其内容含有一个或多个规则样式，让grep查找符合规则条件的文件内容，格式为每行一个规则样式。   </li>
<li>-F   –fixed-regexp   #将样式视为固定字符串的列表。</li>
<li>-G   –basic-regexp   #将样式视为普通的表示法来使用。</li>
<li>-h   –no-filename   #在显示符合样式的那一行之前，不标示该行所属的文件名称。</li>
<li>-H   –with-filename   #在显示符合样式的那一行之前，表示该行所属的文件名称。</li>
<li>-i    –ignore-case   #忽略字符大小写的差别。</li>
<li>-l    –file-with-matches   #列出文件内容符合指定的样式的文件名称。</li>
<li>-L   –files-without-match   #列出文件内容不符合指定的样式的文件名称。</li>
<li>-n   –line-number   #在显示符合样式的那一行之前，标示出该行的列数编号。</li>
<li>-q   –quiet或–silent   #不显示任何信息。</li>
<li>-r   –recursive   #此参数的效果和指定“-d recurse”参数相同。</li>
<li>-s   –no-messages   #不显示错误信息。</li>
<li>-v   –revert-match   #显示不包含匹配文本的所有行。</li>
<li>-V   –version   #显示版本信息。</li>
<li>-w   –word-regexp   #只显示全字符合的列。</li>
<li>-x    –line-regexp   #只显示全列符合的列。</li>
<li>-y   #此参数的效果和指定“-i”参数相同。</li>
</ul>
<h2 id="4．规则表达式"><a href="#4．规则表达式" class="headerlink" title="4．规则表达式"></a>4．规则表达式</h2><h3 id="grep的规则表达式"><a href="#grep的规则表达式" class="headerlink" title="grep的规则表达式:"></a>grep的规则表达式:</h3><ul>
<li><p>^  #锚定行的开始 如：’^grep’匹配所有以grep开头的行。 </p>
</li>
<li><p>$  #锚定行的结束 如：’grep$’匹配所有以grep结尾的行。 </p>
</li>
<li><p>.  #匹配一个非换行符的字符 如：’gr.p’匹配gr后接一个任意字符，然后是p。</p>
</li>
<li><p>*  #匹配零个或多个先前字符 如：’*grep’匹配所有一个或多个空格后紧跟grep的行。</p>
</li>
<li><p>.*   #一起用代表任意字符。</p>
</li>
<li><p>[]   #匹配一个指定范围内的字符，如’[Gg]rep’匹配Grep和grep。</p>
</li>
<li><p>[^]  #匹配一个不在指定范围内的字符，如：’[^A-FH-Z]rep’匹配不包含A-R和T-Z的一个字母开头，紧跟rep的行。</p>
</li>
<li><p>\(..\)  #标记匹配字符，如’\(love\)’，love被标记为1。</p>
</li>
<li><p>\&lt;      #锚定单词的开始，如:’\&lt;grep’匹配包含以grep开头的单词的行。</p>
</li>
<li><p>\&gt;      #锚定单词的结束，如’grep\&gt;’匹配包含以grep结尾的单词的行。</p>
</li>
<li><p>x\{m\}  #重复字符x，m次，如：’0\{5\}’匹配包含5个o的行。</p>
</li>
<li><p>x\{m,\}  #重复字符x,至少m次，如：’o\{5,\}’匹配至少有5个o的行。</p>
</li>
<li><p>x\{m,n\}  #重复字符x，至少m次，不多于n次，如：’o\{5,10\}’匹配5–10个o的行。</p>
</li>
<li><p>\w    #匹配文字和数字字符，也就是[A-Za-z0-9]，如：’G\w*p’匹配以G后跟零个或多个文字或数字字符，然后是p。</p>
</li>
<li><p>\W    #\w的反置形式，匹配一个或多个非单词字符，如点号句号等。</p>
</li>
<li><p>\b    #单词锁定符，如: ‘\bgrep\b’只匹配grep。</p>
</li>
</ul>
<h3 id="POSIX字符"><a href="#POSIX字符" class="headerlink" title="POSIX字符:"></a>POSIX字符:</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;为了在不同国家的字符编码中保持一至，POSIX(The Portable Operating System Interface)增加了特殊的字符类，如[:alnum:]是[A-Za-z0-9]的另一个写法。要把它们放到[]号内才能成为正则表达式，如[A- Za-z0-9]或[[:alnum:]]。在linux下的grep除fgrep外，都支持POSIX的字符类。</p>
<ul>
<li><p>[:alnum:]    #文字数字字符</p>
</li>
<li><p>[:alpha:]    #文字字符</p>
</li>
<li><p>[:digit:]    #数字字符</p>
</li>
<li><p>[:graph:]    #非空字符（非空格、控制字符）</p>
</li>
<li><p>[:lower:]    #小写字符</p>
</li>
<li><p>[:cntrl:]    #控制字符</p>
</li>
<li><p>[:print:]    #非空字符（包括空格）</p>
</li>
<li><p>[:punct:]    #标点符号 </p>
</li>
<li><p>[:space:]    #所有空白字符（新行，空格，制表符）</p>
</li>
<li><p>[:upper:]    #大写字符 </p>
</li>
<li><p>[:xdigit:]   #十六进制数字（0-9，a-f，A-F）</p>
</li>
</ul>
<h2 id="5．使用实例"><a href="#5．使用实例" class="headerlink" title="5．使用实例"></a>5．使用实例</h2><h3 id="实例1：查找指定进程"><a href="#实例1：查找指定进程" class="headerlink" title="实例1：查找指定进程"></a>实例1：查找指定进程</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ps -ef|grep svn</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ps -ef|grep svn</span></div><div class="line">root 4943   1      0  Dec05 ?   00:00:00 svnserve -d -r /opt/svndata/grape/</div><div class="line">root 16867 16838  0 19:53 pts/0    00:00:00 grep svn</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;第一条记录是查找出的进程；第二条结果是grep进程本身，并非真正要找的进程。</p>
<h3 id="实例2：查找指定进程个数"><a href="#实例2：查找指定进程个数" class="headerlink" title="实例2：查找指定进程个数"></a>实例2：查找指定进程个数</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ps -ef|grep svn -c</div><div class="line">ps -ef|grep -c svn</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ps -ef|grep svn -c</span></div><div class="line">2</div><div class="line">[root@localhost ~]<span class="comment"># ps -ef|grep -c svn </span></div><div class="line">2</div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例3：从文件中读取关键词进行搜索"><a href="#实例3：从文件中读取关键词进行搜索" class="headerlink" title="实例3：从文件中读取关键词进行搜索"></a>实例3：从文件中读取关键词进行搜索</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat test.txt | grep -f test2.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat test.txt </span></div><div class="line">hnlinux</div><div class="line">peida.cnblogs.com</div><div class="line">ubuntu</div><div class="line">ubuntu linux</div><div class="line">redhat</div><div class="line">Redhat</div><div class="line">linuxmint</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat test2.txt </span></div><div class="line">linux</div><div class="line">Redhat</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat test.txt | grep -f test2.txt</span></div><div class="line">hnlinux</div><div class="line">ubuntu linux</div><div class="line">Redhat</div><div class="line">linuxmint</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;输出test.txt文件中含有从test2.txt文件中读取出的关键词的内容行</p>
<h3 id="实例4：从文件中读取关键词进行搜索-且显示行号"><a href="#实例4：从文件中读取关键词进行搜索-且显示行号" class="headerlink" title="实例4：从文件中读取关键词进行搜索 且显示行号"></a>实例4：从文件中读取关键词进行搜索 且显示行号</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat test.txt | grep -nf test2.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat test.txt </span></div><div class="line">hnlinux</div><div class="line">peida.cnblogs.com</div><div class="line">ubuntu</div><div class="line">ubuntu linux</div><div class="line">redhat</div><div class="line">Redhat</div><div class="line">linuxmint</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat test2.txt </span></div><div class="line">linux</div><div class="line">Redhat</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat test.txt | grep -nf test2.txt</span></div><div class="line">1:hnlinux</div><div class="line">4:ubuntu linux</div><div class="line">6:Redhat</div><div class="line">7:linuxmint</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;输出test.txt文件中含有从test2.txt文件中读取出的关键词的内容行，并显示每一行的行号</p>
<h3 id="实例5：从文件中查找关键词"><a href="#实例5：从文件中查找关键词" class="headerlink" title="实例5：从文件中查找关键词"></a>实例5：从文件中查找关键词</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grep <span class="string">'linux'</span> test.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># grep 'linux' test.txt </span></div><div class="line">hnlinux</div><div class="line">ubuntu linux</div><div class="line">linuxmint</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># grep -n 'linux' test.txt </span></div><div class="line">1:hnlinux</div><div class="line">4:ubuntu linux</div><div class="line">7:linuxmint</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例6：从多个文件中查找关键词"><a href="#实例6：从多个文件中查找关键词" class="headerlink" title="实例6：从多个文件中查找关键词"></a>实例6：从多个文件中查找关键词</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grep <span class="string">'linux'</span> test.txt test2.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># grep -n 'linux' test.txt test2.txt </span></div><div class="line">test.txt:1:hnlinux</div><div class="line">test.txt:4:ubuntu linux</div><div class="line">test.txt:7:linuxmint</div><div class="line">test2.txt:1:linux</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># grep 'linux' test.txt test2.txt </span></div><div class="line">test.txt:hnlinux</div><div class="line">test.txt:ubuntu linux</div><div class="line">test.txt:linuxmint</div><div class="line">test2.txt:linux</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;多文件时，输出查询到的信息内容行时，会把文件的命名在行最前面输出并且加上”:”作为标示符</p>
<h3 id="实例7：grep不显示本身进程"><a href="#实例7：grep不显示本身进程" class="headerlink" title="实例7：grep不显示本身进程"></a>实例7：grep不显示本身进程</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ps aux|grep \[s]sh</div><div class="line">ps aux | grep ssh | grep -v <span class="string">"grep"</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ps aux|grep ssh</span></div><div class="line">root   2720  0.0  0.0  62656  1212 ?      Ss   Nov02   0:00 /usr/sbin/sshd</div><div class="line">root  16834  0.0  0.0  88088  3288 ?      Ss   19:53   0:00 sshd: root@pts/0 </div><div class="line">root  16901  0.0  0.0  61180   764 pts/0  S+   20:31   0:00 grep ssh</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ps aux|grep \[s]sh]</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ps aux|grep \[s]sh</span></div><div class="line">root   2720  0.0  0.0  62656  1212 ?      Ss   Nov02   0:00 /usr/sbin/sshd</div><div class="line">root  16834  0.0  0.0  88088  3288 ?      Ss   19:53   0:00 sshd: root@pts/0 </div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ps aux | grep ssh | grep -v "grep"</span></div><div class="line">root   2720  0.0  0.0  62656  1212 ?      Ss   Nov02   0:00 /usr/sbin/sshd</div><div class="line">root  16834  0.0  0.0  88088  3288 ?      Ss   19:53   0:00 sshd: root@pts/0</div></pre></td></tr></table></figure>
<h3 id="实例8：找出已u开头的行内容"><a href="#实例8：找出已u开头的行内容" class="headerlink" title="实例8：找出已u开头的行内容"></a>实例8：找出已u开头的行内容</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat test.txt |grep ^u</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat test.txt |grep ^u</span></div><div class="line">ubuntu</div><div class="line">ubuntu linux</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例9：输出非u开头的行内容"><a href="#实例9：输出非u开头的行内容" class="headerlink" title="实例9：输出非u开头的行内容"></a>实例9：输出非u开头的行内容</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat test.txt |grep ^[^u]</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat test.txt |grep ^[^u]</span></div><div class="line">hnlinux</div><div class="line">peida.cnblogs.com</div><div class="line">redhat</div><div class="line">Redhat</div><div class="line">linuxmint</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例10：输出以hat结尾的行内容"><a href="#实例10：输出以hat结尾的行内容" class="headerlink" title="实例10：输出以hat结尾的行内容"></a>实例10：输出以hat结尾的行内容</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat test.txt |grep hat$</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat test.txt |grep hat$</span></div><div class="line">redhat</div><div class="line">Redhat</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例11："><a href="#实例11：" class="headerlink" title="实例11："></a>实例11：</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ifconfig eth0|grep "[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;"</span></div><div class="line">          inet addr:192.168.120.204  Bcast:192.168.120.255  Mask:255.255.255.0</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ifconfig eth0|grep -E "([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]"</span></div><div class="line">          inet addr:192.168.120.204  Bcast:192.168.120.255  Mask:255.255.255.0</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例12：显示包含ed或者at字符的内容行"><a href="#实例12：显示包含ed或者at字符的内容行" class="headerlink" title="实例12：显示包含ed或者at字符的内容行"></a>实例12：显示包含ed或者at字符的内容行</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat test.txt |grep -E <span class="string">"ed|at"</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat test.txt |grep -E "peida|com"</span></div><div class="line">peida.cnblogs.com</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cat test.txt |grep -E "ed|at"</span></div><div class="line">redhat</div><div class="line">Redhat</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例13：显示当前目录下面以-txt-结尾的文件中的所有包含每个字符串至少有7个连续小写字符的字符串的行"><a href="#实例13：显示当前目录下面以-txt-结尾的文件中的所有包含每个字符串至少有7个连续小写字符的字符串的行" class="headerlink" title="实例13：显示当前目录下面以.txt 结尾的文件中的所有包含每个字符串至少有7个连续小写字符的字符串的行"></a>实例13：显示当前目录下面以.txt 结尾的文件中的所有包含每个字符串至少有7个连续小写字符的字符串的行</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grep <span class="string">'[a-z]\&#123;7\&#125;'</span> *.txt</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># grep '[a-z]\&#123;7\&#125;' *.txt</span></div><div class="line">test.txt:hnlinux</div><div class="line">test.txt:peida.cnblogs.com</div><div class="line">test.txt:linuxmint</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/72. Linux 命令-vim" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/72. Linux 命令-vim/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.242Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/72. Linux 命令-vim/">
        Linux 命令- vim
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;所有的 Unix Like 系统都会内建 vi 文书编辑器，其他的文书编辑器则不一定存在。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;但是目前使用比较多的是 vim 编辑器。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;vim 具有程序编辑的能力，可以主动的以字体颜色辨别语法的正确性，方便设计。</p>
<h2 id="什么是vim"><a href="#什么是vim" class="headerlink" title="什么是vim"></a>什么是vim</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Vim 是从 vi 发展出来的一个文本编辑器。代码补完、编辑及错误跳转等方便编程的功能特别丰富，在程序员中广泛使用。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;简单的来说，vi 是老式的字处理器，不公功能已经很齐全。vim 则可以说是程序开发者的一向很好用的工具。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;连<a href="http://www.vim.org" target="_blank" rel="external">vim官方网站</a>自己也说 vim 是一个程序开发工具而不是文字处理软件。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;vim 键盘图</p>
<p><img src="https://github.com/hcldirgit/image/blob/master/linux%E5%91%BD%E4%BB%A4-vim/01.gif?raw=true" alt="vim键盘图"></p>
<h2 id="vim的使用"><a href="#vim的使用" class="headerlink" title="vim的使用"></a>vim的使用</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;基本上 vim 分为三种模式：<strong>命令模式（Command mode、编辑模式）、输入模式（Insert mode）和底线命令模式（Last line mode、末行模式）</strong>。三种模式的作用分别是：</p>
<h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用户刚刚启动 vim ，便计入了命令模式。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;此状态下敲击键盘动作会被 vim 识别为命令，而非输入字符。比如此时按 i ，并不回输入一个字符，i 被当作了一个命令。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;以下是常用的几个命令：</p>
<ul>
<li><strong>i</strong> 在当前光标所在字符的前面，转为输入模式；</li>
<li><strong>a</strong> 在当前光标所在字符的后面，转为输入模式；</li>
<li><strong>o</strong> 在当前光标所在行的下方，新建一行，并转为输入模式；</li>
<li><strong>I</strong> 在当前光标表所在行的行首，转为输入模式；</li>
<li><strong>A</strong> 在当前光标所在行的行尾，转为输入模式；</li>
<li><strong>O</strong> 在当前光标所在行的上方，新建一行，并转为输入模式；</li>
<li><strong>x</strong> 删除当前光标所在出的字符；</li>
<li><strong>：</strong> 切换到底线命令模式，以在最底一行输入命令；</li>
<li><strong>ESC</strong> 从输入模式切换为命令模式，也可是底线命令模式切换为命令模式。</li>
</ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;注：输入模式和底线命令模式之间不能直接切换。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;若想要编辑文本：启动 vim ，进入了命令模式，按下 i ，切换到输入模式。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。</p>
<h3 id="输入模式"><a href="#输入模式" class="headerlink" title="输入模式"></a>输入模式</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在命令模式下按下 <code>i</code> 就进入了输入模式。在输入模式中，可以使用以下按键：</p>
<ul>
<li><strong>字符按键以及Shift组合</strong>，输入字符</li>
<li><strong>ENTER</strong>，回车键，换行</li>
<li><strong>BACK SPACE</strong>，退格键，删除光标前一个字符</li>
<li><strong>DEL</strong>，删除键，删除光标后一个字符</li>
<li><strong>方向键</strong>，在文本中移动光标</li>
<li><strong>HOME/END</strong>,移动光标到行首/行尾</li>
<li><strong>Page Up/Page Down</strong>，上/下翻页</li>
<li><strong>Insert</strong>，切换光标为输入/替换模式，光标将变成竖线/下划线</li>
<li><strong>ESC</strong>，退出输入模式，切换到命令模式</li>
</ul>
<h3 id="底线命令模式"><a href="#底线命令模式" class="headerlink" title="底线命令模式"></a>底线命令模式</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在命令模式下按下 <code>:</code>（英文冒号）就进入了底线命令模式。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在底线命令模式中，基本的命令有：</p>
<ul>
<li><strong>q</strong>退出程序</li>
<li><strong>w</strong>保存文件</li>
</ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;按ESC键可随时退出底线命令模式。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;可以将这三个模式想成下图来表示：</p>
<p><img src="https://github.com/hcldirgit/image/blob/master/linux%E5%91%BD%E4%BB%A4-vim/02.png?raw=true" alt=""></p>
<h2 id="vim-使用实例"><a href="#vim-使用实例" class="headerlink" title="vim 使用实例"></a>vim 使用实例</h2><h3 id="使用-vim-进入命令模式"><a href="#使用-vim-进入命令模式" class="headerlink" title="使用 vim 进入命令模式"></a>使用 vim 进入命令模式</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;使用 vim 来建立一个名为 test.txt 的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># vim test.txt</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;直接输入 <strong>vim文件名</strong>就能进入 vim 的命令模式了。vim 后面一定要加文件名，不管该文件存在与否。</p>
<p><img src="https://github.com/hcldirgit/image/blob/master/linux%E5%91%BD%E4%BB%A4-vim/03.jpg?raw=true" alt=""></p>
<h3 id="按-i-进入输入模式（也称为编辑模式），开始编辑文字"><a href="#按-i-进入输入模式（也称为编辑模式），开始编辑文字" class="headerlink" title="按 i 进入输入模式（也称为编辑模式），开始编辑文字"></a>按 i 进入输入模式（也称为编辑模式），开始编辑文字</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在命令模式中，只要按下 i、o、a 等字符就可以进入输入模式了。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在编辑模式当中，可以发现在左下角状态栏中会出现 <code>-INSERT-</code>的字样，那就是可以输入任意字符的提示。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这个时候，键盘上除了<code>ESC</code>这个键之外，其他的按键都可以视作为一般的输入按钮了，所以可以进行任意的编辑。</p>
<p><img src="https://github.com/hcldirgit/image/blob/master/linux%E5%91%BD%E4%BB%A4-vim/04.jpg?raw=true" alt=""></p>
<h3 id="按下ESC按键回到一般模式"><a href="#按下ESC按键回到一般模式" class="headerlink" title="按下ESC按键回到一般模式"></a>按下ESC按键回到一般模式</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果编辑完毕，就按下<code>ESC</code>这个按键即可马上回到命令模式，这是左下角的 <code>-INSERT-</code>不见了</p>
<h3 id="在命令模式中，按下-wq保存后退出-vim"><a href="#在命令模式中，按下-wq保存后退出-vim" class="headerlink" title="在命令模式中，按下:wq保存后退出 vim"></a>在命令模式中，按下<code>:wq</code>保存后退出 vim</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;保存并退出的指令很简单，输入<code>:wq</code>即可保存并退出。</p>
<p><img src="https://github.com/hcldirgit/image/blob/master/linux%E5%91%BD%E4%BB%A4-vim/05.jpg?raw=true" alt=""></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这样就成功创建了一个 test.txt文件。</p>
<h2 id="vim-按键说明"><a href="#vim-按键说明" class="headerlink" title="vim 按键说明"></a>vim 按键说明</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;除了以上简易范例的 i、ESC、:wq 之外，其实 vim 还有非常多的按键可以使用。</p>
<h3 id="第一部分：命令模式可用的光标移动、复制粘贴、搜索替换等"><a href="#第一部分：命令模式可用的光标移动、复制粘贴、搜索替换等" class="headerlink" title="第一部分：命令模式可用的光标移动、复制粘贴、搜索替换等"></a>第一部分：命令模式可用的光标移动、复制粘贴、搜索替换等</h3><p><img src="https://github.com/hcldirgit/image/blob/master/linux%E5%91%BD%E4%BB%A4-vim/06.jpg?raw=true" alt=""></p>
<p><img src="https://github.com/hcldirgit/image/blob/master/linux%E5%91%BD%E4%BB%A4-vim/07.jpg?raw=true" alt=""></p>
<p><img src="https://github.com/hcldirgit/image/blob/master/linux%E5%91%BD%E4%BB%A4-vim/08.jpg?raw=true" alt=""></p>
<h3 id="第二部分：命令模式切换到编辑模式的可以用按键说明"><a href="#第二部分：命令模式切换到编辑模式的可以用按键说明" class="headerlink" title="第二部分：命令模式切换到编辑模式的可以用按键说明"></a>第二部分：命令模式切换到编辑模式的可以用按键说明</h3><p><img src="https://github.com/hcldirgit/image/blob/master/linux%E5%91%BD%E4%BB%A4-vim/09.jpg?raw=true" alt=""></p>
<h3 id="第三部分：命令模式切换到末行指令模式的可以用按键说明"><a href="#第三部分：命令模式切换到末行指令模式的可以用按键说明" class="headerlink" title="第三部分：命令模式切换到末行指令模式的可以用按键说明"></a>第三部分：命令模式切换到末行指令模式的可以用按键说明</h3><p><img src="https://github.com/hcldirgit/image/blob/master/linux%E5%91%BD%E4%BB%A4-vim/10.jpg?raw=true" alt=""></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;特别注意，在 vim 中，数字是很有意义的！数字通常代表重复做几次的意思！也有可能是代表去到第几个的意思。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;举例来说，要删除50行，则是用<code>50dd</code>，数字加在动作之前；要向下移动20行，<code>20j</code>或是<code>20↓</code>即可。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/61. Linux 命令- rcp" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/61. Linux 命令- rcp/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.241Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/61. Linux 命令- rcp/">
        Linux 命令- rcp
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rcp代表“remote file copy”（远程文件拷贝）。该命令用于在计算机之间拷贝文件。rcp命令有两种格式。第一种格式用于文件到文件的拷贝；第二种格式用于把文件或目录拷贝到另一个目录中。</p>
<h2 id="1．命令格式"><a href="#1．命令格式" class="headerlink" title="1．命令格式"></a>1．命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rcp [参数] [源文件] [目标文件]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能"><a href="#2．命令功能" class="headerlink" title="2．命令功能"></a>2．命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rcp命令用在远端复制文件或目录，如同时指定两个以上的文件或目录，且最后的目的地是一个已经存在的目录，则它会把前面指定的所有文件或目录复制到该目录中。</p>
<h2 id="3．命令参数"><a href="#3．命令参数" class="headerlink" title="3．命令参数"></a>3．命令参数</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;各选项含义：</p>
<ul>
<li>-r 递归地把源目录中的所有内容拷贝到目的目录中。要使用这个选项，目的必须是一个目录。</li>
<li>-p 试图保留源文件的修改时间和模式，忽略umask。</li>
<li>-k 请求rcp获得在指定区域内的远程主机的Kerberos 许可，而不是获得由krb_relmofhost⑶确定的远程主机区域内的远程主机的Kerberos许可。</li>
<li>-x 为传送的所有数据打开DES加密。这会影响响应时间和CPU利用率，但是可以提高安全性。如果在文件名中指定的路径不是完整的路径名，那么这个路径被解释为相对远程机上同名用户的主目录。如果没有给出远程用户名，就使用当前用户名。如果远程机上的路径包含特殊shell字符，需要用反斜线（\\）、双引号（”）或单引号（’）括起来，使所有的shell元字符都能被远程地解释。需要说明的是，rcp不提示输入口令，它通过rsh命令来执行拷贝。</li>
</ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;directory 每个文件或目录参数既可以是远程文件名也可以是本地文件名。远程文件名具有如下形式：rname@rhost：path，其中rname是远程用户名，rhost是远程计算机名，path是这个文件的路径。</p>
<h2 id="4．使用实例"><a href="#4．使用实例" class="headerlink" title="4．使用实例"></a>4．使用实例</h2><h3 id="要使用-rcp，需要具备以下条件："><a href="#要使用-rcp，需要具备以下条件：" class="headerlink" title="要使用 rcp，需要具备以下条件："></a>要使用 rcp，需要具备以下条件：</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果系统中有 /etc/hosts 文件，系统管理员应确保该文件包含要与之进行通信的远程主机的项。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/etc/hosts 文件中有一行文字，其中包含每个远程系统的以下信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">internet_address   official_name   <span class="built_in">alias</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">9.186.10.***  webserver1.com.58.webserver</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.rhosts 文件</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.rhosts 文件位于远程系统的主目录下，其中包含本地系统的名称和本地登录名。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例如，远程系统的 .rhosts 文件中的项可能是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webserver1 root</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;其中，webserver1 是本地系统的名称，root 是本地登录名。这样，webserver1 上的 root 即可在包含 .rhosts 文件的远程系统中来回复制文件。</p>
<h3 id="配置过程"><a href="#配置过程" class="headerlink" title="配置过程:"></a>配置过程:</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;只对root用户生效</p>
<ol>
<li>在双方root用户根目录下建立.rhosts文件,并将双方的hostname加进去.在此之前应在双方的 /etc/hosts文件中加入对方的IP和hostname</li>
<li>把rsh服务启动起来,redhat默认是不启动的。<br>方法：用执行ntsysv命令,在rsh选项前用空格键选中,确定退出。然后执行：<br>service xinetd restart即可。</li>
<li>到/etc/pam.d/目录下,把rsh文件中的auth required /lib/security/pam_securetty.so<br>一行用“#”注释掉即可。（只有注释掉这一行，才能用root用户登录）</li>
</ol>
<h3 id="命令使用"><a href="#命令使用" class="headerlink" title="命令使用:"></a>命令使用:</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;将文件复制到远程系统<br>要将本地系统中的文件复制到远程系统，请使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rcplocal_fileremote_hostname:remote_fileEnter</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;注意，如果当前目录下没有 local_file，则除本地文件名外，还需要提供相对路径（自当前目录开始）或绝对路径名（自 / 开始）。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;仅当希望将 remote_hostname 上的 remote_file 放到其他目录（远程主目录除外）下时，才需要为其指定完整的（绝对）路径。</p>
<h3 id="使用实例1-将当前目录下的-test1-复制到名为-webserver1的远程系统"><a href="#使用实例1-将当前目录下的-test1-复制到名为-webserver1的远程系统" class="headerlink" title="使用实例1:将当前目录下的 test1 复制到名为 webserver1的远程系统"></a>使用实例1:将当前目录下的 test1 复制到名为 webserver1的远程系统</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rcp test1 webserver1:/home/root/test3</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在这种情况下，test1 被复制到远程子目录 test3下，名称仍为 test1 。如果仅提供了远程主机名，rcp 将把 test1 复制到远程主目录下，名称仍为 test1 。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;还可以在目的目录中包含文件名。例如，将文件复制到名为 webserver1的系统中：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rcp test1 webserver1:/home/root/test3</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在这种情况下，将 test1 复制到远程目录root 下并将其命名为 test3。</p>
<h3 id="使用实例2：从远程系统复制文件：要将远程系统中的文件复制到本地目录下"><a href="#使用实例2：从远程系统复制文件：要将远程系统中的文件复制到本地目录下" class="headerlink" title="使用实例2：从远程系统复制文件：要将远程系统中的文件复制到本地目录下"></a>使用实例2：从远程系统复制文件：要将远程系统中的文件复制到本地目录下</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rcp remote_hostname:remote_file local_fileEnter</div></pre></td></tr></table></figure>
<h3 id="使用实例-3-将远程系统-webserver1中的-test2-复制到当前目录："><a href="#使用实例-3-将远程系统-webserver1中的-test2-复制到当前目录：" class="headerlink" title="使用实例:3:将远程系统 webserver1中的 test2 复制到当前目录："></a>使用实例:3:将远程系统 webserver1中的 test2 复制到当前目录：</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rcp webserver1:/home/root/test2 .Enter</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;点 (.) 是“当前目录”的简写形式。在这种情况下，远程目录中的 test2 被复制到当前目录下，名称仍为 test2 。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果希望用新名称复制文件，请提供目标文件名。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果希望将 test2 复制到本地系统中的其他目录下，请使用以下绝对或相对路径名：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rcp webserver1:/home/root/test2 otherdir/ Enter</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;或者，如果希望用其他文件名将文件复制到其他目录下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rcp webserver1:/home/root/test2 otherdir/otherfile Enter</div></pre></td></tr></table></figure>
<h3 id="使用实例4：将目录复制到远程系统：要将本地目录及其文件和子目录复制到远程系统，请同时使用-rcp-和-r（递归）选项。"><a href="#使用实例4：将目录复制到远程系统：要将本地目录及其文件和子目录复制到远程系统，请同时使用-rcp-和-r（递归）选项。" class="headerlink" title="使用实例4：将目录复制到远程系统：要将本地目录及其文件和子目录复制到远程系统，请同时使用 rcp 和 -r（递归）选项。"></a>使用实例4：将目录复制到远程系统：要将本地目录及其文件和子目录复制到远程系统，请同时使用 rcp 和 -r（递归）选项。</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rcp –r local_dir remote_hostname:remote_dir Enter</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果当前目录下没有 local_dir，则除本地目录名外，还需要提供相对路径名（自当前目录开始）或绝对路径名（自 / 顶级目录开始）。另外，如果主目录下没有 remote_dir，则 remote_dir 将需要一个相对路径（自主目录开始）或绝对路径（自 / 开始）。</p>
<h3 id="使用实例5-要将名为-work-的子目录完整地复制到-webserver1远程计算机中的主目录下名为-products-的目录，请键入以下内容："><a href="#使用实例5-要将名为-work-的子目录完整地复制到-webserver1远程计算机中的主目录下名为-products-的目录，请键入以下内容：" class="headerlink" title="使用实例5:要将名为 work 的子目录完整地复制到 webserver1远程计算机中的主目录下名为 products 的目录，请键入以下内容："></a>使用实例5:要将名为 work 的子目录完整地复制到 webserver1远程计算机中的主目录下名为 products 的目录，请键入以下内容：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rcp –r work webserver1:/home/root/products Enter</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;此命令在 webserver1:/home/root/products 下创建名为 work 的目录及其全部内容（假定 /home/root/products 已存在于 webserver1中）。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;本示例假定用户处于包含 work 的本地目录下。否则，必须提供该目录的相对或绝对路径，如 /home/root/work。</p>
<h3 id="使用实例6：从远程系统复制目录："><a href="#使用实例6：从远程系统复制目录：" class="headerlink" title="使用实例6：从远程系统复制目录："></a>使用实例6：从远程系统复制目录：</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;要将远程目录及其所有文件和子目录复制到本地目录，请在以下语法中使用 rcp 和 -r（递归）选项。<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rcp –r remote_hostname:remote_dir local_dir Enter</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;要将名为 work 的远程目录复制到当前目录，请键入以下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rcp –r webserver1:/home/root/work .Enter</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;点 (.) 表示当前目录。将在此目录下创建 work 目录。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/1. Linux 命令-cd" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/1. Linux 命令-cd/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.240Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/1. Linux 命令-cd/">
        Linux 命令- cd
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux cd 命令可以说是Linux中最基本的命令语句，其他的命令语句要进行操作，都是建立在使用 cd 命令上的。所以，学习Linux 常用命令，首先就要学好 cd 命令的使用方法技巧。</p>
<h2 id="1-命令格式"><a href="#1-命令格式" class="headerlink" title="1.命令格式"></a>1.命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span>  [目录名]</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2.命令功能"></a>2.命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;切换当前目录至dirName  </p>
<h2 id="3-常用范例"><a href="#3-常用范例" class="headerlink" title="3.常用范例"></a>3.常用范例</h2><h3 id="例1：进入系统根目录"><a href="#例1：进入系统根目录" class="headerlink" title="例1：进入系统根目录"></a>例1：进入系统根目录</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cd /</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong>进入系统根目录,上面命令执行完后拿ls命令看一下，当前目录已经到系统根目录了</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> ..</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;或者</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> .. //</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost soft]<span class="comment"># pwd</span></div><div class="line">/opt/soft</div><div class="line">[root@localhost soft]<span class="comment"># cd ..</span></div><div class="line">[root@localhost opt]<span class="comment"># cd ..//</span></div><div class="line">[root@localhost /]<span class="comment"># pwd</span></div><div class="line">/</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong> </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;进入系统根目录可以使用“ cd .. ”一直退，就可以到达根目录</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> ../.. //</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost soft]<span class="comment"># pwd</span></div><div class="line">/opt/soft</div><div class="line">[root@localhost soft]<span class="comment"># cd ../.. //</span></div><div class="line">[root@localhost /]<span class="comment"># pwd</span></div><div class="line">/</div><div class="line">[root@localhost /]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong> 使用cd 命令实现进入当前目录的父目录的父目录。 </p>
<h3 id="例2：使用-cd-命令进入当前用户主目录"><a href="#例2：使用-cd-命令进入当前用户主目录" class="headerlink" title="例2：使用 cd 命令进入当前用户主目录"></a>例2：使用 cd 命令进入当前用户主目录</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;“当前用户主目录”和“系统根目录”是两个不同的概念。进入当前用户主目录有两个方法。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令1：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1 [root@localhost soft]<span class="comment"># pwd</span></div><div class="line">2 /opt/soft</div><div class="line">3 [root@localhost soft]<span class="comment"># cd</span></div><div class="line">4 [root@localhost ~]<span class="comment"># pwd</span></div><div class="line">5 /root</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令2：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> ~</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cd /opt/soft/</span></div><div class="line">[root@localhost soft]<span class="comment"># pwd</span></div><div class="line">/opt/soft</div><div class="line">[root@localhost soft]<span class="comment"># cd ~</span></div><div class="line">[root@localhost ~]<span class="comment"># pwd</span></div><div class="line">/root</div></pre></td></tr></table></figure>
<h3 id="例3：跳转到指定目录"><a href="#例3：跳转到指定目录" class="headerlink" title="例3：跳转到指定目录"></a>例3：跳转到指定目录</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /opt/soft</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># cd /opt/soft</span></div><div class="line">[root@localhost soft]<span class="comment"># pwd</span></div><div class="line">/opt/soft</div><div class="line">[root@localhost soft]<span class="comment"># cd jdk1.6.0_16/</span></div><div class="line">[root@localhost jdk1.6.0_16]<span class="comment"># pwd</span></div><div class="line">/opt/soft/jdk1.6.0_16</div><div class="line">[root@localhost jdk1.6.0_16]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;跳转到指定目录，从根目录开始，目录名称前加 / ,当前目录内的子目录直接写名称即可        </p>
<h3 id="例4：返回进入此目录之前所在的目录"><a href="#例4：返回进入此目录之前所在的目录" class="headerlink" title="例4：返回进入此目录之前所在的目录"></a>例4：返回进入此目录之前所在的目录</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> -</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost soft]<span class="comment"># pwd</span></div><div class="line">/opt/soft</div><div class="line">[root@localhost soft]<span class="comment"># cd -</span></div><div class="line">/root</div><div class="line">[root@localhost ~]<span class="comment"># pwd</span></div><div class="line">/root</div><div class="line">[root@localhost ~]<span class="comment"># cd -</span></div><div class="line">/opt/soft</div><div class="line">[root@localhost soft]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="例5：把上个命令的参数作为cd参数使用。"><a href="#例5：把上个命令的参数作为cd参数使用。" class="headerlink" title="例5：把上个命令的参数作为cd参数使用。"></a>例5：把上个命令的参数作为cd参数使用。</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> !$</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost soft]<span class="comment"># cd !$</span></div><div class="line"><span class="built_in">cd</span> -</div><div class="line">/root</div><div class="line">[root@localhost ~]<span class="comment"># cd !$</span></div><div class="line"><span class="built_in">cd</span> -</div><div class="line">/opt/soft</div><div class="line">[root@localhost soft]<span class="comment">#</span></div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/47/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/46/">46</a><a class="page-number" href="/page/47/">47</a><span class="page-number current">48</span><a class="page-number" href="/page/49/">49</a><a class="page-number" href="/page/50/">50</a><span class="space">&hellip;</span><a class="page-number" href="/page/63/">63</a><a class="extend next" rel="next" href="/page/49/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2017 失落的乐章
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    

<script>
	var yiliaConfig = {
		fancybox: ,
		mathjax: ,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



  </div>
</body>
</html>