<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>失落的乐章</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="失落的乐章的Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="失落的乐章">
<meta property="og:url" content="https://hcldirgit.github.io/page/45/index.html">
<meta property="og:site_name" content="失落的乐章">
<meta property="og:description" content="失落的乐章的Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="失落的乐章">
<meta name="twitter:description" content="失落的乐章的Blog">
  
    <link rel="alternative" href="/atom.xml" title="失落的乐章" type="application/atom+xml">
  
  
    <link rel="icon" href="https://github.com/hcldirgit/image/blob/master/0.png?raw=true">
  
  <link rel="stylesheet" href="/css/style.css">
  
  
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85415703-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://github.com/hcldirgit/image/blob/master/0.png?raw=true" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">失落的乐章</a></h1>
		</hgroup>

		
		<p class="header-subtitle">技术面前，永远都是学生。</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags">静心阅读</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Ansible/" style="font-size: 10.42px;">Ansible</a> <a href="/tags/Apache/" style="font-size: 18.33px;">Apache</a> <a href="/tags/Cacti/" style="font-size: 11.67px;">Cacti</a> <a href="/tags/DNS/" style="font-size: 13.33px;">DNS</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/FTP/" style="font-size: 11.25px;">FTP</a> <a href="/tags/Git/" style="font-size: 10.83px;">Git</a> <a href="/tags/HA集群/" style="font-size: 11.67px;">HA集群</a> <a href="/tags/Hadoop/" style="font-size: 12.5px;">Hadoop</a> <a href="/tags/Jenkins/" style="font-size: 10.42px;">Jenkins</a> <a href="/tags/LAMP/" style="font-size: 19.58px;">LAMP</a> <a href="/tags/LNMP/" style="font-size: 17.08px;">LNMP</a> <a href="/tags/LVS/" style="font-size: 16.67px;">LVS</a> <a href="/tags/Linux/" style="font-size: 19.17px;">Linux</a> <a href="/tags/Linux命令/" style="font-size: 20px;">Linux命令</a> <a href="/tags/Linux安全/" style="font-size: 14.17px;">Linux安全</a> <a href="/tags/Memcached/" style="font-size: 11.25px;">Memcached</a> <a href="/tags/MongoDB/" style="font-size: 15.42px;">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 17.5px;">MySQL</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/Nagios/" style="font-size: 11.67px;">Nagios</a> <a href="/tags/Nginx/" style="font-size: 17.92px;">Nginx</a> <a href="/tags/OpenStack/" style="font-size: 11.25px;">OpenStack</a> <a href="/tags/Php/" style="font-size: 14.58px;">Php</a> <a href="/tags/Puppet/" style="font-size: 11.25px;">Puppet</a> <a href="/tags/Python/" style="font-size: 14.58px;">Python</a> <a href="/tags/Redis/" style="font-size: 16.25px;">Redis</a> <a href="/tags/Resin/" style="font-size: 10px;">Resin</a> <a href="/tags/Saltstack/" style="font-size: 10px;">Saltstack</a> <a href="/tags/Samba/" style="font-size: 12.08px;">Samba</a> <a href="/tags/Squid/" style="font-size: 14.58px;">Squid</a> <a href="/tags/Tomcat/" style="font-size: 13.75px;">Tomcat</a> <a href="/tags/Zabbix/" style="font-size: 15.83px;">Zabbix</a> <a href="/tags/haproxy/" style="font-size: 12.5px;">haproxy</a> <a href="/tags/keepalived/" style="font-size: 12.92px;">keepalived</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/shell练习/" style="font-size: 18.75px;">shell练习</a> <a href="/tags/正则表达式/" style="font-size: 12.92px;">正则表达式</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">失落的乐章</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://github.com/hcldirgit/image/blob/master/0.png?raw=true" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">失落的乐章</h1>
			</hgroup>
			
			<p class="header-subtitle">技术面前，永远都是学生。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags">静心阅读</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-2. Linux 命令/54. Linux 命令- ifconfig" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/54. Linux 命令- ifconfig/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.278Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/54. Linux 命令- ifconfig/">
        Linux 命令- ifconfig
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;许多windows非常熟悉ipconfig命令行工具，它被用来获取网络接口配置信息并对此进行修改。Linux系统拥有一个类似的工具，也就是ifconfig(interfaces config)。通常需要以root身份登录或使用sudo以便在Linux机器上使用ifconfig工具。依赖于ifconfig命令中使用一些选项属性，ifconfig工具不仅可以被用来简单地获取网络接口配置信息，还可以修改这些配置。</p>
<h2 id="1．命令格式"><a href="#1．命令格式" class="headerlink" title="1．命令格式"></a>1．命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ifconfig [网络设备] [参数]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能"><a href="#2．命令功能" class="headerlink" title="2．命令功能"></a>2．命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifconfig 命令用来查看和配置网络设备。当网络环境发生改变时可通过此命令对网络进行相应的配置。</p>
<h2 id="3．命令参数"><a href="#3．命令参数" class="headerlink" title="3．命令参数"></a>3．命令参数</h2><ul>
<li>up 启动指定网络设备/网卡。</li>
<li>down 关闭指定网络设备/网卡。该参数可以有效地阻止通过指定接口的IP信息流，如果想永久地关闭一个接口，我们还需要从核心路由表中将该接口的路由信息全部删除。</li>
<li>arp 设置指定网卡是否支持ARP协议。</li>
<li>-promisc 设置是否支持网卡的promiscuous模式，如果选择此参数，网卡将接收网络中发给它所有的数据包</li>
<li>-allmulti 设置是否支持多播模式，如果选择此参数，网卡将接收网络中所有的多播数据包</li>
<li>-a 显示全部接口信息</li>
<li>-s 显示摘要信息（类似于 netstat -i）</li>
<li>add 给指定网卡配置IPv6地址</li>
<li>del 删除指定网卡的IPv6地址</li>
<li>&lt;硬件地址&gt; 配置网卡最大的传输单元</li>
<li>mtu&lt;字节数&gt; 设置网卡的最大传输单元 (bytes)</li>
<li>netmask&lt;子网掩码&gt; 设置网卡的子网掩码。掩码可以是有前缀0x的32位十六进制数，也可以是用点分开的4个十进制数。如果不打算将网络分成子网，可以不管这一选项；如果要使用子网，那么请记住，网络中每一个系统必须有相同子网掩码。</li>
<li>tunel 建立隧道</li>
<li>dstaddr 设定一个远端地址，建立点对点通信</li>
<li>-broadcast&lt;地址&gt; 为指定网卡设置广播协议</li>
<li>-pointtopoint&lt;地址&gt; 为网卡设置点对点通讯协议</li>
<li>multicast 为网卡设置组播标志</li>
<li>address 为网卡设置IPv4地址</li>
<li>txqueuelen&lt;长度&gt; 为网卡设置传输列队的长度</li>
</ul>
<h2 id="4．使用实例"><a href="#4．使用实例" class="headerlink" title="4．使用实例"></a>4．使用实例</h2><h3 id="实例1：显示网络设备信息（激活状态的）"><a href="#实例1：显示网络设备信息（激活状态的）" class="headerlink" title="实例1：显示网络设备信息（激活状态的）"></a>实例1：显示网络设备信息（激活状态的）</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ifconfig</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ifconfig</span></div><div class="line">eth0      Link encap:Ethernet  HWaddr 00:50:56:BF:26:20  </div><div class="line">          inet addr:192.168.120.204  Bcast:192.168.120.255  Mask:255.255.255.0</div><div class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</div><div class="line">          RX packets:8700857 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:31533 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:1000 </div><div class="line">          RX bytes:596390239 (568.7 MiB)  TX bytes:2886956 (2.7 MiB)</div><div class="line"></div><div class="line">lo        Link encap:Local Loopback  </div><div class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</div><div class="line">          UP LOOPBACK RUNNING  MTU:16436  Metric:1</div><div class="line">          RX packets:68 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:68 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:0 </div><div class="line">          RX bytes:2856 (2.7 KiB)  TX bytes:2856 (2.7 KiB)</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li>eth0 表示第一块网卡， 其中 HWaddr 表示网卡的物理地址，可以看到目前这个网卡的物理地址(MAC地址）是 00:50:56:BF:26:20</li>
<li>inet addr 用来表示网卡的IP地址，此网卡的 IP地址是 192.168.120.204，广播地址， Bcast:192.168.120.255，掩码地址Mask:255.255.255.0 </li>
<li>lo 是表示主机的回坏地址，这个一般是用来测试一个网络程序，但又不想让局域网或外网的用户能够查看，只能在此台主机上运行和查看所用的网络接口。比如把 HTTPD服务器的指定到回坏地址，在浏览器输入 127.0.0.1 就能看到你所架WEB网站了。但只是您能看得到，局域网的其它主机或用户无从知道。</li>
<li>第一行：连接类型：Ethernet（以太网）HWaddr（硬件mac地址）</li>
<li>第二行：网卡的IP地址、子网、掩码</li>
<li>第三行：UP（代表网卡开启状态）RUNNING（代表网卡的网线被接上）MULTICAST（支持组播）MTU:1500（最大传输单元）：1500字节</li>
<li>第四、五行：接收、发送数据包情况统计</li>
<li>第七行：接收、发送数据字节数统计信息。</li>
</ul>
<h3 id="实例2：启动关闭指定网卡"><a href="#实例2：启动关闭指定网卡" class="headerlink" title="实例2：启动关闭指定网卡"></a>实例2：启动关闭指定网卡</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ifconfig eth0 up</div><div class="line">ifconfig eth0 down</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong><br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifconfig eth0 up 为启动网卡eth0 ；ifconfig eth0 down 为关闭网卡eth0。ssh登陆linux服务器操作要小心，关闭了就不能开启了，除非你有多网卡。</p>
<h3 id="实例3：为网卡配置和删除IPv6地址"><a href="#实例3：为网卡配置和删除IPv6地址" class="headerlink" title="实例3：为网卡配置和删除IPv6地址"></a>实例3：为网卡配置和删除IPv6地址</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ifconfig eth0 add 33ffe:3240:800:1005::2/64</div><div class="line">ifconfig eth0 del 33ffe:3240:800:1005::2/64</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li>ifconfig eth0 add 33ffe:3240:800:1005::2/64 为网卡eth0配置IPv6地址；</li>
<li>ifconfig eth0 add 33ffe:3240:800:1005::2/64 为网卡eth0删除IPv6地址；</li>
</ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>练习的时候，ssh登陆linux服务器操作要小心，关闭了就不能开启了，除非有多网卡。</strong></p>
<h3 id="实例4：用ifconfig修改MAC地址"><a href="#实例4：用ifconfig修改MAC地址" class="headerlink" title="实例4：用ifconfig修改MAC地址"></a>实例4：用ifconfig修改MAC地址</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ifconfig eth0 hw ether 00:AA:BB:CC:DD:EE</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ifconfig eth0 down //关闭网卡</span></div><div class="line">[root@localhost ~]<span class="comment"># ifconfig eth0 hw ether 00:AA:BB:CC:DD:EE //修改MAC地址</span></div><div class="line">[root@localhost ~]<span class="comment"># ifconfig eth0 up //启动网卡</span></div><div class="line">[root@localhost ~]<span class="comment"># ifconfig</span></div><div class="line">eth0      Link encap:Ethernet  HWaddr 00:AA:BB:CC:DD:EE  </div><div class="line">          inet addr:192.168.120.204  Bcast:192.168.120.255  Mask:255.255.255.0</div><div class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</div><div class="line">          RX packets:8700857 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:31533 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:1000 </div><div class="line">          RX bytes:596390239 (568.7 MiB)  TX bytes:2886956 (2.7 MiB)</div><div class="line"></div><div class="line">lo        Link encap:Local Loopback  </div><div class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</div><div class="line">          UP LOOPBACK RUNNING  MTU:16436  Metric:1</div><div class="line">          RX packets:68 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:68 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:0 </div><div class="line">          RX bytes:2856 (2.7 KiB)  TX bytes:2856 (2.7 KiB)</div><div class="line">[root@localhost ~]<span class="comment"># ifconfig eth0 hw ether 00:50:56:BF:26:20 //关闭网卡并修改MAC地址 </span></div><div class="line">[root@localhost ~]<span class="comment"># ifconfig eth0 up //启动网卡</span></div><div class="line">[root@localhost ~]<span class="comment"># ifconfig</span></div><div class="line">eth0      Link encap:Ethernet  HWaddr 00:50:56:BF:26:20  </div><div class="line">          inet addr:192.168.120.204  Bcast:192.168.120.255  Mask:255.255.255.0</div><div class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</div><div class="line">          RX packets:8700857 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:31533 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:1000 </div><div class="line">          RX bytes:596390239 (568.7 MiB)  TX bytes:2886956 (2.7 MiB)</div><div class="line"></div><div class="line">lo        Link encap:Local Loopback  </div><div class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</div><div class="line">          UP LOOPBACK RUNNING  MTU:16436  Metric:1</div><div class="line">          RX packets:68 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:68 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:0 </div><div class="line">          RX bytes:2856 (2.7 KiB)  TX bytes:2856 (2.7 KiB)</div></pre></td></tr></table></figure>
<h3 id="实例5：配置IP地址"><a href="#实例5：配置IP地址" class="headerlink" title="实例5：配置IP地址"></a>实例5：配置IP地址</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ifconfig eth0 192.168.120.56 </span></div><div class="line">[root@localhost ~]<span class="comment"># ifconfig eth0 192.168.120.56 netmask 255.255.255.0 </span></div><div class="line">[root@localhost ~]<span class="comment"># ifconfig eth0 192.168.120.56 netmask 255.255.255.0 broadcast 192.168.120.255</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifconfig eth0 192.168.120.56</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;给eth0网卡配置IP地：192.168.120.56</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifconfig eth0 192.168.120.56 netmask 255.255.255.0</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;给eth0网卡配置IP地址：192.168.120.56 ，并加上子掩码：255.255.255.0</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifconfig eth0 192.168.120.56 netmask 255.255.255.0 broadcast 192.168.120.255</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/给eth0网卡配置IP地址：192.168.120.56，加上子掩码：255.255.255.0，加上个广播地址： 192.168.120.255</p>
<h3 id="实例6：启用和关闭ARP协议"><a href="#实例6：启用和关闭ARP协议" class="headerlink" title="实例6：启用和关闭ARP协议"></a>实例6：启用和关闭ARP协议</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ifconfig eth0 arp</div><div class="line">ifconfig eth0 -arp</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ifconfig eth0 arp </span></div><div class="line">[root@localhost ~]<span class="comment"># ifconfig eth0 -arp</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifconfig eth0 arp 开启网卡eth0 的arp协议；</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifconfig eth0 -arp 关闭网卡eth0 的arp协议；</p>
<h3 id="实例7：设置最大传输单元"><a href="#实例7：设置最大传输单元" class="headerlink" title="实例7：设置最大传输单元"></a>实例7：设置最大传输单元</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ifconfig eth0 mtu 1500</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># ifconfig eth0 mtu 1480</span></div><div class="line">[root@localhost ~]<span class="comment"># ifconfig</span></div><div class="line">eth0      Link encap:Ethernet  HWaddr 00:50:56:BF:26:1F  </div><div class="line">          inet addr:192.168.120.203  Bcast:192.168.120.255  Mask:255.255.255.0</div><div class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1480  Metric:1</div><div class="line">          RX packets:8712395 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:36631 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:1000 </div><div class="line">          RX bytes:597062089 (569.4 MiB)  TX bytes:2643973 (2.5 MiB)</div><div class="line"></div><div class="line">lo        Link encap:Local Loopback  </div><div class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</div><div class="line">          UP LOOPBACK RUNNING  MTU:16436  Metric:1</div><div class="line">          RX packets:9973 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:9973 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:0 </div><div class="line">          RX bytes:518096 (505.9 KiB)  TX bytes:518096 (505.9 KiB)</div><div class="line"></div><div class="line">[root@localhost ~]<span class="comment"># ifconfig eth0 mtu 1500</span></div><div class="line">[root@localhost ~]<span class="comment"># ifconfig</span></div><div class="line">eth0      Link encap:Ethernet  HWaddr 00:50:56:BF:26:1F  </div><div class="line">          inet addr:192.168.120.203  Bcast:192.168.120.255  Mask:255.255.255.0</div><div class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</div><div class="line">          RX packets:8712548 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:36685 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:1000 </div><div class="line">          RX bytes:597072333 (569.4 MiB)  TX bytes:2650581 (2.5 MiB)</div><div class="line"></div><div class="line">lo        Link encap:Local Loopback  </div><div class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</div><div class="line">          UP LOOPBACK RUNNING  MTU:16436  Metric:1</div><div class="line">          RX packets:9973 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:9973 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:0 </div><div class="line">          RX bytes:518096 (505.9 KiB)  TX bytes:518096 (505.9 KiB)</div><div class="line"></div><div class="line">[root@localhost ~]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;设置能通过的最大数据包大小为 1500 bytes</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;备注：用ifconfig命令配置的网卡信息，在网卡重启后机器重启后，配置就不存在。要想将上述的配置信息永远的存的电脑里，那就要修改网卡的配置文件了。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/30. Linux 命令- chown" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/30. Linux 命令- chown/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.277Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/30. Linux 命令- chown/">
        Linux 命令- chown
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;chown将指定文件的拥有者改为指定的用户或组，用户可以是用户名或者用户ID；组可以是组名或者组ID；文件是以空格分开的要改变权限的文件列表，支持通配符。系统管理员经常使用chown命令，在将文件拷贝到另一个用户的名录下之后，让用户拥有使用该文件的权限。 </p>
<h2 id="1-命令格式"><a href="#1-命令格式" class="headerlink" title="1.命令格式"></a>1.命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chown [选项] [所有者]:[组] [文件]</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2.命令功能"></a>2.命令功能</h2><h3 id="必要参数"><a href="#必要参数" class="headerlink" title="必要参数"></a>必要参数</h3><ul>
<li>-c 显示更改的部分的信息</li>
<li>-f 忽略错误信息</li>
<li>-h 修复符号链接</li>
<li>-R 处理指定目录以及其子目录下的所有文件</li>
<li>-v 显示详细的处理信息</li>
<li>-deference 作用于符号链接的指向，而不是链接文件本身</li>
</ul>
<h3 id="选择参数"><a href="#选择参数" class="headerlink" title="选择参数"></a>选择参数</h3><ul>
<li>–reference=&lt;目录或文件&gt; 把指定的目录/文件作为参考，把操作的文件/目录设置成参考文件/目录相同拥有者和群组</li>
<li>–from=&lt;当前用户：当前群组&gt; 只有当前用户和群组跟指定的用户和群组相同时才进行改变</li>
<li>–help 显示帮助信息</li>
<li>–version 显示版本信息</li>
</ul>
<h2 id="4-使用实例"><a href="#4-使用实例" class="headerlink" title="4.使用实例"></a>4.使用实例</h2><h3 id="实例1-改变拥有者和群组"><a href="#实例1-改变拥有者和群组" class="headerlink" title="实例1.改变拥有者和群组"></a>实例1.改变拥有者和群组</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chown mail:mail log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">---xr--r-- 1 root users 302108 11-30 08:39 linklog.log</div><div class="line">---xr--r-- 1 root users 302108 11-30 08:39 log2012.log</div><div class="line">-rw-r--r-- 1 root users     61 11-30 08:39 log2013.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2014.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2015.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2016.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2017.log</div><div class="line">[root@localhost test6]<span class="comment"># chown mail:mail log2012.log </span></div><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">---xr--r-- 1 root users 302108 11-30 08:39 linklog.log</div><div class="line">---xr--r-- 1 mail mail  302108 11-30 08:39 log2012.log</div><div class="line">-rw-r--r-- 1 root users     61 11-30 08:39 log2013.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2014.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2015.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2016.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2017.log</div><div class="line">[root@localhost test6]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;将文件 log2012.log 的属主 root 和 属组 users 改变为 属主 mail 和属组 mail</p>
<h3 id="实例2-改变文件拥有者和群组"><a href="#实例2-改变文件拥有者和群组" class="headerlink" title="实例2.改变文件拥有者和群组"></a>实例2.改变文件拥有者和群组</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chown root: log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 604</div><div class="line">---xr--r-- 1 root users 302108 11-30 08:39 linklog.log</div><div class="line">---xr--r-- 1 mail mail  302108 11-30 08:39 log2012.log</div><div class="line">-rw-r--r-- 1 root users     61 11-30 08:39 log2013.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2014.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2015.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2016.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2017.log</div><div class="line">[root@localhost test6]<span class="comment"># chown root: log2012.log </span></div><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 604</div><div class="line">---xr--r-- 1 root users 302108 11-30 08:39 linklog.log</div><div class="line">---xr--r-- 1 root root  302108 11-30 08:39 log2012.log</div><div class="line">-rw-r--r-- 1 root users     61 11-30 08:39 log2013.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2014.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2015.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2016.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2017.log</div><div class="line">[root@localhost test6]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;将文件 log2012.log 的属主和属组改变为 root</p>
<h3 id="实例3-改变文件群组"><a href="#实例3-改变文件群组" class="headerlink" title="实例3.改变文件群组"></a>实例3.改变文件群组</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chown :mail log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 604</div><div class="line">---xr--r-- 1 root users 302108 11-30 08:39 linklog.log</div><div class="line">---xr--r-- 1 root root  302108 11-30 08:39 log2012.log</div><div class="line">-rw-r--r-- 1 root users     61 11-30 08:39 log2013.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2014.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2015.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2016.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2017.log</div><div class="line">[root@localhost test6]<span class="comment"># chown :mail log2012.log </span></div><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 604</div><div class="line">---xr--r-- 1 root users 302108 11-30 08:39 linklog.log</div><div class="line">---xr--r-- 1 root mail  302108 11-30 08:39 log2012.log</div><div class="line">-rw-r--r-- 1 root users     61 11-30 08:39 log2013.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2014.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2015.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2016.log</div><div class="line">-rw-r--r-- 1 root users      0 11-30 08:39 log2017.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;只把文件 log2012.log 的属组改变为 mail 属主不变</p>
<h3 id="实例4-改变指定目录以及其字目录下的所有文件的拥有者和群组"><a href="#实例4-改变指定目录以及其字目录下的所有文件的拥有者和群组" class="headerlink" title="实例4.改变指定目录以及其字目录下的所有文件的拥有者和群组"></a>实例4.改变指定目录以及其字目录下的所有文件的拥有者和群组</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chown -R -v root:mail test6</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">drwxr-xr-x 2 root users   4096 11-30 08:39 test6</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># chown -R -v root:mail test6</span></div><div class="line">“test6/log2014.log” 的所有者已更改为 root:mail</div><div class="line">“test6/linklog.log” 的所有者已更改为 root:mail</div><div class="line">“test6/log2015.log” 的所有者已更改为 root:mail</div><div class="line">“test6/log2013.log” 的所有者已更改为 root:mail</div><div class="line">“test6/log2012.log” 的所有者已保留为 root:mail</div><div class="line">“test6/log2017.log” 的所有者已更改为 root:mail</div><div class="line">“test6/log2016.log” 的所有者已更改为 root:mail</div><div class="line">“test6” 的所有者已更改为 root:mail</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">drwxr-xr-x 2 root mail   4096 11-30 08:39 test6</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test6</span></div><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 604</div><div class="line">---xr--r-- 1 root mail 302108 11-30 08:39 linklog.log</div><div class="line">---xr--r-- 1 root mail 302108 11-30 08:39 log2012.log</div><div class="line">-rw-r--r-- 1 root mail     61 11-30 08:39 log2013.log</div><div class="line">-rw-r--r-- 1 root mail      0 11-30 08:39 log2014.log</div><div class="line">-rw-r--r-- 1 root mail      0 11-30 08:39 log2015.log</div><div class="line">-rw-r--r-- 1 root mail      0 11-30 08:39 log2016.log</div><div class="line">-rw-r--r-- 1 root mail      0 11-30 08:39 log2017.log</div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/78.Linux 命令- sar" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/78.Linux 命令- sar/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.276Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/78.Linux 命令- sar/">
        Linux 命令- sar
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sar（System ActivityReporter系统活动情况报告）是目前Linux上最为全面的系统性能分析工具之一，可以从多方面对系统的活动进行报告，包括：文件的读写情况、系统调用的使用情况、磁盘I/O、CPU效率、内存使用状况、进程活动及IPC有关的活动等。它不同于其他系统状态监控工具的地方在于，它可以打印历史信息，可以显示当天从零点开始到当前时刻的系统状态信息。如果你系统没有安装这个命令，请使用 <code>yum install  -y sysstat</code> 命令安装。初次使用sar命令会报错，那是因为sar工具还没有生成相应的数据库文件（时时监控就不会了，因为不用去查询那个库文件）。它的数据库文件在 “/var/log/sa/” 目录下，默认保存一个月。</p>
<h2 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar [选项] [时间间隔] [次数]</div></pre></td></tr></table></figure>
<h2 id="命令选项"><a href="#命令选项" class="headerlink" title="命令选项"></a>命令选项</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sar命令的选项很多，下面只列出常用选项：</p>
<ul>
<li><p>-A:所有报告的总和</p>
</li>
<li><p>-b:显示I/O和传递速率的统计信息</p>
</li>
<li><p>-B:显示换页状态</p>
</li>
<li><p>-d:输出每一块磁盘的使用信息</p>
</li>
<li><p>-e:设置显示报告的结束时间</p>
</li>
<li><p>-f:从制定的文件读取报告</p>
</li>
<li><p>-i:设置状态信息刷新的间隔时间</p>
</li>
<li><p>-P:报告每个CPU的状态</p>
</li>
<li><p>-R:显示内存状态</p>
</li>
<li><p>–u:输出cpu使用情况和统计信息</p>
</li>
<li><p>–v:显示索引节点、文件和其他内核表的状态</p>
</li>
<li><p>-w:显示交换分区的状态</p>
</li>
<li><p>-x:显示给定进程的装</p>
</li>
<li><p>-r:报告内存利用率的统计信息</p>
</li>
</ul>
<h2 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h2><h3 id="实例1：统计CPU的使用情况，每间隔1秒钟统计一次，总共统计三次"><a href="#实例1：统计CPU的使用情况，每间隔1秒钟统计一次，总共统计三次" class="headerlink" title="实例1：统计CPU的使用情况，每间隔1秒钟统计一次，总共统计三次"></a>实例1：统计CPU的使用情况，每间隔1秒钟统计一次，总共统计三次</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -u 1 3</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sar -u 1 3</span></div><div class="line">Linux 2.6.32-431.el6.x86_64 (localhost)         2017年07月12日  _x86_64_        (4 CPU)</div><div class="line"></div><div class="line">13时27分59秒     CPU     %user     %nice   %system   %iowait    %steal     %idle</div><div class="line">13时28分00秒     all      0.00      0.00      0.50      0.00      0.00     99.50</div><div class="line">13时28分01秒     all      0.00      0.00      0.25      0.00      0.00     99.75</div><div class="line">13时28分02秒     all      0.25      0.00      1.00      0.50      0.00     98.26</div><div class="line">平均时间:     all      0.08      0.00      0.58      0.17      0.00     99.17</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong>      </p>
<ul>
<li><p>#%user #用户空间的CPU使用</p>
</li>
<li><p>#%nice 改变过优先级的进程的CPU使用率</p>
</li>
<li><p>#%system 内核空间的CPU使用率</p>
</li>
<li><p>#%iowait CPU等待IO的百分比 </p>
</li>
<li><p>#%steal 虚拟机的虚拟机CPU使用的CPU</p>
</li>
<li><p>#%idle 空闲的CPU</p>
</li>
</ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在以上的显示当中，主要看%iowait和%idle，%iowait过高表示存在I/O瓶颈，即磁盘IO无法满足业务需求，如果%idle过低表示CPU使用率比较严重，需要结合内存使用等情况判断CPU是否瓶颈。</p>
<h3 id="实例2：每个CPU的使用状态"><a href="#实例2：每个CPU的使用状态" class="headerlink" title="实例2：每个CPU的使用状态"></a>实例2：每个CPU的使用状态</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -p 1 3</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sar -p 1 3 </span></div><div class="line">Linux 2.6.32-431.el6.x86_64 (localhost)         2017年07月12日  _x86_64_        (4 CPU)</div><div class="line"></div><div class="line">13时31分16秒     CPU     %user     %nice   %system   %iowait    %steal     %idle</div><div class="line">13时31分17秒     all      0.00      0.00      0.25      0.00      0.00     99.75</div><div class="line">13时31分18秒     all      0.25      0.00      0.50      0.00      0.00     99.26</div><div class="line">13时31分19秒     all      0.00      0.00      0.25      0.00      0.00     99.75</div><div class="line">平均时间:     all      0.08      0.00      0.33      0.00      0.00     99.58</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li><p>#CPU 所有CPU的统计</p>
</li>
<li><p>#%user 用户态的CPU使用统计</p>
</li>
<li><p>#%nice 更改过优先级的进程的CPU使用统计</p>
</li>
<li><p>#%iowait CPU等待IO数据的百分比</p>
</li>
<li><p>#%steal 虚拟机的vCPU占用的物理CPU的百分比</p>
</li>
<li><p>#%idle 空闲的CPU百分比</p>
</li>
</ul>
<h3 id="实例3：查看平均负载"><a href="#实例3：查看平均负载" class="headerlink" title="实例3：查看平均负载"></a>实例3：查看平均负载</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -q</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sar -q 2 2</span></div><div class="line">Linux 2.6.32-431.el6.x86_64 (localhost)         2017年07月12日  _x86_64_        (4 CPU)</div><div class="line"></div><div class="line">13时35分07秒   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15</div><div class="line">13时35分09秒         0       167      0.00      0.00      0.00</div><div class="line">13时35分11秒         0       167      0.00      0.00      0.00</div><div class="line">平均时间:         0       167      0.00      0.00      0.00</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li><p>#runq-sz  运行队列的长度（等待运行的进程数，每核的CP不能超过3个）</p>
</li>
<li><p>#plist-sz 进程列表中的进程（processes）和线程数（threads）的数量</p>
</li>
<li><p>#ldavg-1 最后1分钟的CPU平均负载，即将多核CPU过去一分钟的负载相加再除以核心数得出的平均值，5分钟和15分钟以此类推</p>
</li>
<li><p>#ldavg-5 最后5分钟的CPU平均负载</p>
</li>
<li><p>#ldavg-15 最后15分钟的CPU平均负载</p>
</li>
</ul>
<h3 id="实例4：查看内存使用情况"><a href="#实例4：查看内存使用情况" class="headerlink" title="实例4：查看内存使用情况"></a>实例4：查看内存使用情况</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -r</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sar -r 1 2</span></div><div class="line">Linux 2.6.32-431.el6.x86_64 (localhost)         2017年07月12日  _x86_64_        (4 CPU)</div><div class="line"></div><div class="line">13时38分01秒 kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit</div><div class="line">13时38分02秒   1507864    398688     20.91     19632    176552    237716      3.90</div><div class="line">13时38分03秒   1507864    398688     20.91     19632    176552    237716      3.90</div><div class="line">平均时间:   1507864    398688     20.91     19632    176552    237716      3.90</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li><p>#kbmemfree  空闲的物理内存大小</p>
</li>
<li><p>#kbmemused  使用中的物理内存大小</p>
</li>
<li><p>#%memused 物理内存使用率</p>
</li>
<li><p>#kbbuffers 内核中作为缓冲区使用的物理内存大小，kbbuffers和kbcached:这两个值就是free命令中的buffer和cache. </p>
</li>
<li><p>#kbcached 缓存的文件大小</p>
</li>
<li><p>#kbcommit  保证当前系统正常运行所需要的最小内存，即为了确保内存不溢出而需要的最少内存（物理内存+Swap分区）</p>
</li>
<li><p>#commit 这个值是kbcommit与内存总量（物理内存+swap分区）的一个百分比的值</p>
</li>
</ul>
<h3 id="实例5：查看系统swap分区的统计信息"><a href="#实例5：查看系统swap分区的统计信息" class="headerlink" title="实例5：查看系统swap分区的统计信息"></a>实例5：查看系统swap分区的统计信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -W</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sar -W 1 2</span></div><div class="line">Linux 2.6.32-431.el6.x86_64 (localhost)         2017年07月12日  _x86_64_        (4 CPU)</div><div class="line"></div><div class="line">13时40分51秒  pswpin/s pswpout/s</div><div class="line">13时40分52秒      0.00      0.00</div><div class="line">13时40分53秒      0.00      0.00</div><div class="line">平均时间:      0.00      0.00</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li><p>#pswpin/s  每秒从交换分区到系统的交换页面（swap page）数量</p>
</li>
<li><p>#pswpott/s 每秒从系统交换到swap的交换页面（swap page）的数量</p>
</li>
</ul>
<h3 id="实例6：查看I-O和传递速率的统计信息"><a href="#实例6：查看I-O和传递速率的统计信息" class="headerlink" title="实例6：查看I/O和传递速率的统计信息"></a>实例6：查看I/O和传递速率的统计信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -b</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sar -b 1 3</span></div><div class="line">Linux 2.6.32-431.el6.x86_64 (localhost)         2017年07月12日  _x86_64_        (4 CPU)</div><div class="line"></div><div class="line">13时43分10秒       tps      rtps      wtps   bread/s   bwrtn/s</div><div class="line">13时43分11秒      0.00      0.00      0.00      0.00      0.00</div><div class="line">13时43分12秒      0.00      0.00      0.00      0.00      0.00</div><div class="line">13时43分13秒      0.00      0.00      0.00      0.00      0.00</div><div class="line">平均时间:      0.00      0.00      0.00      0.00      0.00</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li><p>#tps  磁盘每秒钟的IO总数，等于iostat中的tps</p>
</li>
<li><p>#rtps 每秒钟从磁盘读取的IO总数</p>
</li>
<li><p>#wtps 每秒钟从写入到磁盘的IO总数</p>
</li>
<li><p>#bread/s 每秒钟从磁盘读取的块总数</p>
</li>
<li><p>#bwrtn/s 每秒钟此写入到磁盘的块总数</p>
</li>
</ul>
<h3 id="实例7：磁盘使用详情统计"><a href="#实例7：磁盘使用详情统计" class="headerlink" title="实例7：磁盘使用详情统计"></a>实例7：磁盘使用详情统计</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -d</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sar -d 1 3</span></div><div class="line">Linux 2.6.32-431.el6.x86_64 (localhost)         2017年07月12日  _x86_64_        (4 CPU)</div><div class="line"></div><div class="line">13时45分57秒       DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util</div><div class="line">13时45分58秒   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div><div class="line">13时45分58秒    dev8-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div><div class="line"></div><div class="line">13时45分58秒       DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util</div><div class="line">13时45分59秒   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div><div class="line">13时45分59秒    dev8-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div><div class="line"></div><div class="line">13时45分59秒       DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util</div><div class="line">13时46分00秒   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div><div class="line">13时46分00秒    dev8-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div><div class="line"></div><div class="line">平均时间:       DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util</div><div class="line">平均时间:   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div><div class="line">平均时间:    dev8-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li><p>#DEV 磁盘设备的名称，如果不加-p，会显示dev253-0类似的设备名称，因此加上-p显示的名称更直接</p>
</li>
<li><p>#tps：每秒I/O的传输总数</p>
</li>
<li><p>#rd_sec/s 每秒读取的扇区的总数</p>
</li>
<li><p>#wr_sec/s 每秒写入的扇区的 总数</p>
</li>
<li><p>#avgrq-sz 平均每次次磁盘I/O操作的数据大小（扇区）</p>
</li>
<li><p>#avgqu-sz 磁盘请求队列的平均长度</p>
</li>
<li><p>#await 从请求磁盘操作到系统完成处理，每次请求的平均消耗时间，包括请求队列等待时间，单位是毫秒（1秒等于1000毫秒），等于寻道时间+队列时间+服务时间</p>
</li>
<li><p>#svctm I/O的服务处理时间，即不包括请求队列中的时间</p>
</li>
<li><p>#%util I/O请求占用的CPU百分比，值越高，说明I/O越慢</p>
</li>
</ul>
<h3 id="实例8：进程、inode、文件和锁表状态"><a href="#实例8：进程、inode、文件和锁表状态" class="headerlink" title="实例8：进程、inode、文件和锁表状态"></a>实例8：进程、inode、文件和锁表状态</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -v</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sar -v 1 3</span></div><div class="line">Linux 2.6.32-431.el6.x86_64 (localhost)         2017年07月12日  _x86_64_        (4 CPU)</div><div class="line"></div><div class="line">13时49分02秒 dentunusd   file-nr  inode-nr    pty-nr</div><div class="line">13时49分03秒     16295       672     12498         2</div><div class="line">13时49分04秒     16295       672     12498         2</div><div class="line">13时49分05秒     16295       672     12498         2</div><div class="line">平均时间:     16295       672     12498         2</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li><p>#dentunusd 在缓冲目录条目中没有使用的条目数量</p>
</li>
<li><p>#file-nr 被系统使用的文件句柄数量</p>
</li>
<li><p>#inode-nr 已经使用的索引数量 </p>
</li>
<li><p>#pty-nr 使用的pty数量</p>
</li>
</ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这里面的索引和文件句柄值不是ulimit -a查看到的值，而是sysctl.conf里面定义的和内核相关的值， max-file表示系统级别的能够打开的文件句柄的数量， 而ulimit -n控制进程级别能够打开的文件句柄的数量，可以使用sysctl  -a | grep inode和sysctl  -a | grep file查看，具体含义如下：</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;file-max中指定了系统范围内所有进程可打开的文件句柄的数量限制(系统级别， kernel-level)。 （The value in file-max denotes the maximum number of file handles that the Linux kernel will allocate）。当收到”Too many open files in system”这样的错误消息时， 就应该曾加这个值了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># cat /proc/sys/fs/file-max</span></div><div class="line">4096</div><div class="line"><span class="comment"># echo 100000 &gt; /proc/sys/fs/file-max</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;或者</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># echo ""fs.file-max=65535" &gt;&gt; /etc/sysctl.conf</span></div><div class="line"><span class="comment"># sysctl -p</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;file-nr 可以查看系统中当前打开的文件句柄的数量。 他里面包括3个数字： 第一个表示已经分配了的文件描述符数量， 第二个表示空闲的文件句柄数量， 第三个表示能够打开文件句柄的最大值（跟file-max一致）。  内核会动态的分配文件句柄， 但是不会再次释放他们（这个可能不适应最新的内核了， 在我的file-nr中看到第二列一直为0， 第一列有增有减）    </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;man bash， 找到说明ulimit的那一节：提供对shell及其启动的进程的可用资源（包括文件句柄， 进程数量， core文件大小等）的控制。 这是进程级别的， 也就是说系统中某个session及其启动的每个进程能打开多少个文件描述符， 能fork出多少个子进程等… 当达到上限时， 会报错”Too many open files”或者遇上Socket/File: Can’t open so many files等</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sysctl fs.file-nr</span></div><div class="line">fs.file-nr = 672        0       187015</div><div class="line">You have new mail <span class="keyword">in</span> /var/spool/mail/root</div><div class="line">[root@localhost ~]<span class="comment"># sysctl -a | grep fs.file-nr</span></div><div class="line">fs.file-nr = 672        0       187015</div></pre></td></tr></table></figure>
<h3 id="实例9：统计网络信息"><a href="#实例9：统计网络信息" class="headerlink" title="实例9：统计网络信息"></a>实例9：统计网络信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -n</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sar -n选项使用6个不同的开关：DEV，EDEV，NFS，NFSD，SOCK，IP，EIP，ICMP，EICMP，TCP，ETCP，UDP，SOCK6，IP6，EIP6，ICMP6，EICMP6和UDP6 ，DEV显示网络接口信息，EDEV显示关于网络错误的统计数据，NFS统计活动的NFS客户端的信息，NFSD统计NFS服务器的信息，SOCK显示套接字信息，ALL显示所有5个开关。它们可以单独或者一起使用。 </p>
<h4 id="每间隔1秒统计一次，总计统计1次"><a href="#每间隔1秒统计一次，总计统计1次" class="headerlink" title="每间隔1秒统计一次，总计统计1次"></a>每间隔1秒统计一次，总计统计1次</h4><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -n DEV 1 1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sar -n DEV 1 1</span></div><div class="line">Linux 2.6.32-431.el6.x86_64 (localhost)         2017年07月12日  _x86_64_        (4 CPU)</div><div class="line"></div><div class="line">13时56分20秒     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s</div><div class="line">13时56分21秒        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div><div class="line">13时56分21秒      eth0      1.01      1.01      0.06      0.17      0.00      0.00      0.00</div><div class="line"></div><div class="line">平均时间:     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s</div><div class="line">平均时间:        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div><div class="line">平均时间:      eth0      1.01      1.01      0.06      0.17      0.00      0.00      0.00</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li><p>#IFACE 本地网卡接口的名称</p>
</li>
<li><p>#rxpck/s 每秒钟接受的数据包</p>
</li>
<li><p>#txpck/s 每秒钟发送的数据库</p>
</li>
<li><p>#rxKB/S 每秒钟接受的数据包大小，单位为KB</p>
</li>
<li><p>#txKB/S 每秒钟发送的数据包大小，单位为KB</p>
</li>
<li><p>#rxcmp/s 每秒钟接受的压缩数据包</p>
</li>
<li><p>#txcmp/s 每秒钟发送的压缩包</p>
</li>
<li><p>#rxmcst/s 每秒钟接收的多播数据包</p>
</li>
</ul>
<h4 id="统计网络设备通信失败信息"><a href="#统计网络设备通信失败信息" class="headerlink" title="统计网络设备通信失败信息"></a>统计网络设备通信失败信息</h4><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -n EDEV 1 1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sar -n EDEV 1 1</span></div><div class="line">Linux 2.6.32-431.el6.x86_64 (localhost)         2017年07月12日  _x86_64_        (4 CPU)</div><div class="line"></div><div class="line">13时59分23秒     IFACE   rxerr/s   txerr/s    coll/s  rxdrop/s  txdrop/s  txcarr/s  rxfram/s  rxfifo/s  txfifo/s</div><div class="line">13时59分24秒        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div><div class="line">13时59分24秒      eth0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div><div class="line"></div><div class="line">平均时间:     IFACE   rxerr/s   txerr/s    coll/s  rxdrop/s  txdrop/s  txcarr/s  rxfram/s  rxfifo/s  txfifo/s</div><div class="line">平均时间:        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div><div class="line">平均时间:      eth0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li><p>#IFACE 网卡名称</p>
</li>
<li><p>#rxerr/s 每秒钟接收到的损坏的数据包</p>
</li>
<li><p>#txerr/s 每秒钟发送的数据包错误数</p>
</li>
<li><p>#coll/s 当发送数据包时候，每秒钟发生的冲撞（collisions）数，这个是在半双工模式下才有</p>
</li>
<li><p>#rxdrop/s 当由于缓冲区满的时候，网卡设备接收端每秒钟丢掉的网络包的数目</p>
</li>
<li><p>#txdrop/s 当由于缓冲区满的时候，网络设备发送端每秒钟丢掉的网络包的数目</p>
</li>
<li><p>#txcarr/s  当发送数据包的时候，每秒钟载波错误发生的次数</p>
</li>
<li><p>#rxfram   在接收数据包的时候，每秒钟发生的帧对其错误的次数</p>
</li>
<li><p>#rxfifo    在接收数据包的时候，每秒钟缓冲区溢出的错误发生的次数</p>
</li>
<li><p>#txfifo    在发生数据包 的时候，每秒钟缓冲区溢出的错误发生的次数</p>
</li>
</ul>
<h3 id="统计socket连接信息"><a href="#统计socket连接信息" class="headerlink" title="统计socket连接信息"></a>统计socket连接信息</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -n SOCK 1 1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sar -n SOCK 1 1</span></div><div class="line">Linux 2.6.32-431.el6.x86_64 (localhost)         2017年07月12日  _x86_64_        (4 CPU)</div><div class="line"></div><div class="line">14时02分35秒    totsck    tcpsck    udpsck    rawsck   ip-frag    tcp-tw</div><div class="line">14时02分36秒       389         5         5         0         0         0</div><div class="line">平均时间:       389         5         5         0         0         0</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li><p>#totsck 当前被使用的socket总数</p>
</li>
<li><p>#tcpsck 当前正在被使用的TCP的socket总数</p>
</li>
<li><p>#udpsck  当前正在被使用的UDP的socket总数</p>
</li>
<li><p>#rawsck 当前正在被使用于RAW的skcket总数</p>
</li>
<li><p>#if-frag  当前的IP分片的数目</p>
</li>
<li><p>#tcp-tw TCP套接字中处于TIME-WAIT状态的连接数量</p>
</li>
</ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;如果使用FULL关键字，相当于上述DEV、EDEV和SOCK三者的综合</p>
<h4 id="TCP连接的统计"><a href="#TCP连接的统计" class="headerlink" title="TCP连接的统计"></a>TCP连接的统计</h4><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sar -n TCP 1 3</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]<span class="comment"># sar -n TCP 1 3</span></div><div class="line">Linux 2.6.32-431.el6.x86_64 (localhost)         2017年07月12日  _x86_64_        (4 CPU)</div><div class="line"></div><div class="line">14时05分30秒  active/s passive/s    iseg/s    oseg/s</div><div class="line">14时05分31秒      0.00      0.00      0.00      0.00</div><div class="line">14时05分32秒      0.00      0.00      1.04      1.04</div><div class="line">14时05分33秒      0.00      0.00      1.00      1.00</div><div class="line">平均时间:      0.00      0.00      0.68      0.68</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ul>
<li><p>#active/s 新的主动连接</p>
</li>
<li><p>#passive/s 新的被动连接</p>
</li>
<li><p>#iseg/s 接受的段</p>
</li>
<li><p>#oseg/s 输出的段</p>
</li>
</ul>
<h4 id="sar-n-使用总结"><a href="#sar-n-使用总结" class="headerlink" title="sar -n 使用总结"></a>sar -n 使用总结</h4><ul>
<li>-n DEV ： 网络接口统计信息。</li>
<li>-n EDEV ： 网络接口错误。</li>
<li>-n IP ： IP数据报统计信息。</li>
<li>-n EIP ： IP错误统计信息。</li>
<li>-n TCP ： TCP统计信息。</li>
<li>-n ETCP ： TCP错误统计信息。</li>
<li>-n SOCK ： 套接字使用。</li>
</ul>
<h2 id="常用命令汇总"><a href="#常用命令汇总" class="headerlink" title="常用命令汇总"></a>常用命令汇总</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;因版本和平台不同，有部分命令可能没有或显示结果不一致：</p>
<ol>
<li><code>sar -b 5 5</code>  IO传送速率</li>
<li><code>sar -B 5 5</code>  页交换速率</li>
<li><code>sar -c 5 5</code>  进程创建的速率</li>
<li><code>sar -d 5 5</code>  块设备的活跃信息</li>
<li><code>sar -n DEV 5 5</code>  网路设备的状态信息</li>
<li><code>sar -n SOCK 5 5</code>  SOCK的使用情况</li>
<li><code>sar -n ALL 5 5</code>  所有的网络状态信息</li>
<li><code>sar -P ALL 5 5</code>  每颗CPU的使用状态信息和IOWAIT统计状态 </li>
<li><code>sar -q 5 5</code>  队列的长度（等待运行的进程数）和负载的状态</li>
<li><code>sar -r 5 5</code>  内存和swap空间使用情况</li>
<li><code>sar -R 5 5</code>  内存的统计信息（内存页的分配和释放、系统每秒作为BUFFER使用内存页、每秒被cache到的内存页）</li>
<li>`sar -u 5 5  CPU的使用情况和IOWAIT信息（同默认监控）</li>
<li><code>sar -v 5 5</code>  inode, file and other kernel tablesd的状态信息</li>
<li><code>sar -w 5 5</code>  每秒上下文交换的数目</li>
<li><code>sar -W 5 5</code>  SWAP交换的统计信息(监控状态同iostat 的si so)</li>
<li><code>sar -x 2906 5 5</code>  显示指定进程(2906)的统计信息，信息包括：进程造成的错误、用户级和系统级用户CPU的占用情况、运行在哪颗CPU上</li>
<li><code>sar -y 5 5</code>  TTY设备的活动状态</li>
<li>将输出到文件(-o)和读取记录信息(-f)</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/11. Linux 命令- nl" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/11. Linux 命令- nl/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.275Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/11. Linux 命令- nl/">
        Linux 命令- nl
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;nl命令在linux系统中用来计算文件中行号。nl 可以将输出的文件内容自动的加上行号！其默认的结果与 cat -n 有点不太一样， nl 可以将行号做比较多的显示设计，包括位数与是否自动补齐 0 等等的功能。      </p>
<h2 id="1．命令格式："><a href="#1．命令格式：" class="headerlink" title="1．命令格式："></a>1．命令格式：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nl [选项]... [文件]...</div></pre></td></tr></table></figure>
<h2 id="2．命令参数："><a href="#2．命令参数：" class="headerlink" title="2．命令参数："></a>2．命令参数：</h2><ul>
<li>-b  ：指定行号指定的方式，主要有两种：    <ul>
<li>-b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)；    </li>
<li>-b t ：如果有空行，空的那一行不要列出行号(默认值)；</li>
</ul>
</li>
<li>-n  ：列出行号表示的方法，主要有三种：    <ul>
<li>-n ln ：行号在萤幕的最左方显示；    </li>
<li>-n rn ：行号在自己栏位的最右方显示，且不加 0 ；    </li>
<li>-n rz ：行号在自己栏位的最右方显示，且加 0 ；</li>
</ul>
</li>
<li>-w  ：行号栏位的占用的位数。</li>
<li>-p 在逻辑定界符处不重新开始计算。 </li>
</ul>
<h2 id="3．命令功能："><a href="#3．命令功能：" class="headerlink" title="3．命令功能："></a>3．命令功能：</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;nl 命令读取 File 参数（缺省情况下标准输入），计算输入中的行号，将计算过的行号写入标准输出。 在输出中，nl 命令根据您在命令行中指定的标志来计算左边的行。 输入文本必须写在逻辑页中。每个逻辑页有头、主体和页脚节（可以有空节）。 除非使用 -p 标志，nl 命令在每个逻辑页开始的地方重新设置行号。 可以单独为头、主体和页脚节设置行计算标志（例如，头和页脚行可以被计算然而文本行不能）。</p>
<h2 id="4．使用实例："><a href="#4．使用实例：" class="headerlink" title="4．使用实例："></a>4．使用实例：</h2><h3 id="实例1：用-nl-列出-log2012-log-的内容"><a href="#实例1：用-nl-列出-log2012-log-的内容" class="headerlink" title="实例1：用 nl 列出 log2012.log 的内容"></a>实例1：用 nl 列出 log2012.log 的内容</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nl log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># nl log2012.log </span></div><div class="line">1  2012-01</div><div class="line">2  2012-02</div><div class="line"> </div><div class="line"></div><div class="line">3  ======</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;文件中的空白行，nl 不会加上行号    </p>
<h3 id="实例2：用-nl-列出-log2012-log-的内容，空本行也加上行号"><a href="#实例2：用-nl-列出-log2012-log-的内容，空本行也加上行号" class="headerlink" title="实例2：用 nl 列出 log2012.log 的内容，空本行也加上行号"></a>实例2：用 nl 列出 log2012.log 的内容，空本行也加上行号</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nl -b a log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># nl -b a log2012.log </span></div><div class="line">1  2012-01</div><div class="line">2  2012-02</div><div class="line">3</div><div class="line">4</div><div class="line">5  ======</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例3：让行号前面自动补上0-统一输出格式"><a href="#实例3：让行号前面自动补上0-统一输出格式" class="headerlink" title="实例3：让行号前面自动补上0,统一输出格式"></a>实例3：让行号前面自动补上0,统一输出格式</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># nl -b a -n rz log2014.log </span></div><div class="line">000001  2014-01</div><div class="line">000002  2014-02</div><div class="line">000003  2014-03</div><div class="line">000004  2014-04</div><div class="line">000005  2014-05</div><div class="line">000006  2014-06</div><div class="line">000007  2014-07</div><div class="line">000008  2014-08</div><div class="line">000009  2014-09</div><div class="line">000010  2014-10</div><div class="line">000011  2014-11</div><div class="line">000012  2014-12</div><div class="line">000013  =======</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># nl -b a -n rz -w 3 log2014.log </span></div><div class="line">001     2014-01</div><div class="line">002     2014-02</div><div class="line">003     2014-03</div><div class="line">004     2014-04</div><div class="line">005     2014-05</div><div class="line">006     2014-06</div><div class="line">007     2014-07</div><div class="line">008     2014-08</div><div class="line">009     2014-09</div><div class="line">010     2014-10</div><div class="line">011     2014-11</div><div class="line">012     2014-12</div><div class="line">013     =======</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;nl -b a -n rz 命令行号默认为六位，要调整位数可以加上参数 -w 3 调整为3位。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/50. Linux 命令- watch" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/50. Linux 命令- watch/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.275Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/50. Linux 命令- watch/">
        Linux 命令- watch
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;watch是一个非常实用的命令，基本所有的Linux发行版都带有这个小工具，如同名字一样，watch可以帮你监测一个命令的运行结果，省得你一遍遍的手动运行。在Linux下，watch是周期性的执行下个程序，并全屏显示执行结果。你可以拿他来监测你想要的一切命令的结果变化，比如 tail 一个 log 文件，ls 监测某个文件的大小变化，看你的想象力了！</p>
<h2 id="1．命令格式"><a href="#1．命令格式" class="headerlink" title="1．命令格式"></a>1．命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">watch [参数] [命令]</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2. 命令功能"></a>2. 命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;可以将命令的输出结果输出到标准输出设备，多用于周期性执行命令/定时执行命令</p>
<h2 id="3．命令参数"><a href="#3．命令参数" class="headerlink" title="3．命令参数"></a>3．命令参数</h2><ul>
<li>-n或–interval  watch缺省每2秒运行一下程序，可以用-n或-interval来指定间隔的时间。</li>
<li>-d或–differences  用-d或–differences 选项watch 会高亮显示变化的区域。 而-d=cumulative选项会把变动过的地方(不管最近的那次有没有变动)都高亮显示出来。</li>
<li>-t 或-no-title  会关闭watch命令在顶部的时间间隔,命令，当前时间的输出。</li>
<li>-h, –help 查看帮助文档</li>
</ul>
<h2 id="4．使用实例"><a href="#4．使用实例" class="headerlink" title="4．使用实例"></a>4．使用实例</h2><h3 id="实例1：每隔一秒高亮显示网络链接数的变化情况"><a href="#实例1：每隔一秒高亮显示网络链接数的变化情况" class="headerlink" title="实例1：每隔一秒高亮显示网络链接数的变化情况"></a>实例1：每隔一秒高亮显示网络链接数的变化情况</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">watch -n 1 -d netstat -ant</div></pre></td></tr></table></figure>
<h4 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h4><h5 id="其它操作："><a href="#其它操作：" class="headerlink" title="其它操作："></a>其它操作：</h5><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;切换终端： Ctrl+x</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;退出watch：Ctrl+g</p>
<h3 id="实例2：每隔一秒高亮显示http链接数的变化情况"><a href="#实例2：每隔一秒高亮显示http链接数的变化情况" class="headerlink" title="实例2：每隔一秒高亮显示http链接数的变化情况"></a>实例2：每隔一秒高亮显示http链接数的变化情况</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">watch -n 1 -d <span class="string">'pstree|grep http'</span></div></pre></td></tr></table></figure>
<h4 id="说明：-1"><a href="#说明：-1" class="headerlink" title="说明："></a>说明：</h4><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;每隔一秒高亮显示http链接数的变化情况。 后面接的命令若带有管道符，需要加’’将命令区域归整。</p>
<h3 id="实例3：实时查看模拟攻击客户机建立起来的连接数"><a href="#实例3：实时查看模拟攻击客户机建立起来的连接数" class="headerlink" title="实例3：实时查看模拟攻击客户机建立起来的连接数"></a>实例3：实时查看模拟攻击客户机建立起来的连接数</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">watch <span class="string">'netstat -an | grep:21 | \ grep&lt;模拟攻击客户机的IP&gt;| wc -l'</span></div></pre></td></tr></table></figure>
<h3 id="实例4：监测当前目录中-scf’-的文件的变化"><a href="#实例4：监测当前目录中-scf’-的文件的变化" class="headerlink" title="实例4：监测当前目录中 scf’ 的文件的变化"></a>实例4：监测当前目录中 scf’ 的文件的变化</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">watch -d <span class="string">'ls -l|grep scf'</span></div></pre></td></tr></table></figure>
<h3 id="实例5：10秒一次输出系统的平均负载"><a href="#实例5：10秒一次输出系统的平均负载" class="headerlink" title="实例5：10秒一次输出系统的平均负载"></a>实例5：10秒一次输出系统的平均负载</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">watch -n 10 <span class="string">'cat /proc/loadavg'</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/6. Linux 命令- rm" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/6. Linux 命令- rm/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.274Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/6. Linux 命令- rm/">
        Linux 命令- rm
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;linux中删除文件和目录的命令： rm命令。rm是常用的命令，该命令的功能为删除一个目录中的一个或多个文件或目录，它也可以将某个目录及其下的所有文件及子目录均删除。对于链接文件，只是删除了链接，原有文件均保持不变。<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rm是一个危险的命令，使用的时候要特别当心，尤其对于新手，否则整个系统就会毁在这个命令（比如在/（根目录）下执行rm * -rf）。所以，我们在执行rm之前最好先确认一下在哪个目录，到底要删除什么东西，操作时保持高度清醒的头脑。</p>
<h2 id="1．命令格式："><a href="#1．命令格式：" class="headerlink" title="1．命令格式："></a>1．命令格式：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm [选项] [文件]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能："><a href="#2．命令功能：" class="headerlink" title="2．命令功能："></a>2．命令功能：</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;删除一个目录中的一个或多个文件或目录，如果没有使用- r选项，则rm不会删除目录。如果使用 rm 来删除文件，通常仍可以将该文件恢复原状。</p>
<h2 id="3．命令参数："><a href="#3．命令参数：" class="headerlink" title="3．命令参数："></a>3．命令参数：</h2><ul>
<li>-f, –force    忽略不存在的文件，从不给出提示。      </li>
<li>-i, –interactive 进行交互式删除      </li>
<li>-r, -R, –recursive   指示rm将参数中列出的全部目录和子目录均递归地删除。      </li>
<li>-v, –verbose    详细显示进行的步骤      <ul>
<li>–help     显示此帮助信息并退出      </li>
<li>–version  输出版本信息并退出      </li>
</ul>
</li>
</ul>
<h2 id="4．命令实例："><a href="#4．命令实例：" class="headerlink" title="4．命令实例："></a>4．命令实例：</h2><h3 id="实例1：删除文件file，系统会先询问是否删除。"><a href="#实例1：删除文件file，系统会先询问是否删除。" class="headerlink" title="实例1：删除文件file，系统会先询问是否删除。"></a>实例1：删除文件file，系统会先询问是否删除。</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm [文件名]</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost test1]<span class="comment"># ll</span></div><div class="line">总计 4</div><div class="line">-rw-r--r-- 1 root root 56 10-26 14:31 log.log</div><div class="line">root@localhost test1]<span class="comment"># rm log.log </span></div><div class="line">rm：是否删除 一般文件 “log.log”? y</div><div class="line">root@localhost test1]<span class="comment"># ll</span></div><div class="line">总计 0[root@localhost test1]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;输入rm log.log命令后，系统会询问是否删除，输入y后就会删除文件，不想删除则数据n。</p>
<h3 id="实例2：强行删除file，系统不再提示。"><a href="#实例2：强行删除file，系统不再提示。" class="headerlink" title="实例2：强行删除file，系统不再提示。"></a>实例2：强行删除file，系统不再提示。</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm -f log1.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost test1]<span class="comment"># ll</span></div><div class="line">总计 4</div><div class="line">-rw-r--r-- 1 root root 23 10-26 14:40 log1.log</div><div class="line">[root@localhost test1]<span class="comment"># rm -f log1.log </span></div><div class="line">[root@localhost test1]<span class="comment"># ll</span></div><div class="line">总计 0</div><div class="line">[root@localhost test1]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例3：删除任何-log文件；删除前逐一询问确认"><a href="#实例3：删除任何-log文件；删除前逐一询问确认" class="headerlink" title="实例3：删除任何.log文件；删除前逐一询问确认"></a>实例3：删除任何.log文件；删除前逐一询问确认</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm -i *.<span class="built_in">log</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost test1]<span class="comment"># ll</span></div><div class="line">总计 8</div><div class="line">-rw-r--r-- 1 root root 11 10-26 14:45 log1.log</div><div class="line">-rw-r--r-- 1 root root 24 10-26 14:45 log2.log</div><div class="line">[root@localhost test1]<span class="comment"># rm -i *.log</span></div><div class="line">rm：是否删除 一般文件 “log1.log”? y</div><div class="line">rm：是否删除 一般文件 “log2.log”? y</div><div class="line">[root@localhost test1]<span class="comment"># ll</span></div><div class="line">总计 0</div><div class="line">[root@localhost test1]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例4：将-test1子目录及子目录中所有档案删除"><a href="#实例4：将-test1子目录及子目录中所有档案删除" class="headerlink" title="实例4：将 test1子目录及子目录中所有档案删除"></a>实例4：将 test1子目录及子目录中所有档案删除</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm -r test1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 24</div><div class="line">drwxr-xr-x 7 root root 4096 10-25 18:07 scf</div><div class="line">drwxr-xr-x 2 root root 4096 10-26 14:51 test1</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:44 test2</div><div class="line">drwxrwxrwx 2 root root 4096 10-25 17:46 test3</div><div class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test4</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># rm -r test1</span></div><div class="line">rm：是否进入目录 “test1”? y</div><div class="line">rm：是否删除 一般文件 “test1/log3.log”? y</div><div class="line">rm：是否删除 目录 “test1”? y</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 20drwxr-xr-x 7 root root 4096 10-25 18:07 scf</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:44 test2</div><div class="line">drwxrwxrwx 2 root root 4096 10-25 17:46 test3</div><div class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test4</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例5：rm-rf-test2命令会将-test2-子目录及子目录中所有档案删除-并且不用一一确认"><a href="#实例5：rm-rf-test2命令会将-test2-子目录及子目录中所有档案删除-并且不用一一确认" class="headerlink" title="实例5：rm -rf test2命令会将 test2 子目录及子目录中所有档案删除,并且不用一一确认"></a>实例5：rm -rf test2命令会将 test2 子目录及子目录中所有档案删除,并且不用一一确认</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm -rf  test2</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># rm -rf test2</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 16</div><div class="line">drwxr-xr-x 7 root root 4096 10-25 18:07 scf</div><div class="line">drwxrwxrwx 2 root root 4096 10-25 17:46 test3</div><div class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test4</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例6：删除以-f-开头的文件"><a href="#实例6：删除以-f-开头的文件" class="headerlink" title="实例6：删除以 -f 开头的文件"></a>实例6：删除以 -f 开头的文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm -- -f</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># touch -- -f</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -- -f</span></div><div class="line">-f[root@localhost <span class="built_in">test</span>]<span class="comment"># rm -- -f</span></div><div class="line">rm：是否删除 一般空文件 “-f”? y</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -- -f</span></div><div class="line">ls: -f: 没有那个文件或目录</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div><div class="line">也可以使用下面的操作步骤:</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># touch ./-f</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls ./-f</span></div><div class="line">./-f[root@localhost <span class="built_in">test</span>]<span class="comment"># rm ./-f</span></div><div class="line">rm：是否删除 一般空文件 “./-f”? y</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例7：自定义回收站功能"><a href="#实例7：自定义回收站功能" class="headerlink" title="实例7：自定义回收站功能"></a>实例7：自定义回收站功能</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">myrm</span></span>()&#123; D=/tmp/$(date +%Y%m%d%H%M%S); mkdir -p <span class="variable">$D</span>; mv <span class="string">"<span class="variable">$@</span>"</span> <span class="variable">$D</span> &amp;&amp; <span class="built_in">echo</span> <span class="string">"moved to <span class="variable">$D</span> ok"</span>; &#125;</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># myrm()&#123; D=/tmp/$(date +%Y%m%d%H%M%S); mkdir -p $D; 	mv "$@" $D &amp;&amp; echo "moved to $D ok"; &#125;</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># alias rm='myrm'</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># touch 1.log 2.log 3.log</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 16</div><div class="line">-rw-r--r-- 1 root root    0 10-26 15:08 1.log</div><div class="line">-rw-r--r-- 1 root root    0 10-26 15:08 2.log</div><div class="line">-rw-r--r-- 1 root root    0 10-26 15:08 3.log</div><div class="line">drwxr-xr-x 7 root root 4096 10-25 18:07 scf</div><div class="line">drwxrwxrwx 2 root root 4096 10-25 17:46 test3</div><div class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test4</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># rm [123].log</span></div><div class="line">moved to /tmp/20121026150901 ok</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 16drwxr-xr-x 7 root root 4096 10-25 18:07 scf</div><div class="line">drwxrwxrwx 2 root root 4096 10-25 17:46 test3</div><div class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test4</div><div class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls /tmp/20121026150901/</span></div><div class="line">1.log  2.log  3.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;上面的操作过程模拟了回收站的效果，即删除文件的时候只是把文件放到一个临时目录中，这样在需要的时候还可以恢复过来。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;参考资料：<a href="http://codingstandards.iteye.com/blog/983531" target="_blank" rel="external">我使用过的Linux命令之rm - 删除文件或目录</a> </p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/28. Linux 命令- tar" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/28. Linux 命令- tar/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.273Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/28. Linux 命令- tar/">
        Linux 命令- tar
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;通过SSH访问服务器，难免会要用到压缩，解压缩，打包，解包等，这时候tar命令就是是必不可少的一个功能强大的工具。linux中最流行的tar是麻雀虽小，五脏俱全，功能强大。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tar命令可以为linux的文件和目录创建档案。利用tar，可以为某一特定文件创建档案（备份文件），也可以在档案中改变文件，或者向档案中加入新的文件。tar最初被用来在磁带上创建档案，现在，用户可以在任何设备上创建档案。利用tar命令，可以把一大堆的文件和目录全部打包成一个文件，这对于备份文件或将几个文件组合成为一个文件以便于网络传输是非常有用的。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;首先要弄清两个概念：打包和压缩。打包是指将一大堆文件或目录变成一个总的文件；压缩则是将一个大的文件通过一些压缩算法变成一个小文件。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;为什么要区分这两个概念呢？这源于Linux中很多压缩程序只能针对一个文件进行压缩，这样当你想要压缩一大堆文件时，你得先将这一大堆文件先打成一个包（tar命令），然后再用压缩程序进行压缩（gzip bzip2命令）。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;linux下最常用的打包程序就是tar了，使用tar程序打出来的包我们常称为tar包，tar包文件的命令通常都是以.tar结尾的。生成tar包后，就可以用其它的程序来进行压缩。</p>
<h2 id="1-命令格式"><a href="#1-命令格式" class="headerlink" title="1.命令格式"></a>1.命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar [必要参数] [选择参数] [文件]</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2.命令功能"></a>2.命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用来压缩和解压文件。tar 本身不具有压缩功能。它是调用压缩功能实现的。</p>
<h2 id="3-命令参数"><a href="#3-命令参数" class="headerlink" title="3.命令参数"></a>3.命令参数</h2><h3 id="必要参数"><a href="#必要参数" class="headerlink" title="必要参数"></a>必要参数</h3><ul>
<li>-A 新增压缩文件到已存在的压缩</li>
<li>-B 设置区块大小</li>
<li>-c 建立新的压缩文件</li>
<li>-d 记录文件的差别</li>
<li>-r 添加文件到已经压缩的文件</li>
<li>-u 添加改变了和现有的文件到已经存在的压缩文件</li>
<li>-x 从压缩的文件中提取文件</li>
<li>-t 显示压缩文件的内容</li>
<li>-z 支持gzip解压文件</li>
<li>-j 支持bzip2解压文件</li>
<li>-Z 支持compress解压文件</li>
<li>-v 显示操作过程</li>
<li>-l 文件系统边界设置</li>
<li>-k 保留原有文件不覆盖</li>
<li>-m 保留文件不被覆盖</li>
<li>-W 确认压缩文件的正确性</li>
</ul>
<h3 id="可选择参数"><a href="#可选择参数" class="headerlink" title="可选择参数"></a>可选择参数</h3><ul>
<li>-b 设置区块数目</li>
<li>-C 切换到指定目录</li>
<li>-f 指定压缩文件</li>
<li>–help 显示帮助信息</li>
<li>–version 显示版本信息</li>
</ul>
<h2 id="4-常见压缩、解压命令"><a href="#4-常见压缩、解压命令" class="headerlink" title="4.常见压缩、解压命令"></a>4.常见压缩、解压命令</h2><h3 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;解包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar xvf filname.tar</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;打包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar cvf filename.tar dirname</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;注意：tar 是打包，不是压缩！</p>
<h3 id="gz"><a href="#gz" class="headerlink" title=".gz"></a>.gz</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;解压1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gunzip filename.gz</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;解压2</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gzip -d filename.gz</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;压缩</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gzip filename.tar.gz</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;解压</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar zxvf filename.tar.gz</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;压缩</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar zcvf filename.tar.gz dirname</div></pre></td></tr></table></figure>
<h3 id="bz2"><a href="#bz2" class="headerlink" title=".bz2"></a>.bz2</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;解压1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bzip2 -d filename.bz2</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;解压2</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bunzip2 filename.bz2</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;压缩</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bzip2 -z filename.tar.bz2</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;解压</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar jxvf filename.tar.bz2</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;压缩</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar jcvf filename.tar.bz2 diename</div></pre></td></tr></table></figure>
<h3 id="Z"><a href="#Z" class="headerlink" title=".Z"></a>.Z</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;解压</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">unconpress filename.Z</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;压缩</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compress filename.tar.Z</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;解压</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar Zxvf filename.tar.Z</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;压缩</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar Zcvf filename.tar.Z dirname</div></pre></td></tr></table></figure>
<h3 id="zip"><a href="#zip" class="headerlink" title=".zip"></a>.zip</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;解压</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">unzip filename.zip</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;压缩</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">zip filename.zip dirname</div></pre></td></tr></table></figure>
<h3 id="rar"><a href="#rar" class="headerlink" title=".rar"></a>.rar</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;解压</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rar x filename.rar</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;压缩</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rar a filename.rar dirname</div></pre></td></tr></table></figure>
<h2 id="5-使用实例"><a href="#5-使用实例" class="headerlink" title="5.使用实例"></a>5.使用实例</h2><h3 id="实例1：将文件全部打包成-tar-包"><a href="#实例1：将文件全部打包成-tar-包" class="headerlink" title="实例1：将文件全部打包成 tar 包"></a>实例1：将文件全部打包成 tar 包</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">tar -cvf log.tar log2012.log</div><div class="line">tar -zxvf log.tar.gz log2012.log</div><div class="line">tar -jcvf log.tar.bz2 log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al log2012.log</span></div><div class="line">---xrw-r-- 1 root root 302108 11-13 06:03 log2012.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tar -cvf log.tar log2012.log </span></div><div class="line">log2012.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tar -zcvf log.tar.gz log2012.log</span></div><div class="line">log2012.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tar -jcvf log.tar.bz2 log2012.log </span></div><div class="line">log2012.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al *.tar*</span></div><div class="line">-rw-r--r-- 1 root root 307200 11-29 17:54 log.tar</div><div class="line">-rw-r--r-- 1 root root   1413 11-29 17:55 log.tar.bz2</div><div class="line">-rw-r--r-- 1 root root   1413 11-29 17:54 log.tar.gz</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<ol>
<li>tar -cvf log.tar log2012.log    仅打包，不压缩！     </li>
<li>tar -zcvf log.tar.gz log2012.log   打包后，以 gzip 压缩     </li>
<li>tar -zcvf log.tar.bz2 log2012.log  打包后，以 bzip2 压缩     </li>
</ol>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在参数 f 之后的文件档名是自己去的，习惯上都用 .tar 来作为辨识。如果加 z 参数，则以 .tar.gz 或 .tgz 来代表 gzip 压缩过的 tar 包；如果加 j 参数，则以 .tar.bz2 来作为 tar 报名。</p>
<h3 id="实例2：查阅上述-tar-包内有哪些文件"><a href="#实例2：查阅上述-tar-包内有哪些文件" class="headerlink" title="实例2：查阅上述 tar 包内有哪些文件"></a>实例2：查阅上述 tar 包内有哪些文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -ztvf log.tar.gz</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tar -ztvf log.tar.gz</span></div><div class="line">---xrw-r-- root/root    302108 2012-11-13 06:03:25 log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;由于使用 gzip 压缩的 log.tar.gz，所以要查阅 log.tar.gz 包内的文件时，就要加上 z 这个参数</p>
<h3 id="实例3：将-tar-包解压缩"><a href="#实例3：将-tar-包解压缩" class="headerlink" title="实例3：将 tar 包解压缩"></a>实例3：将 tar 包解压缩</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf /opt/soft/<span class="built_in">test</span>/log.tar.gz</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost test3]<span class="comment"># ll</span></div><div class="line">总计 0[root@localhost test3]<span class="comment"># tar -zxvf /opt/soft/test/log.tar.gz</span></div><div class="line">log2012.log</div><div class="line">[root@localhost test3]<span class="comment"># ls</span></div><div class="line">log2012.log</div><div class="line">[root@localhost test3]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在预设的情况下，可以将压缩当在任何地方解压</p>
<h3 id="实例4：只将-tar-内的部分文件解压出来"><a href="#实例4：只将-tar-内的部分文件解压出来" class="headerlink" title="实例4：只将 /tar 内的部分文件解压出来"></a>实例4：只将 /tar 内的部分文件解压出来</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf /opt/soft/<span class="built_in">test</span>/log30.tar.gz log2013.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tar -zcvf log30.tar.gz log2012.log log2013.log </span></div><div class="line">log2012.log</div><div class="line">log2013.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al log30.tar.gz </span></div><div class="line">-rw-r--r-- 1 root root 1512 11-30 08:19 log30.tar.gz</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tar -zxvf log30.tar.gz log2013.log</span></div><div class="line">log2013.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root   1512 11-30 08:19 log30.tar.gz</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test3</span></div><div class="line">[root@localhost test3]<span class="comment"># tar -zxvf /opt/soft/test/log30.tar.gz log2013.log</span></div><div class="line">log2013.log</div><div class="line">[root@localhost test3]<span class="comment"># ll</span></div><div class="line">总计 4</div><div class="line">-rw-r--r-- 1 root root 61 11-13 06:03 log2013.log</div><div class="line">[root@localhost test3]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;可以投过 tar -ztvf 来查阅 tar 包内的文件名称，如果单只要一个文件，就可透过这个方式来解压部分文件！</p>
<h2 id="实例5：文件备份下来，并且保存其权限"><a href="#实例5：文件备份下来，并且保存其权限" class="headerlink" title="实例5：文件备份下来，并且保存其权限"></a>实例5：文件备份下来，并且保存其权限</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zcvpf log31.tar.gz log2014.log log2015.log lo2016.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">总计 0</div><div class="line">-rw-r--r-- 1 root root      0 11-13 06:03 log2014.log</div><div class="line">-rw-r--r-- 1 root root      0 11-13 06:06 log2015.log</div><div class="line">-rw-r--r-- 1 root root      0 11-16 14:41 log2016.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tar -zcvpf log31.tar.gz log2014.log log2015.log log2016.log </span></div><div class="line">log2014.log</div><div class="line">log2015.log</div><div class="line">log2016.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test6</span></div><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">[root@localhost test6]<span class="comment"># tar -zxvpf /opt/soft/test/log31.tar.gz </span></div><div class="line">log2014.log</div><div class="line">log2015.log</div><div class="line">log2016.log</div><div class="line">[root@localhost test6]<span class="comment"># ll</span></div><div class="line">总计 0</div><div class="line">-rw-r--r-- 1 root root 0 11-13 06:03 log2014.log</div><div class="line">-rw-r--r-- 1 root root 0 11-13 06:06 log2015.log</div><div class="line">-rw-r--r-- 1 root root 0 11-16 14:41 log2016.log</div><div class="line">[root@localhost test6]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;这个 -p 的属性是很重要的，尤其是要保留原文本文件的属性时</p>
<h3 id="实例6：在文件夹当中，比某个日期新的文件才备份"><a href="#实例6：在文件夹当中，比某个日期新的文件才备份" class="headerlink" title="实例6：在文件夹当中，比某个日期新的文件才备份"></a>实例6：在文件夹当中，比某个日期新的文件才备份</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -N <span class="string">"2012/11/13"</span> -zcvf log17.tar.gz <span class="built_in">test</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@localhost soft]<span class="comment"># tar -N "2012/11/13" -zcvf log17.tar.gz test</span></div><div class="line">tar: Treating date `2012/11/13<span class="string">' as 2012-11-13 00:00:00 + 0 nanoseconds</span></div><div class="line"><span class="string">test/test/log31.tar.gz</span></div><div class="line"><span class="string">test/log2014.log</span></div><div class="line"><span class="string">test/linklog.log</span></div><div class="line"><span class="string">test/log2015.log</span></div><div class="line"><span class="string">test/log2013.log</span></div><div class="line"><span class="string">test/log2012.log</span></div><div class="line"><span class="string">test/log2017.log</span></div><div class="line"><span class="string">test/log2016.log</span></div><div class="line"><span class="string">test/log30.tar.gz</span></div><div class="line"><span class="string">test/log.tar</span></div><div class="line"><span class="string">test/log.tar.bz2</span></div><div class="line"><span class="string">test/log.tar.gz</span></div></pre></td></tr></table></figure>
<h3 id="实例7：备份文件夹内容是排除部分文件"><a href="#实例7：备份文件夹内容是排除部分文件" class="headerlink" title="实例7：备份文件夹内容是排除部分文件"></a>实例7：备份文件夹内容是排除部分文件</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar --exclide scf/service -zcvf scf.tar/gz scf/*</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tree scf</span></div><div class="line">scf</div><div class="line">|-- bin</div><div class="line">|-- doc</div><div class="line">|-- lib</div><div class="line">`-- service</div><div class="line">   	 `-- deploy</div><div class="line">       	 	|-- info</div><div class="line">       	 	`-- product</div><div class="line">7 directories, 0 files</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tar --exclude scf/service -zcvf scf.tar.gz scf/* </span></div><div class="line">scf/bin/</div><div class="line">scf/doc/</div><div class="line">scf/lib/</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/36. Linux 命令- du" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/36. Linux 命令- du/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.272Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/36. Linux 命令- du/">
        Linux 命令- du
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux du 命令也是查看是有那个空间的，但是与 df 命令不同的是对文件和目录磁盘使用的空间的查看，还是和 df 命令有一写区别的。</p>
<h2 id="1-命令格式"><a href="#1-命令格式" class="headerlink" title="1.命令格式"></a>1.命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du [选项] [文件]</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2.命令功能"></a>2.命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;显示每个文件和目录的磁盘使用空间。</p>
<h2 id="3-命令参数"><a href="#3-命令参数" class="headerlink" title="3.命令参数"></a>3.命令参数</h2><ul>
<li>-a或-all  显示目录中个别文件的大小。   </li>
<li>-b或-bytes  显示目录或文件大小时，以byte为单位。</li>
<li>-c或–total  除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。 </li>
<li>-k或–kilobytes  以KB(1024bytes)为单位输出。</li>
<li>-m或–megabytes  以MB为单位输出。 </li>
<li>-s或–summarize  仅显示总计，只列出最后加总的值。</li>
<li>-h或–human-readable  以K，M，G为单位，提高信息的可读性。</li>
<li>-x或–one-file-xystem  以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。 </li>
<li>-L&lt;符号链接&gt;或–dereference&lt;符号链接&gt; 显示选项中所指定符号链接的源文件大小。  </li>
<li>-S或–separate-dirs   显示个别目录的大小时，并不含其子目录的大小。 </li>
<li>-X&lt;文件&gt;或–exclude-from=&lt;文件&gt;  在&lt;文件&gt;指定目录或文件。</li>
<li>–exclude=&lt;目录或文件&gt;         略过指定的目录或文件。  </li>
<li>-D或–dereference-args   显示指定符号链接的源文件大小。 </li>
<li>-H或–si  与-h参数相同，但是K，M，G是以1000为换算单位。 </li>
<li>-l或–count-links   重复计算硬件链接的文件。</li>
</ul>
<h2 id="4-使用实例"><a href="#4-使用实例" class="headerlink" title="4.使用实例"></a>4.使用实例</h2><h3 id="实例1：显示目录或者文件所占空间"><a href="#实例1：显示目录或者文件所占空间" class="headerlink" title="实例1：显示目录或者文件所占空间"></a>实例1：显示目录或者文件所占空间</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># du</span></div><div class="line">608     ./test6</div><div class="line">308     ./test4</div><div class="line">4       ./scf/lib</div><div class="line">4       ./scf/service/deploy/product</div><div class="line">4       ./scf/service/deploy/info</div><div class="line">12      ./scf/service/deploy</div><div class="line">16      ./scf/service</div><div class="line">4       ./scf/doc</div><div class="line">4       ./scf/bin</div><div class="line">32      ./scf</div><div class="line">8       ./test3</div><div class="line">1288    .</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;只显示当前目录下面的子目录的目录大小和当前目录的总的大小，最下面的 1288 为当前目录的总大小。</p>
<h2 id="实例2：显示指定文件所占空间"><a href="#实例2：显示指定文件所占空间" class="headerlink" title="实例2：显示指定文件所占空间"></a>实例2：显示指定文件所占空间</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># du log2012.log </span></div><div class="line">300     log2012.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例3：查看指定目录的所占空间"><a href="#实例3：查看指定目录的所占空间" class="headerlink" title="实例3：查看指定目录的所占空间"></a>实例3：查看指定目录的所占空间</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du scf</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># du scf</span></div><div class="line">4       scf/lib</div><div class="line">4       scf/service/deploy/product</div><div class="line">4       scf/service/deploy/info</div><div class="line">12      scf/service/deploy</div><div class="line">16      scf/service</div><div class="line">4       scf/doc</div><div class="line">4       scf/bin</div><div class="line">32      scf</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例4：显示多个文件所占空间"><a href="#实例4：显示多个文件所占空间" class="headerlink" title="实例4：显示多个文件所占空间"></a>实例4：显示多个文件所占空间</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du log30.tar.gz log31.tar.gz</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># du log30.tar.gz log31.tar.gz </span></div><div class="line">4       log30.tar.gz</div><div class="line">4       log31.tar.gz</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例5：只显示总和的大小"><a href="#实例5：只显示总和的大小" class="headerlink" title="实例5：只显示总和的大小"></a>实例5：只显示总和的大小</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du -s</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># du -s</span></div><div class="line">1288    .</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># du -s scf</span></div><div class="line">32      scf</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd ..</span></div><div class="line">[root@localhost soft]<span class="comment"># du -s test</span></div><div class="line">1288    <span class="built_in">test</span></div><div class="line">[root@localhost soft]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例6：方便阅读的格式显示"><a href="#实例6：方便阅读的格式显示" class="headerlink" title="实例6：方便阅读的格式显示"></a>实例6：方便阅读的格式显示</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du -h <span class="built_in">test</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@localhost soft]<span class="comment"># du -h test</span></div><div class="line">608K    <span class="built_in">test</span>/test6</div><div class="line">308K    <span class="built_in">test</span>/test4</div><div class="line">4.0K    <span class="built_in">test</span>/scf/lib</div><div class="line">4.0K    <span class="built_in">test</span>/scf/service/deploy/product</div><div class="line">4.0K    <span class="built_in">test</span>/scf/service/deploy/info</div><div class="line">12K     <span class="built_in">test</span>/scf/service/deploy</div><div class="line">16K     <span class="built_in">test</span>/scf/service</div><div class="line">4.0K    <span class="built_in">test</span>/scf/doc</div><div class="line">4.0K    <span class="built_in">test</span>/scf/bin</div><div class="line">32K     <span class="built_in">test</span>/scf</div><div class="line">8.0K    <span class="built_in">test</span>/test3</div><div class="line">1.3M    <span class="built_in">test</span></div><div class="line">[root@localhost soft]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例7：文件和目录都显示"><a href="#实例7：文件和目录都显示" class="headerlink" title="实例7：文件和目录都显示"></a>实例7：文件和目录都显示</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du -ah <span class="built_in">test</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">[root@localhost soft]<span class="comment"># du -ah test</span></div><div class="line">4.0K    <span class="built_in">test</span>/log31.tar.gz</div><div class="line">4.0K    <span class="built_in">test</span>/test13.tar.gz</div><div class="line">0       <span class="built_in">test</span>/linklog.log</div><div class="line">0       <span class="built_in">test</span>/test6/log2014.log</div><div class="line">300K    <span class="built_in">test</span>/test6/linklog.log</div><div class="line">0       <span class="built_in">test</span>/test6/log2015.log</div><div class="line">4.0K    <span class="built_in">test</span>/test6/log2013.log</div><div class="line">300K    <span class="built_in">test</span>/test6/log2012.log</div><div class="line">0       <span class="built_in">test</span>/test6/log2017.log</div><div class="line">0       <span class="built_in">test</span>/test6/log2016.log</div><div class="line">608K    <span class="built_in">test</span>/test6</div><div class="line">0       <span class="built_in">test</span>/log2015.log</div><div class="line">0       <span class="built_in">test</span>/test4/log2014.log</div><div class="line">4.0K    <span class="built_in">test</span>/test4/log2013.log</div><div class="line">300K    <span class="built_in">test</span>/test4/log2012.log</div><div class="line">308K    <span class="built_in">test</span>/test4</div><div class="line">4.0K    <span class="built_in">test</span>/scf/lib</div><div class="line">4.0K    <span class="built_in">test</span>/scf/service/deploy/product</div><div class="line">4.0K    <span class="built_in">test</span>/scf/service/deploy/info</div><div class="line">12K     <span class="built_in">test</span>/scf/service/deploy</div><div class="line">16K     <span class="built_in">test</span>/scf/service</div><div class="line">4.0K    <span class="built_in">test</span>/scf/doc</div><div class="line">4.0K    <span class="built_in">test</span>/scf/bin</div><div class="line">32K     <span class="built_in">test</span>/scf</div><div class="line">4.0K    <span class="built_in">test</span>/log2013.log</div><div class="line">300K    <span class="built_in">test</span>/log2012.log</div><div class="line">0       <span class="built_in">test</span>/log2017.log</div><div class="line">0       <span class="built_in">test</span>/log2016.log</div><div class="line">4.0K    <span class="built_in">test</span>/log30.tar.gz</div><div class="line">4.0K    <span class="built_in">test</span>/log.tar.bz2</div><div class="line">4.0K    <span class="built_in">test</span>/log.tar.gz</div><div class="line">0       <span class="built_in">test</span>/test3/log2014.log</div><div class="line">4.0K    <span class="built_in">test</span>/test3/log2013.log</div><div class="line">8.0K    <span class="built_in">test</span>/test3</div><div class="line">4.0K    <span class="built_in">test</span>/scf.tar.gz</div><div class="line">1.3M    <span class="built_in">test</span></div><div class="line">[root@localhost soft]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例8：显示几个文件或目录各自占用磁盘空间的大小，还统计它们的综合"><a href="#实例8：显示几个文件或目录各自占用磁盘空间的大小，还统计它们的综合" class="headerlink" title="实例8：显示几个文件或目录各自占用磁盘空间的大小，还统计它们的综合"></a>实例8：显示几个文件或目录各自占用磁盘空间的大小，还统计它们的综合</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du -c log30.tar.gz log31.tar.gz</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost test]# du -c log30.tar.gz log31.tar.gz </div><div class="line">4       log30.tar.gz</div><div class="line">4       log31.tar.gz</div><div class="line">8       总计</div><div class="line">[root@localhost test]#</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;加上 -c 选项后，du 不仅先死两个目录各自占用磁盘空间的大小，还在最后一行统计它们的总和。</p>
<h3 id="实例9：按照空间大小排序"><a href="#实例9：按照空间大小排序" class="headerlink" title="实例9：按照空间大小排序"></a>实例9：按照空间大小排序</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du|sort -nr|more</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># du|sort -nr|more</span></div><div class="line">1288    .</div><div class="line">608     ./test6</div><div class="line">308     ./test4</div><div class="line">32      ./scf</div><div class="line">16      ./scf/service</div><div class="line">12      ./scf/service/deploy</div><div class="line">8       ./test3</div><div class="line">4       ./scf/service/deploy/product</div><div class="line">4       ./scf/service/deploy/info</div><div class="line">4       ./scf/lib</div><div class="line">4       ./scf/doc</div><div class="line">4       ./scf/bin</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="实例10：输出当前目录下各个子目录所使用的空间"><a href="#实例10：输出当前目录下各个子目录所使用的空间" class="headerlink" title="实例10：输出当前目录下各个子目录所使用的空间"></a>实例10：输出当前目录下各个子目录所使用的空间</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du -h --max-depth=1</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># du -h  --max-depth=1</span></div><div class="line">608K    ./test6</div><div class="line">308K    ./test4</div><div class="line">32K     ./scf</div><div class="line">8.0K    ./test3</div><div class="line">1.3M    .</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/27. Linux 命令- chmod" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/27. Linux 命令- chmod/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.271Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/27. Linux 命令- chmod/">
        Linux 命令- chmod
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;chmod命令用于改变linux系统文件或目录的访问权限。用它控制文件或目录的访问权限。该命令有两种用法。一种是包含字母和操作符表达式的文字设定法；另一种是包含数字的数字设定法。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Linux系统中的每个文件和目录都有访问许可权限，用它来确定谁可以通过何种方式对文件和目录进行访问和操作。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;文件或目录的访问权限分为只读，只写和可执行三种。以文件为例，只读权限表示只允许读其内容，而禁止对其做任何的更改操作。可执行权限表示允许将该文件作为一个程序执行。文件被创建时，文件所有者自动拥有对该文件的读、写和可执行权限，以便于对文件的阅读和修改。用户也可根据需要把访问权限设置为需要的任何组合。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;有三种不同类型的用户可对文件或目录进行访问：文件所有者，同组用户、其他用户。所有者一般是文件的创建者。所有者可以允许同组用户有权访问文件，还可以将文件的访问权限赋予系统中的其他用户。在这种情况下，系统中每一位用户都能访问该用户拥有的文件或目录。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;每一文件或目录的访问权限都有三组，每组用三位表示，分别为文件属主的读、写和执行权限；与属主同组的用户的读、写和执行权限；系统中其他用户的读、写和执行权限。当用ls -l命令显示文件或目录的详细信息时，最左边的一列为文件的访问权限。 例如：</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls -al</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll -al</span></div><div class="line">总计 316lrwxrwxrwx 1 root root     11 11-22 06:58 linklog.log -&gt; log2012.log</div><div class="line">-rw-r--r-- 1 root root 302108 11-13 06:03 log2012.log</div><div class="line">-rw-r--r-- 1 root root     61 11-13 06:03 log2013.log</div><div class="line">-rw-r--r-- 1 root root      0 11-13 06:03 log2014.log</div><div class="line">-rw-r--r-- 1 root root      0 11-13 06:06 log2015.log</div><div class="line">-rw-r--r-- 1 root root      0 11-16 14:41 log2016.log</div><div class="line">-rw-r--r-- 1 root root      0 11-16 14:43 log2017.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;以log2012.log为例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-rw-r--r-- 1 root root 296K 11-13 06:03 log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;第一列共有10个位置，第一个字符指定了文件类型。在通常意义上，一个目录也是一个文件。如果第一个字符是横线，表示是一个非目录的文件。如果是d，表示是一个目录。从第二个字符开始到第十个共9个字符，3个字符一组，分别表示了3组用户对文件或者目录的权限。权限字符用横线代表空许可，r代表只读，w代表写，x代表可执行。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>例如：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- rw- r-- r--</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;表示log2012.log是一个普通文件；log2012.log的属主有读写权限；与log2012.log属主同组的用户只有读权限；其他用户也只有读权限。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;确定了一个文件的访问权限后，用户可以利用Linux系统提供的chmod命令来重新设定不同的访问权限。也可以利用chown命令来更改某个文件或目录的所有者。利用chgrp命令来更改某个文件或目录的用户组。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;chmod命令是非常重要的，用于改变文件或目录的访问权限。用户用它控制文件或目录的访问权限。chmod命令详细情况如下。</p>
<h2 id="1-命令格式"><a href="#1-命令格式" class="headerlink" title="1.命令格式"></a>1.命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod [-cfvR] [--<span class="built_in">help</span>] [--version] mode file</div></pre></td></tr></table></figure>
<h2 id="2-命令功能"><a href="#2-命令功能" class="headerlink" title="2.命令功能"></a>2.命令功能</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;用于改变文件或目录的访问权限，用它控制文件或目录的访问权限。</p>
<h2 id="3-命令参数"><a href="#3-命令参数" class="headerlink" title="3.命令参数"></a>3.命令参数</h2><h3 id="必要参数"><a href="#必要参数" class="headerlink" title="必要参数"></a>必要参数</h3><ul>
<li>-c 当发生改变时，报告处理信息</li>
<li>-f 错误信息不输出</li>
<li>-R 处理指定目录以及其子目录下的所有文件</li>
<li>-v 运行时显示详细处理信息</li>
</ul>
<h3 id="选择参数"><a href="#选择参数" class="headerlink" title="选择参数"></a>选择参数</h3><ul>
<li>–reference=&lt;目录或者文件&gt; 设置成具有指定目录或者文件具有相同的权限</li>
<li>–version 显示版本信息</li>
<li>&lt;权限范围&gt;+&lt;权限设置&gt; 使权限范围内的目录或者文件具有指定的权限</li>
<li>&lt;权限范围&gt;-&lt;权限设置&gt; 删除权限范围的目录或者文件的指定权限</li>
<li>&lt;权限范围&gt;=&lt;权限设置&gt; 设置权限范围内的目录或者文件的权限为指定的值</li>
</ul>
<h4 id="权限范围"><a href="#权限范围" class="headerlink" title="权限范围"></a>权限范围</h4><ul>
<li>u ：目录或者文件的当前的用户</li>
<li>g ：目录或者文件的当前的群组</li>
<li>o ：除了目录或者文件的当前用户或群组之外的用户或者群组</li>
<li>a ：所有的用户及群组</li>
</ul>
<h4 id="权限代号"><a href="#权限代号" class="headerlink" title="权限代号"></a>权限代号</h4><ul>
<li>r ：读权限，用数字4表示</li>
<li>w ：写权限，用数字2表示</li>
<li>x ：执行权限，用数字1表示</li>
<li><ul>
<li>：删除权限，用数字0表示</li>
</ul>
</li>
<li>s ：特殊权限 </li>
<li>该命令有两种用法。一种是包含字母和操作符表达式的文字设定法；另一种是包含数字的数字设定法。</li>
</ul>
<h5 id="文字设定法"><a href="#文字设定法" class="headerlink" title="文字设定法"></a>文字设定法</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod [who] [+|-|=] [mode] [filename]</div></pre></td></tr></table></figure>
<h5 id="数字设定法"><a href="#数字设定法" class="headerlink" title="数字设定法"></a>数字设定法</h5><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;我们必须首先了解用数字表示的属性的含义：0表示没有权限，1表示可执行权限，2表示可写权限，4表示可读权限，然后将其相加。所以数字属性的格式应为3个从0到7的八进制数，其顺序是（u）（g）（o）。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;例如，如果想让某个文件的属主有“读/写”二种权限，需要把4（可读）+2（可写）＝6（读/写）。</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;数字设定法的一般形式为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod [mode] [filename]</div></pre></td></tr></table></figure>
<h6 id="数字与字符对应关系如下"><a href="#数字与字符对应关系如下" class="headerlink" title="数字与字符对应关系如下"></a>数字与字符对应关系如下</h6><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;r=4，w=2，x=1</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;若要rwx属性则4+2+1=7</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;若要rw-属性则4+2=6；</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;若要r-x属性则4+1=7。 </p>
<h2 id="4-使用实例"><a href="#4-使用实例" class="headerlink" title="4.使用实例"></a>4.使用实例</h2><h3 id="实例1：增加文件所有用户组可执行权限"><a href="#实例1：增加文件所有用户组可执行权限" class="headerlink" title="实例1：增加文件所有用户组可执行权限"></a>实例1：增加文件所有用户组可执行权限</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod a+x log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al log2012.log </span></div><div class="line">-rw-r--r-- 1 root root 302108 11-13 06:03 log2012.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># chmod a+x log2012.log </span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al log2012.log </span></div><div class="line">-rwxr-xr-x 1 root root 302108 11-13 06:03 log2012.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;即设定文件log2012.log的属性为：文件属主（u） 增加执行权限；与文件属主同组用户（g） 增加执行权限；其他用户（o） 增加执行权限。</p>
<h3 id="实例2：同时修改不同用户权限"><a href="#实例2：同时修改不同用户权限" class="headerlink" title="实例2：同时修改不同用户权限"></a>实例2：同时修改不同用户权限</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod  ug+w,o-x log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al log2012.log </span></div><div class="line">-rwxr-xr-x 1 root root 302108 11-13 06:03 log2012.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># chmod ug+w,o-x log2012.log </span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al log2012.log </span></div><div class="line">-rwxrwxr-- 1 root root 302108 11-13 06:03 log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;即设定文件log2012.log的属性为：文件属主（u） 增加写权限;与文件属主同组用户（g） 增加写权限;其他用户（o） 删除执行权限</p>
<h3 id="实例3：删除文件权限"><a href="#实例3：删除文件权限" class="headerlink" title="实例3：删除文件权限"></a>实例3：删除文件权限</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod a-x log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al log2012.log </span></div><div class="line">-rwxrwxr-- 1 root root 302108 11-13 06:03 log2012.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># chmod a-x log2012.log </span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al log2012.log </span></div><div class="line">-rw-rw-r-- 1 root root 302108 11-13 06:03 log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;删除所有用户的可执行权限</p>
<h3 id="实例4：使用-“-”-设置权限"><a href="#实例4：使用-“-”-设置权限" class="headerlink" title="实例4：使用 “=” 设置权限"></a>实例4：使用 “=” 设置权限</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod u=x log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al log2012.log </span></div><div class="line">-rw-rw-r-- 1 root root 302108 11-13 06:03 log2012.log</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># chmod u=x log2012.log </span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ls -al log2012.log </span></div><div class="line">---xrw-r-- 1 root root 302108 11-13 06:03 log2012.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;撤销原来所有的权限，然后使拥有者具有可读权限</p>
<h3 id="实例5：对一个目录及其子目录所有文件添加权限"><a href="#实例5：对一个目录及其子目录所有文件添加权限" class="headerlink" title="实例5：对一个目录及其子目录所有文件添加权限"></a>实例5：对一个目录及其子目录所有文件添加权限</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod -R u+x test4</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test4</span></div><div class="line">[root@localhost test4]<span class="comment"># ls -al</span></div><div class="line">总计 312drwxrwxr-x 2 root root   4096 11-13 05:50 .</div><div class="line">drwxr-xr-x 5 root root   4096 11-22 06:58 ..</div><div class="line">-rw-r--r-- 1 root root 302108 11-12 22:54 log2012.log</div><div class="line">-rw-r--r-- 1 root root     61 11-12 22:54 log2013.log</div><div class="line">-rw-r--r-- 1 root root      0 11-12 22:54 log2014.log</div><div class="line">[root@localhost test4]<span class="comment"># cd ..</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># chmod -R u+x test4</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test4</span></div><div class="line">[root@localhost test4]<span class="comment"># ls -al</span></div><div class="line">总计 312drwxrwxr-x 2 root root   4096 11-13 05:50 .</div><div class="line">drwxr-xr-x 5 root root   4096 11-22 06:58 ..</div><div class="line">-rwxr--r-- 1 root root 302108 11-12 22:54 log2012.log</div><div class="line">-rwxr--r-- 1 root root     61 11-12 22:54 log2013.log</div><div class="line">-rwxr--r-- 1 root root      0 11-12 22:54 log2014.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;递归地给test4目录下所有文件和子目录的属主分配权限</p>
<h3 id="其他一些实例"><a href="#其他一些实例" class="headerlink" title="其他一些实例"></a>其他一些实例</h3><h4 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h4><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod 751 file</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;说明</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;给 file 的属主分配读、写、执行（7）的权限，给 file 的所在组分配读、执行（5）的权限，给其他用户分配执行（1）的权限</p>
<h4 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h4><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod u=rwx,g=rx,o=x file</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;说明</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;上例的另一种形式</p>
<h4 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h4><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod a=r file</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;说明</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;为所有用户分配读权限</p>
<h4 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h4><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod 444 file</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;说明</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;同上例</p>
<h4 id="5"><a href="#5" class="headerlink" title="5."></a>5.</h4><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod a-wx,a+r file</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;说明</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;同上例</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-2. Linux 命令/9. Linux 命令- cp" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/03/2. Linux 命令/9. Linux 命令- cp/" class="article-date">
  	<time datetime="2017-09-02T17:57:34.270Z" itemprop="datePublished">2017-09-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/2. Linux 命令/9. Linux 命令- cp/">
        Linux 命令- cp
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cp命令用来复制文件或者目录，是Linux系统中最常用的命令之一。一般情况下，shell会设置一个别名，在命令行下复制文件时，如果目标文件已经存在，就会询问是否覆盖，不管你是否使用-i参数。但是如果是在shell脚本中执行cp时，没有-i参数时不会询问是否覆盖。这说明命令行和shell脚本的执行方式有些不同。 </p>
<h2 id="1．命令格式："><a href="#1．命令格式：" class="headerlink" title="1．命令格式："></a>1．命令格式：</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>用法：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp [选项] [-T] [源] [目的]</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;或：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp [选项] [源] [目录]</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;或:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp [选项] [-t] [目录]  [源]</div></pre></td></tr></table></figure>
<h2 id="2．命令功能："><a href="#2．命令功能：" class="headerlink" title="2．命令功能："></a>2．命令功能：</h2><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;将源文件复制至目标文件，或将多个源文件复制至目标目录。</p>
<h2 id="3．命令参数："><a href="#3．命令参数：" class="headerlink" title="3．命令参数："></a>3．命令参数：</h2><ul>
<li>-a, –archive    等于-dR –preserve=all    <ul>
<li>–backup[=CONTROL  为每个已存在的目标文件创建备份</li>
</ul>
</li>
<li>-b  类似–backup 但不接受参数     <ul>
<li>–copy-contents   在递归处理是复制特殊文件内容</li>
</ul>
</li>
<li>-d  等于–no-dereference –preserve=links</li>
<li>-f, –force 如果目标文件无法打开则将其移除并重试(当 -n 选项  存在时则不需再选此项)</li>
<li>-i, –interactive   覆盖前询问(使前面的 -n 选项失效)</li>
<li>-H   跟随源文件中的命令行符号链接</li>
<li>-l –link 链接文件而不复制</li>
<li>-L –dereference   总是跟随符号链接</li>
<li>-n –no-clobber   不要覆盖已存在的文件(使前面的 -i 选项失效)</li>
<li>-P –no-dereference   不跟随源文件中的符号链接</li>
<li>-p   等于–preserve=模式,所有权,时间戳    <ul>
<li>–preserve[=属性列表   保持指定的属性(默认：模式,所有权,时间戳)，如果可能保持附加属性：环境、链接、xattr 等</li>
</ul>
</li>
<li>-R, -r, –recursive  复制目录及目录内的所有项目</li>
</ul>
<h2 id="4．命令实例："><a href="#4．命令实例：" class="headerlink" title="4．命令实例："></a>4．命令实例：</h2><h3 id="实例1：复制单个文件到目标目录，文件在目标文件中不存在"><a href="#实例1：复制单个文件到目标目录，文件在目标文件中不存在" class="headerlink" title="实例1：复制单个文件到目标目录，文件在目标文件中不存在"></a>实例1：复制单个文件到目标目录，文件在目标文件中不存在</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp log.log test5</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cp log.log test5</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:48 log.log</div><div class="line">drwxr-xr-x 6 root root 4096 10-27 01:58 scf</div><div class="line">drwxrwxrwx 2 root root 4096 10-28 14:47 test3</div><div class="line">drwxr-xr-x 2 root root 4096 10-28 14:53 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test5</span></div><div class="line">[root@localhost test5]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root 0 10-28 14:46 log5-1.log</div><div class="line">-rw-r--r-- 1 root root 0 10-28 14:46 log5-2.log</div><div class="line">-rw-r--r-- 1 root root 0 10-28 14:46 log5-3.log</div><div class="line">-rw-r--r-- 1 root root 0 10-28 14:53 log.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;在没有带-a参数时，两个文件的时间是不一样的。在带了-a参数时，两个文件的时间是一致的。</p>
<h3 id="实例2：目标文件存在时，会询问是否覆盖"><a href="#实例2：目标文件存在时，会询问是否覆盖" class="headerlink" title="实例2：目标文件存在时，会询问是否覆盖"></a>实例2：目标文件存在时，会询问是否覆盖</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp log.log test5</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cp log.log test5</span></div><div class="line">cp：是否覆盖“test5/log.log”? n</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cp -a log.log test5</span></div><div class="line">cp：是否覆盖“test5/log.log”? y</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test5/</span></div><div class="line">[root@localhost test5]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root 0 10-28 14:46 log5-1.log</div><div class="line">-rw-r--r-- 1 root root 0 10-28 14:46 log5-2.log</div><div class="line">-rw-r--r-- 1 root root 0 10-28 14:46 log5-3.log</div><div class="line">-rw-r--r-- 1 root root 0 10-28 14:48 log.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;目标文件存在时，会询问是否覆盖。这是因为cp是cp -i的别名。目标文件存在时，即使加了-f标志，也还会询问是否覆盖。 </p>
<h3 id="实例3：复制整个目录"><a href="#实例3：复制整个目录" class="headerlink" title="实例3：复制整个目录"></a>实例3：复制整个目录</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp -a test3 test5</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;目标目录存在时：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cp -a test3 test5 </span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:48 log.log</div><div class="line">drwxr-xr-x 6 root root 4096 10-27 01:58 scf</div><div class="line">drwxrwxrwx 2 root root 4096 10-28 14:47 test3</div><div class="line">drwxr-xr-x 3 root root 4096 10-28 15:11 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cd test5/</span></div><div class="line">[root@localhost test5]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:46 log5-1.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:46 log5-2.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:46 log5-3.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:48 log.log</div><div class="line">drwxrwxrwx 2 root root 4096 10-28 14:47 test3</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;目标目录不存在是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cp -a test3 test4</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:48 log.log</div><div class="line">drwxr-xr-x 6 root root 4096 10-27 01:58 scf</div><div class="line">drwxrwxrwx 2 root root 4096 10-28 14:47 test3</div><div class="line">drwxrwxrwx 2 root root 4096 10-28 14:47 test4</div><div class="line">drwxr-xr-x 3 root root 4096 10-28 15:11 test5</div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;注意目标目录存在与否结果是不一样的。目标目录存在时，整个源目录被复制到目标目录里面    </p>
<h3 id="实例4：复制的-log-log-建立一个连结档-log-link-log"><a href="#实例4：复制的-log-log-建立一个连结档-log-link-log" class="headerlink" title="实例4：复制的 log.log 建立一个连结档 log_link.log"></a>实例4：复制的 log.log 建立一个连结档 log_link.log</h3><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp -s log.log log_link.log</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># cp -s log.log log_link.log</span></div><div class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># ll</span></div><div class="line">lrwxrwxrwx 1 root root    7 10-28 15:18 log_link.log -&gt; log.log</div><div class="line">-rw-r--r-- 1 root root    0 10-28 14:48 log.log</div><div class="line">drwxr-xr-x 6 root root 4096 10-27 01:58 scf</div><div class="line">drwxrwxrwx 2 root root 4096 10-28 14:47 test3</div><div class="line">drwxrwxrwx 2 root root 4096 10-28 14:47 test4</div><div class="line">drwxr-xr-x 3 root root 4096 10-28 15:11 test5</div></pre></td></tr></table></figure>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<strong>说明：</strong></p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;那个 log_link.log 是由 -s 的参数造成的，建立的是一个『快捷方式』，所以您会看到在文件的最右边，会显示这个文件是『连结』到哪里去的！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux命令/">Linux命令</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/44/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/43/">43</a><a class="page-number" href="/page/44/">44</a><span class="page-number current">45</span><a class="page-number" href="/page/46/">46</a><a class="page-number" href="/page/47/">47</a><span class="space">&hellip;</span><a class="page-number" href="/page/63/">63</a><a class="extend next" rel="next" href="/page/46/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2017 失落的乐章
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    

<script>
	var yiliaConfig = {
		fancybox: ,
		mathjax: ,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



  </div>
</body>
</html>